(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cee5cd22"],{"0096":function(t,e,i){"use strict";i("9587")},"021f":function(t,e,i){},"0792":function(t,e,i){"use strict";i("a1f2")},"07f4":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"public-iframe"},[i("div",{staticClass:"ifrme-show",attrs:{id:"ifrmeDiv"}},["iframe"==t.linkType?i("iframeComp",{attrs:{src:t.url}}):t._e()],1),t._v(" "),i("div",{staticClass:"emr-srceen-full-btn"},[i("screen-full",{attrs:{id:"ifrmeDiv"}})],1)])},a=[],r=i("182b"),n=i("061b"),o=i("2423"),l=i("9247"),c=i("d241"),d={components:{diagComp:r["a"],iframeComp:n["a"],screenFull:c["a"]},props:["query","moduleData","idCardNo"],data:function(){return{queryParam:{oid:"",patientId:"",visitId:"",visitTypeCode:""},ids:"",url:"",linkType:"iframe"}},watch:{query:{handler:function(t,e){this.query&&(this.queryParam.oid=this.query.oid,this.ids=this.query.ids,this.queryParam.patientId=this.query.patientId,this.queryParam.visitId=this.query.visitId,this.queryParam.visitTypeCode=this.query.visitTypeCode),this.getPublicPluginForUrl()},deep:!0},moduleData:{handler:function(t,e){this.getPublicPluginForUrl()},deep:!0}},created:function(){this.query&&(this.queryParam.oid=this.query.oid,this.ids=this.query.ids,this.queryParam.patientId=this.query.patientId,this.queryParam.visitId=this.query.visitId,this.queryParam.visitTypeCode=this.query.visitTypeCode)},mounted:function(){this.getPublicPluginForUrl()},methods:{getPublicPluginForUrl:function(){var t=this,e="";this.url="",this.linkType="",e="categoryView"==this.moduleData.page?"ALL":this.queryParam.oid;var i={url:l["a"]["pluginExe"],data:{pluginCode:this.moduleData.pluginId,moduleCode:this.moduleData.moduleId,oid:e,paramMap:{patientId:this.queryParam.patientId,visitId:this.queryParam.visitId,visitTypeCode:this.queryParam.visitTypeCode,idCardNo:this.idCardNo}}};Object(o["a"])(i).then((function(e){if(-1===e.code)return console.warn(e.msg||""),!1;var i=e.content;t.url=i.url;var s=i.linkType||"iframe";s=s.toLowerCase(),t.linkType=s,"open_page"==t.linkType&&window.open(t.url)}))}}},h=d,u=(i("0861"),i("2877")),v=Object(u["a"])(h,s,a,!1,null,"67afff6b",null);e["a"]=v.exports},"0861":function(t,e,i){"use strict";i("33fa")},"13f4":function(t,e,i){"use strict";i("fee0")},"15fd":function(t,e,i){"use strict";function s(t,e){if(null==t)return{};var i,s,a={},r=Object.keys(t);for(s=0;s<r.length;s++)i=r[s],e.indexOf(i)>=0||(a[i]=t[i]);return a}function a(t,e){if(null==t)return{};var i,a,r=s(t,e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(a=0;a<n.length;a++)i=n[a],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}i.d(e,"a",(function(){return a}))},"182b":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{title:t.option.title,visible:t.openDialogFlag,"append-to-body":"",width:"850px","before-close":t.closeDia},on:{"update:visible":function(e){t.openDialogFlag=e}}},[t.openDialogFlag?i("div",[i("LineChart",{attrs:{option:t.option,chartId:t.option.chartId,serachList:t.option.serachList,dataNum:t.option.dataNum,customDateSerach:t.option.customDateSerach}})],1):t._e(),t._v(" "),i("template",{slot:"title"},[i("div",{staticClass:"avue-crud__dialog__header"},[i("span",{staticClass:"el-dialog__title"},[i("span",{staticStyle:{display:"inline-block",width:"3px",height:"20px","margin-right":"18px",float:"left","margin-top":"1px"}},[i("svg-icon",{attrs:{"icon-class":"development"}})],1),t._v("\n        "+t._s(t.option.title)+"\n      ")])])])],2)},a=[],r={data:function(){return{openDialogFlag:!1,show:!0,option:{chartId:""}}},methods:{closeDia:function(){this.show=!1,this.openDialogFlag=!1},open:function(t){this.option=t,this.openDialogFlag=!0}}},n=r,o=(i("7926"),i("95f9"),i("2877")),l=Object(o["a"])(n,s,a,!1,null,"7cda9804",null);e["a"]=l.exports},"1bf6":function(t,e,i){},2220:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAW0AAAFtBAMAAAA+LyYRAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAwUExURQAAAACg6QCg6QCg6QCg6QCg6QCg6QCg6QCg6QCg6QCg6QCg6QCg6QCg6QCg6QCg6Xyj0IcAAAAPdFJOUwAM9DmhG9y6y3OHTmDoKaMu1+YAAA8KSURBVHja7V17cBRFGp+p2S1qs1tbUIRLQCt/BEoe0ZsQYk4eSYFwgDxcKF7hcVYdYFROb05BPD3rtowBH6c1EhAtHxdEFCw9VwKCoFdgROvU81IlFpx36GKp8XH6z9zW5iFbfbOb3cl0z2yyO9PfZKauf3+RZXf2t19//b26+2uOY2BgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYHAI/A0z3z9w186mzz471/TgtkXPNCz3AGn/tBMHdopIj6seWPTh1e5mXfHBwtsypJXKq841NTV9VlmZoa7cvO2dUa7VjxUfbFdJK+ce2Lbo6SMNX69ateqGL1WVWbBzY1rqLU+7U+ijz6TpJVteaViOiZYfNWbmnswPOv/0Mvfp9Yn5KrObFr1jTq3ixIFH1f9/+J2R7qK9fqGoyvPlrwfTovR4JO++6CZhn2xG6PySL4bQ//UHVea3u4e2cEhVgburC3jnhvlon2toX65q9icFKq7/ZLVbaK+VkfLQRc5rmCGhnpdHeo52rYgmPu69EOp4HG153Xu0VWlvrua8pyRx5MEZya2T0JZl3qO9VkK3mNAe5XLjwkfQJxdNHMu869w9UflYwmRK7lUD1kmnXU38GxN6KzPpTcJrWu+X+1PK2z3GuzSbCic8xrszl8O/5i01ieZ4z/YUb0GrmfzWU7yDGu+qAQuz6JkGt4e5AY13r/ZaDVLOtexe7jnedZn61U0vubnSFtJ4X9JeGz0rU/RBE12cFA3My7P6l8fMPNOsZvwtf3Yr83A8x5t0mKPPPIpQarFLg3U1RMzCWCVZsUeNAVredifxriztpFlg9Z/56RzalboSzFbs/236vxVHJZSc6yLiFdq/WjO0U/kC8O+bkeIe4sJCLYwKZiKUrXnfetmLSFliSnya87SXojkDSef2yivuHUSiwovmEhd2Ol3PCF+Lkrt0afGXXwyqCPyTSNlqFrlvcjh23YuSrxb1gUMo9YJR3nLSWYH/DSmvFv9Ldxle/dZZgdeKqblFa9ZS1G0QbljucdCbjo2jrcXbNSGCpiwzCnyHc6YkYlqyGhKXy+gPRg3vdqp8wb+HJlgb3HViyqDidTpzCouVYtJqoHQcGapdwXifQ1oio+stD9V+9BvytXb0mCO8n0UXrMcaQVmZY0jzrnSCdinqseMq1hjLiBEnfE84in5pa1LvR/cbJOFAYbEOTbaZRUspohwXluALi6F40m4R8BrDL6+Hn5mt6I+2Q7KI8hwhDPEsdIlHpFCcH4cShEGK9MD6TD5Gw7nxreRTGoErueNQH400MSQSMYkgXYIVt0JnAn1E2tJOqib85EjS0PbSKlwQAqdqwv0S8bAYNXvVQWi4n6ailKL7sL9LaIk7HQQSJuUURUXpSFUTQnqO3rOJWqKPXhTul3sJpaQYKIfEXsLXU1OUEmKu1FNNTNqU0/gAUHM99Uo1Lv4EzRJfKRqP/T2C1lY9PtpHBM5UE28+ghcghHgVLQ3cARrdN6I7cSPbTWc4G3EFDCHKMZtARN1rCIW3PHHw319DPUauUV7DBUNFD8NSFeCs7M+HN+HziYpXK8GtXgn9chgfwUe0PUnDEnbhzrJDoZ9zN+KqV0pFE2MJXGsAikpBPD0TxBspzHZxE1D4oA/nMR/JR/poqDfmvjqSFwHykDW4ZtRQ+JJfYZMkLE0GoK36yLP4oO6jrN4+oFpvBEt7hPivbVvv+HjaI1iARYn02lfvOfRdgplFwUzIqR67vm01Zq4DUGswhAkpQ3ZDlFMJ/FechuHN1WDeLWQ3q+cjWNbUBlYvJfRRthlz4q6LmKQ04ZewR8dseh7ckvoAq3dt3bjdshdadaX0dq8+BbeOsRrbU+uzOTFxhY4BLtQFsKko2JyYkSrMyX8Ox5uXqzBHYWtiCtIObM7DqTfHdWJD29Zrb/D0TLsUyGU63MPV20rqy7CMtQ10tQsfzXJbMqrRxwl8dDwkb9w5lNgKZdv6sNgHdr9C5AIWytqIhHAJ+4AXF7+bqv8raqPahq8z1APF3gUMdZEIifsc8jpG2DEomLf1y2ed5L3Gxug26j8riI6egiqxEeq3JzDLdNpJ3iEbzjnWS80T2AwxijSDeo1u73b0lB9v3RCGpfvyCd8BWP8+QZw9bOYkPbmsGsKA3kE6bE5UY2Z5PdCnjwZDTnfSKLWcFJbrzbcv5fCG+BLLhzhr9K62MenwoWE8yCgqc+rL9yMcMeCWw+bYJUrxWcGomDZVF4xaLSZj0XekCp72d83oiudtp/R+WXfaloesQeTsrpQ+s6RtuIpZ3OUrxG931HxnT+Vp4USnRc0M6t2lA+Z7XPZQXm6XwSmL5YOQ3l364KPY9izvnJjrLS46BPSR+wjwKJaXc4cgq+15jBK9hywDP10zcDj5MXuOvlS/P6YR3O34NN47TMKjIlCmD0/qwXeUl5PNDkos8l6tDyTbwXk3kofBQxZNwY961ejsc07en+fssLX6WE3C0SxthMb7xpzfs+YyMLsPH56UaLzn5DJ6a5UIvWrYXLcoLG7N8T6d420tkNUvVfAyfEeTXNOAnDkIS9ZCIn347ZduBOe9Osv7Si0etVb50au0P34fOO9gf3cJZZfG25qsIrq0ISzC8+aOZXhPtqubet7+PQ4cMQwvVWlPeM2uLYBdhjI1KXseXFSts2HjPcKb40dRWL+L/pwbVvCR/1r6nDzMvDnG2xO8o17lPX6Y56V37OD/Ne/IsPO2VpJ0ogI7GPyyN3nzC6z1FYhdGl7eVjv/tvVynkRnnzd5n0p4k7fjK2iU0IVtwhvlGd76BfINCx5woj8mT6Pvqa6OvDK90nUvPPFAC4VVDZ9Wtxf6lzCeA+ddiijwHqib12W7TIMLfDWNTQCBXIFRa9cMXkOp6aHwEG3JMuBYt+ZOGi5DW3fNFRwRuAOlEhIJUnbltiPHOwms4HR2avNy9sSo1s0Weu3VL1E5Rhb5ieQN3P7d6goDqW3ZQDbqFO+QSMVi5XbwOaYnPjr9/H/MBihtOd4p4K1h5XQ6T5RnF/brkUPXMrTTiZxzC/ulxm77MKC09yy3cUaIO3Mrg59SpUmIZ4m2Zt3ORWAzSGnxS1tADPQv5d4PHX1T2sPFa5WfN9K0JwCLmyulZWe1TRD+J524uKuL1hbc6dquT37FNPhtvW0JTxYQ+GiVF2mr8f6dnuRd4lC7Xur1GkfP7bksuRyGaSn/5M1p6WC/dZoY4ey5PWqo71nmSd4Rby7LCOJZT/L2gWYlcIFPDaTXWXenN9UbbldyUITcENoOdriuETSogps8bT2QOQO1HqmGFFyCzRliQGuxJcC1mZ8BBRHtwCXTEMytRGTnaPpBcgQk5w6AX5QB01nur+Cn30LiJgg1AV+pI3vUUnIL8BWIRoADpEQf+tEwgQR1DyHEcWuy9wUQ10M94CzDm6T6JZDEvoy6zYrg0VoAptcr9Q7JAWLdqAuoEwXta7fI50WA6lYBujNTkHAXHBShLjiMUR3ILmK+lINlEFTv2PST1wLGwLYt+qMUD6WvIXYRCSJcBtFIb0nQHyXW5MsBGzoIErVeVqXkXcdtkGXCOvuXkGXFHSH2tAgiZBWcmsBL0QVSBUGbStYNcrdyUdpNpiEx2GqyIPVUUzEmF8hoE/gQyzU0bLggkzcb1kG3h1G/0n6ieYy8c5SPgu+VX4Om2P2KQJxUtnHwa1P+iL1rO9Un7DdM7lbonX6ZsNDm1PzGsDGbTNhg8BG61VaiKpO3X3LfghjvGwxTU7HzNftJD5+O1wCMd3g7qRYrTa4HLxi1xg/D3EFfYijO8K1oslWbEpKMOhEDmZUm934HZTTX4sOuRbeONOTHIHfNmN37vU5MPW7lUfx7KGFIPTqAEjQygU3jOOqxcrP4cWS8kDwkQhU3O4wCV31Hovi5+ZWozDUpR0BFsCHRKHAhij4plvg6CT1ieJDhAk+KaDMRyVgJfVqc1d0goX8tMxE3XC05YCJw7vs42lJMer9WRlOMIxSUINsvmwmcqxXRlkG/k1/RMPBzL5dNvVU7aCRoKnCuNo42Tx3E0R76uHLz4ewfMyQ08bDZ1IHtdt1qGrweFdGEd/NKe29mM3OGlv9oHE1829RUwa6UmMuFnxFHkxaPzJeya5vHRx9Sf+Bh83EE3lx1zDyRn9GMlIeuNhV3bKALWB1SWswUit8PW33IOM2kafBz2XyEJr1sIjSt/eRsjitL3Wsq1pV0bikfIpH/1PQ7hCfiqjQ/NPAq0x1GCT5v/tGoAr+j1x/Nc16Xn96MUKpl93LSwKGhTsseI6soIFhpEsr1Y/TBjQgpN71y5GsdxZh2CDKfcxobTzrSWrw1f1qy/mD6qI9y87yXPpzWsCrNnh/ycJs/QqtIOmSqktqV11jPOtDcz/JcU9NjmUqO1saxOt+ESTi0wXTQb+IrTiy8TdSOVw0p77Fiyqlt9urIPjJ4PPLWUwfmLbgrw2cI3uEI+HEmvaYoQy+hZ3vEaYcgzWsM72UjAGdQi3oOF/hW7TB4r3nmkzztHG2O/wuaUqCYfERXWCLqplP/L9zdR01SLfMoVs5/Nlm4Ft3i8BGpsSK6vtDyRb6eAWqE2+3wZRYc9wuUKmx7S38zDzOT/4ZJNQJexfcW+q1q+o6UrWaTW7mecx7h/ai7MFsw88C83UY1/kpCf+KGA8E70ISphY2NyeRbKzk+J7XUPGqa4xaE70yLKA5hrWyeLg6N6XLxZS6axCU08V0Lc7pWQhOGkTbHfS+jSbuLVVP/UQltPswNK1RVURYXRzz8JBpWJenHhjuQcncxLNarmf/Dw05bzSqXInS+YCXnZ2xEyiOuOEEnHBRRcklhlnzFE+p7F7vkuDl/VM2GN+8u4I0n1eRz4uOca/CDqrPJe/4xuBzHTF8oIuWeqZyLMObMRoSuuudI/n52/lnz1Wz5/PMua0nA/5AunVyx7ZWr8xDzqawnLZnKuQ789LRA0T+3PdOw3KQT6Qh1OF7nXImKWelCG1LOPbht0Ut/f/PNi1gN4Loj7j0/zK/fs/3jbB5cWTmb8xAqZr4/b2c/999x3gK/atpbT8276/f7OAYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBu/if5S1eg26s1RfAAAAAElFTkSuQmCC"},2280:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"visit-view"},[i("patientInfoComp",{attrs:{patientInfo:t.patientInfo,eid:t.eid,ids:t.queryForm.ids}}),t._v(" "),i("serachCommon",{attrs:{queryForm:t.queryForm,serachVisitList:t.serachVisitList,conditionList:t.conditionList,opionStatus:t.opionStatus,visitOption:t.visitOption,deptOption:t.deptOption},on:{setSerach:t.getList,openCommon:t.showCommonSerach}}),t._v(" "),i("transition",{attrs:{name:"slide-fade"},on:{enter:t.enter,leave:t.leave}},[t.showCommonSh?i("serach",{attrs:{"serach-list":t.serachList,queryForm:t.queryForm,"row-num":t.rowNum},on:{"update:queryForm":function(e){t.queryForm=e},"update:query-form":function(e){t.queryForm=e},serach:t.getList}}):t._e()],1),t._v(" "),i("div",{staticClass:"show-icon"},[i("span",{staticClass:"sp",on:{click:t.showStatFun}},[i("i",{class:t.showStat?"el-icon-d-arrow-left":"el-icon-d-arrow-right"})])]),t._v(" "),i("transition",{attrs:{name:"slide-fade"},on:{enter:t.enter1,leave:t.leave1}},[t.showStat?i("div",{staticClass:"stat-chart",class:t.showStat?"show":""},[i("div",{staticClass:"chart-container"},[i("statChartList",{attrs:{visitList:t.visitList,visitId:t.visitId,oid:t.query.oid,ids:t.queryForm.ids,idCardNo:t.idCardNo,themeName:t.themeName,queryForm:t.queryForm},on:{updateVisitType:t.updateVisitType,updateVisitDept:t.updateVisitDept}})],1)]):t._e()]),t._v(" "),i("div",{class:"visit-info"+(t.showStat?" expand":"")},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showLeftVisit,expression:"showLeftVisit"}],staticClass:"lf-lst"},[i("visitDeptList",{attrs:{visitList:t.visitList,areaList:t.areaList,query:t.query},on:{update:t.setVisitId,emits:t.getList,show:t.setShow,changeTheme:t.changeTheme}})],1),t._v(" "),t.showLeftVisit?t._e():i("div",{staticClass:"lf-lst hidden"},[i("div",{staticClass:"expand-icon",on:{click:t.setShow}},[i("i",{staticClass:"el-icon-d-arrow-right"})])]),t._v(" "),i("div",{staticClass:"right-cont",class:t.showLeftVisit?"":" expand"},[t.visitList.length>0?i("visitInfo",{attrs:{query:t.query,idCardNo:t.idCardNo,areaList:t.areaList,visitList:t.visitList}}):t._e()],1)])],1)},a=[],r=(i("7f7f"),i("456d"),i("7514"),i("ac6a"),i("5530")),n=(i("28a5"),i("f576"),i("0912")),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"visit-dept-list",class:t.theme},[i("div",{staticClass:"line"},[t.settingsBtn?i("div",{staticClass:"sett"},[i("i",{staticClass:"el-icon-setting sett",on:{click:t.openConfig}})]):t._e(),t._v(" "),i("div",{staticClass:"theme-cge",on:{click:t.setTheme}},[i("svg-icon",{attrs:{"icon-class":"theme"}})],1),t._v(" "),i("div",{staticClass:"show-hidde"},[i("i",{staticClass:"el-icon-d-arrow-left",on:{click:t.setShow}})])]),t._v(" "),t.visitList.length>0&&t.loading?i("div",{staticClass:"visit-list-wrapp"},t._l(t.visitList,(function(e,s){return i("div",{key:s,staticClass:"list",attrs:{id:e.VISIT_ID},on:{click:function(i){return t.setVisitId(e)}}},[i("div",{staticClass:"top"},[i("div",{class:"bk"+(t.groupStr(e)?" curr":"")}),t._v(" "),t.groupStr(e)?i("div",{staticClass:"bkr"}):t._e(),t._v(" "),i("div",{class:"time"+(t.groupStr(e)?" curr":"")},[t._v("\n          "+t._s(e.START_TIME)+"\n        ")])]),t._v(" "),i("div",{staticClass:"visit-info-wrapp"},[i("div",{class:"info"+(t.groupStr(e)?" curr":"")},["N"!=t.showVisitListOrg?i("div",{class:"org"+(t.groupStr(e)?" curr":"")},[t._v("\n            "+t._s(e.ORG_NAME)+"\n          ")]):t._e(),t._v(" "),i("div",{class:"dept"+(t.groupStr(e)?" curr":"")},[i("svg-icon",{attrs:{"icon-class":"place"}}),t._v(" "+t._s(e.START_DEPT_NAME)+"\n          ")],1),t._v(" "),i("div",{staticClass:"type"},[i("span",{class:"v-type v"+e.VISIT_TYPE_CODE},[t._v(t._s(t.getShortName(e.VISIT_TYPE_NAME))+"\n            ")]),t._v(" "),e.VISIT_STATUS_NAME?i("span",{staticClass:"status"},["就诊中"==e.VISIT_STATUS_NAME?i("svg-icon",{attrs:{"icon-class":"process"}}):t._e(),t._v(t._s(e.VISIT_STATUS_NAME))],1):t._e()]),t._v(" "),i("div",{class:"diag"+(t.groupStr(e)?" curr":"")},[t._v("\n            "+t._s(e.DIAGNOSIS_NAME?e.DIAGNOSIS_NAME:"-")+"\n          ")]),t._v(" "),i("div",{class:"visit-time"+(t.groupStr(e)?" curr":"")},[i("i",{staticClass:"el-icon-caret-right"}),t._v(t._s(e.VISIT_ID)+"\n          ")])])])])})),0):i("div",{staticClass:"visit-list-wrapp empty"},[t._v("暂无数据")]),t._v(" "),i("diagIndex",{ref:"diagIndex",on:{update:t.updateList}})],1)},l=[],c=i("f42e"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chart",staticStyle:{height:"100%",width:"100%"},attrs:{id:"visitPieChart"}})},h=[],u={props:["chartData"],data:function(){return{chart:null,chartNewData:[],chartDrill:!1}},watch:{chartData:{handler:function(t,e){this.chartNewData=t,this.initChart()},deep:!0}},mounted:function(){var t=this;this.chartNewData=this.chartData,this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){for(var t=0;t<this.chartNewData.length;t++){var e=this.chartNewData[t];"住院"==e.name?e.itemStyle={color:new this.$echarts.graphic.LinearGradient(0,0,1,1,[{offset:0,color:"#5ad4bc"},{offset:1,color:"#5ee7cc"}]),borderRadius:2}:"门诊"==e.name?e.itemStyle={color:new this.$echarts.graphic.LinearGradient(0,0,1,1,[{offset:0,color:"#71befd"},{offset:1,color:"#2d9cf5"}]),borderRadius:2}:e.itemStyle={color:new this.$echarts.graphic.LinearGradient(0,0,1,1,[{offset:0,color:"#f2815b"},{offset:1,color:"#ed7d57"}]),borderRadius:2}}null==this.chart&&(this.chart=this.$echarts.init(document.getElementById("visitPieChart")));var i=this;function s(t){i.$emit("onEmit",t.name,i.chartDrill),i.chartDrill=!i.chartDrill,i.chartDrillFn(t.name)}i.chart.off("click"),i.chart.setOption({title:{text:"",left:"center",top:0,textStyle:{color:"#ccc"}},tooltip:{trigger:"item"},series:[{name:"",type:"pie",radius:["30%","55%"],center:["50%","45%"],data:i.chartNewData,roseType:"radius",label:{normal:{formatter:function(t){var e=t.name,i=t.value;return"住院"===e?"{title2|住}{count2|"+i+"}{p2|"+t.percent.toFixed(0)+"%}":"门诊"===e?"{title3|门}{count3|"+i+"}{p3|"+t.percent.toFixed(0)+"%}":"{title1|急}{count1|"+i+"}{p1|"+t.percent.toFixed(0)+"%}"},backgroundColor:"#fff",borderRadius:8,padding:[0,3,0,0],lineHeight:24,borderColor:"#c0ede4",borderWidth:1,rich:{title1:{color:"#fff",align:"center",height:24,padding:[0,6,0,6],borderRadius:8,backgroundColor:"#f2815b"},title2:{color:"#fff",align:"center",height:24,padding:[0,6,0,6],borderRadius:8,backgroundColor:"#28d4b2"},title3:{color:"#fff",align:"center",height:24,padding:[0,6,0,6],borderRadius:8,backgroundColor:"#71befd"},count1:{color:"#f2815b",padding:[0,3,0,5],height:24},count2:{color:"#28d4b2",padding:[0,3,0,8],height:24},count3:{color:"#2e9df5",padding:[0,3,0,5],height:24},p1:{color:"#f2815b",padding:[0,0,0,5],height:24},p2:{color:"#28d4b2",padding:[0,0,0,5],height:24},p3:{color:"#2e9df5",padding:[0,0,0,5],height:24}}}},labelLine:{show:!1,lineStyle:{color:"rgba(255, 255, 255, 0.7)"},smooth:.2,length:1,length2:1},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(t){return 500*Math.random()}}]}),i.chart.on("click",s)},chartDrillFn:function(t){this.chartDrill?(this.chartNewData=this.chartData.filter((function(e){if(e.name==t)return e})),this.initChart()):(this.chartNewData=this.chartData,this.initChart())}}},v=u,p=i("2877"),_=Object(p["a"])(v,d,h,!1,null,null,null),f=_.exports,m=configSetting||{},y=m.showVisitListOrg,C={components:{visitPieChart:f,diagIndex:c["a"]},props:["visitList","query","areaList"],data:function(){return{currVisitId:"",settingsBtn:!1,theme:"light",loading:!0,showVisitListOrg:y}},watch:{visitList:{handler:function(t,e){var i=this;setTimeout((function(){document.getElementById(i.query.visitId)&&document.getElementById(i.query.visitId).scrollIntoView()}),1e3)}},query:{handler:function(t,e){this.updateVisit()},deep:!0}},mounted:function(){var t=localStorage.getItem("userRole")||"";this.settingsBtn="admin"==t,this.$emit("changeTheme",this.theme),this.updateVisit()},computed:{},methods:{updateList:function(){this.$emit("emits","")},updateVisit:function(){this.currVisitId=this.genNewVisit(this.query.oid,this.query.patientId,this.query.visitId,this.query.visitTypeCode),this.$forceUpdate()},genNewVisit:function(t,e,i,s){var a=t+"_"+e+"_"+i+"_"+s;return a},setVisitId:function(t){this.loading=!1,this.currVisitId=this.genNewVisit(t.OID,t.PATIENT_ID,t.VISIT_ID,t.VISIT_TYPE_CODE),this.$emit("update",t);var e=this;this.$nextTick((function(){e.loading=!0}))},groupStr:function(t){var e=t.OID+"_"+t.PATIENT_ID+"_"+t.VISIT_ID+"_"+t.VISIT_TYPE_CODE;return e===this.currVisitId},setShow:function(){this.$emit("show","")},setTheme:function(){this.theme="light"===this.theme?"dark":"light",this.$emit("changeTheme",this.theme)},getShortName:function(t){return t.indexOf("门")>-1?"门":t.indexOf("住")>-1?"住":t.indexOf("急")>-1?"急":"-"},openConfig:function(){var t={title:"就诊列表自定义过滤器配置",configCode:"IN_VISIT_FILTER",configCodeMz:"OUT_VISIT_FILTER",oid:this.oid,configType:"visitform",visitTypeCode:this.visitType,width:"65%",areaList:this.areaList,namePlaceText:"数据表HDR_OUT_VISITHDR_PAT_ADT的字段",valuePlaceText:""};this.$refs.diagIndex.open(t)},scrollTop:function(){this.$refs.scrollContainer.scrollTop=0}}},g=C,b=(i("accd"),Object(p["a"])(g,o,l,!1,null,"63f52d79",null)),I=b.exports,T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"visit-info-detail",class:t.theme},[i("div",{staticClass:"nav-warpper"},[i("div",{staticClass:"info-nav"},[t._l(t.navList,(function(e,s){return i("div",{key:s,class:"nav-lst"+(s==t.navList.length-1||(s+1)%10===0?" end":"")+(t.currPage==t.getPage(s,10)?"":" hide")+t.getClass(e)+(t.currNav==e.id?" curr liuguang":""),on:{click:function(i){return t.setNav(e)}}},["dark"!=t.theme?i("div",{staticClass:"icon-block"},[i("svg-icon",{attrs:{"icon-class":t.getIconName(e.id),"class-name":t.getIconName(e.id)}})],1):t._e(),t._v(" "),e.count?t._e():i("div",{staticClass:"stat"},[t._v(t._s(e.name))]),t._v(" "),e.count?i("div",{staticClass:"stat"},[i("div",{staticClass:"lab"},[t._v(t._s(e.name))]),t._v(" "),"civ"==e.typeCode&&"CIV"===e.pluginCode?i("div",{staticClass:"count"},[t._v("\n            "+t._s(e.count)+"\n          ")]):t._e()]):t._e(),t._v(" "),i("span",{staticClass:"spl spl1"}),t._v(" "),i("span",{staticClass:"spl spl2"}),t._v(" "),i("span",{staticClass:"spl spl3"}),t._v(" "),i("span",{staticClass:"spl spl4"})])})),t._v(" "),t.settingsBtn?i("div",{staticClass:"add",class:"nav-lst"+(t.navList.length<10*t.currPage&&t.currPage>1||t.navList.length<10?"":" hide")+(t.navList.length%10===0?" first":""),on:{click:function(e){return t.addNav()}}},[i("div",{staticClass:"icon-block add-block"},[i("svg-icon",{attrs:{"icon-class":"addIcon"}})],1),t._v(" "),i("div",{staticClass:"stat"},[t._v("添加")])]):t._e(),t._v(" "),t.navList.length>9?i("div",{staticClass:"change-page"},[i("div",{staticClass:"op"},[i("svg-icon",{attrs:{"icon-class":"top"},on:{click:t.goLast}})],1),t._v(" "),i("div",{staticClass:"op"},[i("svg-icon",{attrs:{"icon-class":"down"},on:{click:t.goNext}})],1)]):t._e()],2)]),t._v(" "),"index_module"==t.currNav?i("div",{staticClass:"info-cont"},[i("visitIndex",{attrs:{query:t.query}})],1):t._e(),t._v(" "),"order_module"==t.currNav?i("div",{staticClass:"info-cont"},[i("order",{attrs:{query:t.query,areaList:t.areaList}})],1):t._e(),t._v(" "),"lab_module"==t.currNav?i("div",{staticClass:"info-cont lab-report"},[i("lisReport",{attrs:{query:t.query,nowIds:t.nowIds}})],1):t._e(),t._v(" "),"mr_module"==t.currNav?i("div",{staticClass:"info-cont lab-report"},[i("emrCont",{attrs:{query:t.query}})],1):t._e(),t._v(" "),"nurse_module"==t.currNav?i("div",{staticClass:"info-cont lab-report"},[i("nurseCont",{attrs:{query:t.query}})],1):t._e(),t._v(" "),"oper_module"==t.currNav?i("div",{staticClass:"info-cont lab-report"},[i("operate",{attrs:{query:t.query}})],1):t._e(),t._v(" "),"exam_module"==t.currNav?i("div",{staticClass:"info-cont lab-report"},[i("pacsReport",{attrs:{query:t.query}})],1):t._e(),t._v(" "),"URL"==t.publicModuleData.typeCode?i("div",{staticClass:"info-cont lab-report"},[i("publicIframe",{attrs:{query:t.query,idCardNo:t.idCardNo,moduleData:t.publicModuleData}})],1):t._e(),t._v(" "),"TABLE"===t.publicModuleData.typeCode?i("div",{staticClass:"info-cont lab-report"},[i("commonPlugsTable",{attrs:{plugsType:t.publicModuleData.pluginId,moduleId:t.publicModuleData.moduleId,typeCode:t.publicModuleData.typeCode,query:t.query,viewType:"page",idCardNo:t.idCardNo}})],1):t._e(),t._v(" "),"TABLEGROUP"===t.publicModuleData.typeCode?i("div",{staticClass:"info-cont lab-report"},[i("commonPlugTableGroup",{attrs:{groupList:t.publicModuleData.children,query:t.query,viewType:"page",idCardNo:t.idCardNo}})],1):t._e(),t._v(" "),"LIST_TABLE"===t.publicModuleData.typeCode||"LIST_URL"===t.publicModuleData.typeCode?i("div",{staticClass:"info-cont lab-report"},[i("commonPlugsListTable",{attrs:{plugsType:t.publicModuleData.pluginId,moduleId:t.publicModuleData.moduleId,typeCode:t.publicModuleData.typeCode,query:t.query,idCardNo:t.idCardNo,viewType:"page"}})],1):t._e(),t._v(" "),"ocl_inp_module"===t.publicModuleData.moduleId||"ocl_outp_module"===t.publicModuleData.moduleId||"ocl_business_module"===t.publicModuleData.moduleId?i("div",{staticClass:"info-cont lab-report"},[i("oclPlugs",{attrs:{moduleId:t.publicModuleData.moduleId,query:t.query}})],1):t._e(),t._v(" "),"ocl_old_inp_module"===t.publicModuleData.moduleId||"ocl_old_outp_module"===t.publicModuleData.moduleId||"ocl_old_business_module"===t.publicModuleData.moduleId?i("div",{staticClass:"info-cont lab-report"},[i("oclOldPlugs",{attrs:{moduleId:t.publicModuleData.moduleId,query:t.query}})],1):t._e(),t._v(" "),"EXE_PLUGIN"===t.publicModuleData.pluginId?i("div",{staticClass:"info-cont lab-report"},[i("afterExe",{attrs:{query:t.query,moduleData:t.publicModuleData,idCardNo:t.idCardNo}})],1):t._e(),t._v(" "),i("diagIndex",{ref:"diagIndex",on:{update:t.getNavList}})],1)},E=[],L=i("15fd"),O=(i("8615"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"visit-index"},[t._e(),t._v(" "),i("div",{staticClass:"sub-tit sub-tit-first"},[i("div",{staticClass:"tit"},[t._v("患者信息及就诊信息")]),t._v(" "),i("div",{staticClass:"line"},[t.settingsBtn?i("i",{staticClass:"el-icon-setting",on:{click:t.addItem}}):t._e()]),t._v(" "),i("div",{staticClass:"rbt"},[i("span",{on:{click:t.showPatientInfoFun}},[i("i",{class:t.showPatientInfo?"el-icon-d-arrow-left":"el-icon-d-arrow-right"})])])]),t._v(" "),t.showPatientInfo?i("div",{staticClass:"patient-table"},[i("div",{staticClass:"row-new-list"},t._l(t.summaryData,(function(e,s){return i("div",{key:s,class:"item-list"+(s<t.summaryData.length-4?"":" last-item")},[i("div",{staticClass:"cell-body cell-title"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v(t._s(e.value))])])})),0),t._v(" "),0==t.summaryData.length?i("div",{staticClass:"empty"},[t._v("暂无数据")]):t._e()]):t._e(),t._v(" "),i("div",{staticClass:"sub-tit"},[i("div",{staticClass:"tit"},[t._v("诊断信息")]),t._v(" "),i("div",{staticClass:"line"}),t._v(" "),i("div",{staticClass:"rbt"},[i("span",{on:{click:t.showDiagFun}},[i("i",{class:t.showDiag?"el-icon-d-arrow-left":"el-icon-d-arrow-right"})])])]),t._v(" "),t.showDiag?i("div",{staticClass:"patient-table"},[i("div",{staticClass:"dtable"},[t._m(0),t._v(" "),0==t.diagList.length?i("div",{staticClass:"row-body rows"},[i("div",{staticClass:"cell cell-body empty"},[t._v("暂无数据")])]):t._e(),t._v(" "),t._l(t.diagList,(function(e,s){return i("div",{key:s+"bz",class:"row-body rows r"+s%2},[i("div",{staticClass:"cell cell-body ch0"},[t._v(t._s(s+1))]),t._v(" "),i("div",{staticClass:"cell cell-body ch1"},[t._v(t._s(e.DIAGNOSIS_TYPE_NAME))]),t._v(" "),i("div",{staticClass:"cell cell-body ch1"},[t._v(t._s(e.MAIN_FLAG))]),t._v(" "),i("div",{staticClass:"cell cell-body ch1"},[t._v(t._s(e.DIAGNOSIS_NAME))]),t._v(" "),i("div",{staticClass:"cell cell-body ch1"},[t._v(t._s(e.DIAGNOSIS_DESC))]),t._v(" "),i("div",{staticClass:"cell cell-body ch1"},[t._v(t._s(e.DIAGNOSIS_CODE))]),t._v(" "),i("div",{staticClass:"cell cell-body ch1"},[t._v(t._s(e.DIAGNOSIS_TIME))])])}))],2)]):t._e(),t._v(" "),"02"==this.query.visitTypeCode?i("div",{staticClass:"sub-tit"},[i("div",{staticClass:"tit"},[t._v("手术信息")]),t._v(" "),i("div",{staticClass:"line"}),t._v(" "),i("div",{staticClass:"rbt"},[i("span",{on:{click:t.showOperateFun}},[i("i",{class:t.showOperate?"el-icon-d-arrow-left":"el-icon-d-arrow-right"})])])]):t._e(),t._v(" "),t.showOperate?i("div",{staticClass:"patient-table"},[i("div",{staticClass:"dtable"},[t._m(1),t._v(" "),0==t.operatList.length?i("div",{staticClass:"row-body rows"},[i("div",{staticClass:"cell cell-body empty"},[t._v("暂无数据")])]):t._e(),t._v(" "),t._l(t.operatList,(function(e,s){return i("div",{key:s+"op",class:"row-body rows r"+s%2},[i("div",{staticClass:"cell cell-body opcell0"},[t._v(t._s(e.OPERATION_CODE))]),t._v(" "),i("div",{staticClass:"cell cell-body opcell0"},[t._v(t._s(e.OPERATION_DATE))]),t._v(" "),i("div",{staticClass:"cell cell-body opcell"},[t._v("\n          "+t._s(e.OPERATION_GRADE_NAME)+"\n        ")]),t._v(" "),i("div",{staticClass:"cell cell-body opcell0"},[t._v(t._s(e.OPERATION_NAME))]),t._v(" "),i("div",{staticClass:"cell cell-body opcell1"},[t._v(t._s(e.SURGEN_NAME))]),t._v(" "),i("div",{staticClass:"cell cell-body opcell1"},[t._v("\n          "+t._s(e.FIRST_ASSISTANT_NAME)+"\n        ")]),t._v(" "),i("div",{staticClass:"cell cell-body opcell1"},[t._v("\n          "+t._s(e.SECOND_ASSISTANT_NAME)+"\n        ")]),t._v(" "),i("div",{staticClass:"cell cell-body opcell"},[t._v(t._s(e.WOUND_GRADE_NAME))]),t._v(" "),i("div",{staticClass:"cell cell-body opcell"},[t._v("\n          "+t._s(e.HEALING_GRADE_NAME)+"\n        ")]),t._v(" "),i("div",{staticClass:"cell cell-body opcell"},[t._v("\n          "+t._s(e.ANESTHESIA_METHOD_NAME)+"\n        ")]),t._v(" "),i("div",{staticClass:"cell cell-body opcell"},[t._v("\n          "+t._s(e.ANESTHESIA_DOCTOR_NAME)+"\n        ")])])}))],2)]):t._e(),t._v(" "),"02"==this.query.visitTypeCode?i("div",{staticClass:"sub-tit fyxx"},[i("div",{staticClass:"tit"},[t._v("费用信息")]),t._v(" "),i("div",{staticClass:"line"},[i("span",{staticClass:"tip"},[t._v("住院总费用"),i("span",{staticClass:"num"},[t._v(t._s(t._formatNumber(t.costInfo.total)))]),t._v("元")]),t._v(" "),i("span",{staticClass:"tip"},[t._v("自付金额"),i("span",{staticClass:"num"},[t._v(t._s(t._formatNumber(t.costInfo.selfExpense)))]),t._v("元")])]),t._v(" "),i("div",{staticClass:"rbt"},[i("span",{on:{click:t.showCostFun}},[i("i",{class:t.showCost?"el-icon-d-arrow-left":"el-icon-d-arrow-right"})])])]):t._e(),t._v(" "),t.showCost?i("div",{staticClass:"patient-table"},[i("div",{staticClass:"cost-info"},[t.costInfo.data&&t.costInfo.data.length>0?i("div",{staticClass:"cost-list"},t._l(t.costInfo.data,(function(e,s){return i("div",{key:s+"ct",staticClass:"cost"},[i("div",{staticClass:"cell type-tit"},[i("div",{staticClass:"tit-cont"},[i("div",{staticClass:"index"},[t._v(t._s(s+1))]),t._v(" "),i("div",{staticClass:"tit"},[t._v(t._s(e.name))])])]),t._v(" "),i("div",{staticClass:"cell detail-lst"},[e.data&&e.data.length>0?i("div",{staticClass:"list"},t._l(e.data,(function(e,s){return i("div",{key:s+"de",staticClass:"detail"},[i("div",{staticClass:"dr lab"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"dr val"},[t._v(t._s(e.cost))])])})),0):t._e()])])})),0):t._e()])]):t._e(),t._v(" "),i("diagIndex",{ref:"diagIndex",on:{update:t.getSummary}}),t._v(" "),i("diagIndexFee",{ref:"diagIndexFee"})],1)}),N=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row-head rows"},[i("div",{staticClass:"cell cell-head ch0"},[t._v("序号")]),t._v(" "),i("div",{staticClass:"cell cell-head ch1"},[t._v("诊断类型")]),t._v(" "),i("div",{staticClass:"cell cell-head ch1"},[t._v("主要诊断")]),t._v(" "),i("div",{staticClass:"cell cell-head ch1"},[t._v("诊断名称")]),t._v(" "),i("div",{staticClass:"cell cell-head ch1"},[t._v("诊断描述")]),t._v(" "),i("div",{staticClass:"cell cell-head ch1"},[t._v("疾病编码")]),t._v(" "),i("div",{staticClass:"cell cell-head ch1"},[t._v("诊断日期")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row-head rows"},[i("div",{staticClass:"cell cell-head opcell0"},[t._v("手术及操作编码")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell0"},[t._v("手术及操作日期")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell"},[t._v("手术级别")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell0"},[t._v("手术及操作名称")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell1"},[t._v("术者")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell1"},[t._v("I助")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell1"},[t._v("II助")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell"},[t._v("切口等级")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell"},[t._v("愈合等级")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell"},[t._v("麻醉方式")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell"},[t._v("麻醉医师")])])}],S=i("b775"),A=i("4328"),w=i.n(A),D=i("9247");function q(t){return Object(S["a"])({url:D["a"]["getPatientSummary"],method:"post",data:w.a.stringify(t),headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:localStorage.getItem("Authorization")}})}function R(t){return Object(S["a"])({url:D["a"]["getPatientSummaryDiag"],method:"post",data:w.a.stringify(t),headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:localStorage.getItem("Authorization")}})}function P(t){return Object(S["a"])({url:D["a"]["getPatientInpSummaryOpera"],method:"post",data:w.a.stringify(t),headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:localStorage.getItem("Authorization")}})}function x(t){return Object(S["a"])({url:D["a"]["getPatientInpSummaryFee"],method:"post",data:w.a.stringify(t),headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:localStorage.getItem("Authorization")}})}var F={components:{diagIndex:c["a"],diagIndexFee:c["a"]},props:["query"],data:function(){return{showPatientInfo:!0,showDiag:!0,showOperate:!0,showCost:!0,costInfo:{},summaryData:[],diagList:[],operatList:[],settingsBtn:!1}},watch:{query:{handler:function(t,e){this.query&&(this.getCostInfo(),this.getSummary(),this.getSummaryDiag(),this.getSummaryOper(),"02"!=this.query.visitTypeCode&&(this.showCost=!1,this.showOperate=!1,this.showDiag=!0))},deep:!0}},created:function(){this.query&&("02"!=this.query.visitTypeCode&&(this.showCost=!1,this.showOperate=!1,this.showDiag=!0),this.getCostInfo(),this.getSummary(),this.getSummaryDiag(),this.getSummaryOper())},mounted:function(){var t=localStorage.getItem("userRole")||"";this.settingsBtn="admin"==t},methods:{getCostInfo:function(){var t=this,e=this.query;delete e.ids,x(e).then((function(e){t.costInfo=e}))},getSummary:function(){var t=this,e=this.query;delete e.ids,q(e).then((function(e){t.summaryData=e}))},getSummaryDiag:function(){var t=this;R(this.query).then((function(e){t.diagList=e}))},getSummaryOper:function(){var t=this;P(this.query).then((function(e){t.operatList=e}))},showPatientInfoFun:function(){this.showPatientInfo=!this.showPatientInfo},showDiagFun:function(){this.showDiag=!this.showDiag},showOperateFun:function(){this.showOperate=!this.showOperate},showCostFun:function(){this.showCost=!this.showCost},addItem:function(){var t="";t="02"==this.query.visitTypeCode?"INP_SUMMARY_FIELDS":"OUTP_SUMMARY_FIELDS";var e={title:"患者信息及就诊信息项配置",configCode:t,oid:this.query.oid,configType:"table"};this.$refs.diagIndex.open(e)},addFeeItem:function(){var t={title:"费用信息项配置",configCode:"VISIT_SUMMARY_FEE_COLUMN",oid:this.query.oid,configType:"tableFee"};this.$refs.diagIndexFee.open(t)}}},k=F,M=(i("2d7e"),Object(p["a"])(k,O,N,!1,null,"2e525b8c",null)),U=M.exports,B=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"order"},[i("div",{staticClass:"nav-cont"},[t._l(t.serachList,(function(e,s){return i("div",{key:s,class:"tab-page "+(t.activeName==e.value?"current":"none"),on:{click:function(i){return t.setQuery(e.value)}}},[i("div",{staticClass:"tits"},[t._v(t._s(e.label)+"("+t._s(t.getCount(e.value))+")")]),t._v(" "),i("div",{staticClass:"line-s"})])})),t._v(" "),"ALL"!=t.activeName&&t.settingsBtn?i("i",{staticClass:"el-icon-setting sett",on:{click:t.openConfig}}):t._e()],2),t._v(" "),i("div",{staticClass:"sel-type"},[i("div",{staticClass:"left"},[i("span",{staticClass:"yzxz"},[t._v("医嘱性质")]),t._v(" "),i("el-radio-group",{attrs:{size:"medium"},on:{change:t.serach},model:{value:t.queryForm.orderProperty,callback:function(e){t.$set(t.queryForm,"orderProperty",e)},expression:"queryForm.orderProperty"}},[i("el-radio",{attrs:{label:""}},[t._v("全部")]),t._v(" "),t._l(t.natureOption,(function(e,s){return i("el-radio",{key:s,attrs:{label:e.code}},[t._v(t._s(e.name))])}))],2),t._v(" "),i("span",{staticClass:"yzzt"},[t._v("医嘱状态")]),t._v(" "),i("el-select",{attrs:{placeholder:"请选择医嘱状态"},on:{change:t.serach},model:{value:t.queryForm.orderStatus,callback:function(e){t.$set(t.queryForm,"orderStatus",e)},expression:"queryForm.orderStatus"}},[i("el-option",{attrs:{label:"全部医嘱状态",value:""}}),t._v(" "),t._l(t.statusOption,(function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],2),t._v(" "),"ALL"===t.activeName||"KF"===t.activeName||"JM"===t.activeName||"QT"===t.activeName?i("span",{staticClass:"yzzt"},[t._v("药品性质")]):t._e(),t._v(" "),"ALL"===t.activeName||"KF"===t.activeName||"JM"===t.activeName||"QT"===t.activeName?i("el-select",{attrs:{placeholder:"请选择药品性质"},on:{change:t.serach},model:{value:t.queryForm.drugProperty,callback:function(e){t.$set(t.queryForm,"drugProperty",e)},expression:"queryForm.drugProperty"}},[i("el-option",{attrs:{label:"全部药品性质",value:""}}),t._v(" "),t._l(t.drugTypeList,(function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:t.code}})}))],2):t._e()],1),t._v(" "),i("div",{staticClass:"right"},[i("el-input",{attrs:{placeholder:"请按医嘱名称搜索",clearable:""},on:{change:t.serach},model:{value:t.queryForm.orderItemName,callback:function(e){t.$set(t.queryForm,"orderItemName",e)},expression:"queryForm.orderItemName"}})],1)]),t._v(" "),i("el-table",{attrs:{data:t.orderList,stripe:"","cell-class-name":t.cellTableData,"row-key":t.indexRow}},[i("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"70"}},[i("template",{slot:"header"},[t._v("\n        序号"),t.settingsBtn?i("i",{staticClass:"el-icon-setting",staticStyle:{"font-size":"13px","margin-left":"4px",cursor:"pointer"},on:{click:t.setColumnShow}}):t._e()])],2),t._v(" "),t._l(t.tableHeadData,(function(e,s){return[e.hidden&&"false"!=e.hidden||"PARENT_ORDER_NO"==e.field||"ORDER_ITEM_NAME"==e.field?t._e():i("el-table-column",{key:s+t.activeName,class:e.PARENT_ORDER_NO,attrs:{prop:e.field,label:e.display,width:e.width,align:"center"}},["REPORT_STATUS"===e.field?i("template",{slot:"header"},[t._v("\n          "+t._s(e.display)),t.settingsBtn?i("i",{staticClass:"el-icon-setting",staticStyle:{"font-size":"13px","margin-left":"4px",cursor:"pointer"},on:{click:t.setReportConfig}}):t._e()]):t._e()],2),t._v(" "),e.hidden&&"false"!=e.hidden||"ORDER_ITEM_NAME"!=e.field?t._e():i("el-table-column",{key:s+t.activeName,class:e.PARENT_ORDER_NO,attrs:{prop:e.field,label:e.display,width:e.width,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.url?i("span",{staticClass:"have-link",on:{click:function(i){return t.openUrl(e.row.url)}}},[t._v(t._s(e.row.ORDER_ITEM_NAME))]):i("span",{staticClass:"not-link"},[t._v(t._s(e.row.ORDER_ITEM_NAME))])]}}],null,!0)}),t._v(" "),e.hidden&&"false"!=e.hidden||"PARENT_ORDER_NO"!=e.field?t._e():i("el-table-column",{key:s+t.activeName,class:e.PARENT_ORDER_NO,attrs:{prop:e.field,label:e.display,width:e.width,align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("span",{staticClass:"parent-group",class:t.row.marker})]}}],null,!0)})]})),t._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.haveConfkey(e.row)?i("span",{staticClass:"sp",on:{click:function(i){return t.handleClick(e.row)}}},[i("i",{staticClass:"el-icon-view"}),t._v("查看")]):t._e()]}}])},[i("template",{slot:"header"},[t._v("\n        操作"),t.settingsBtn?i("i",{staticClass:"el-icon-setting",staticStyle:{"font-size":"13px","margin-left":"4px",cursor:"pointer"},on:{click:t.setColumnShow}}):t._e()])],2)],2),t._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{"page-sizes":[10,20,30,40,50,100],total:t.total,background:!1,page:t.queryForm.pageNo,limit:t.queryForm.pageSize,layout:"total, sizes, prev, pager, next "},on:{"update:page":function(e){return t.$set(t.queryForm,"pageNo",e)},"update:limit":function(e){return t.$set(t.queryForm,"pageSize",e)},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,pagination:t.getTableData}}),t._v(" "),i("el-dialog",{staticClass:"confirm",attrs:{title:t.title,visible:t.open,width:"700px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(e){t.open=e}}},[i("el-checkbox-group",{on:{change:t.handleCheckedCitiesChange},model:{value:t.checkedColumn,callback:function(e){t.checkedColumn=e},expression:"checkedColumn"}},t._l(t.tableHeadData,(function(e,s){return i("el-checkbox",{key:s,attrs:{label:e.display}},[t._v(t._s(e.display))])})),1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确 定")]),t._v(" "),i("el-button",{on:{click:function(e){t.open=!1}}},[t._v("取 消")])],1)],1),t._v(" "),i("diagIndex",{ref:"diagIndex",on:{update:t.getList}}),t._v(" "),i("diagIndexColumConfig",{ref:"diagIndexColum",on:{update:t.getList}})],1)},j=[];function V(t){return Object(S["a"])({url:D["a"]["getOrderConfig"],method:"post",data:w.a.stringify(t),headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:localStorage.getItem("Authorization")}})}function G(t){return Object(S["a"])({url:D["a"]["getOrder"],method:"post",data:w.a.stringify(t),headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:localStorage.getItem("Authorization")}})}function z(t){return Object(S["a"])({url:D["a"]["getOclUrl"],method:"post",data:w.a.stringify(t),headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:localStorage.getItem("Authorization")}})}function $(t){return Object(S["a"])({url:D["a"]["getOldOclUrl"],method:"post",data:w.a.stringify(t),headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:localStorage.getItem("Authorization")}})}function H(t){return Object(S["a"])({url:D["a"]["getOrderCountForVisit"],method:"post",data:w.a.stringify(t),headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:localStorage.getItem("Authorization")}})}var Y=i("f2b4"),X=configSetting||{},W=X.oclUser,Q={components:{diagIndex:c["a"],diagIndexColumConfig:c["a"]},props:["query","areaList"],data:function(){return{queryForm:{pageNo:1,pageSize:10,oid:"",patientId:"",visitId:"",orderType:"ALL",orderStatus:"",orderProperty:"",visitTypeCode:"",orderItemName:""},total:0,title:"配置列表项",open:!1,checkedColumn:[],tableHeadData:[],orderList:[],configHeadList:{},activeName:"ALL",serachList:[{label:"全部",value:"ALL"},{label:"口服用药",value:"KF"},{label:"静脉药物",value:"JM"},{label:"其他用药",value:"QT"},{label:"检验申请",value:"LAB"},{label:"检查申请",value:"EXAM"},{label:"手术",value:"OPER"},{label:"治疗",value:"CURE"},{label:"其他医嘱",value:"OTHERS"}],natureOption:[],statusOption:[],showConfigType:"",orderNumber:{},settingsBtn:!1,oclTypeList:[],drugTypeList:[],oclUser:W}},watch:{query:{handler:function(t,e){this.query&&(this.queryForm.oid=this.query.oid,this.queryForm.patientId=this.query.patientId,this.queryForm.visitId=this.query.visitId,this.queryForm.visitTypeCode=this.query.visitTypeCode,this.getTableData(),this.getOrderCount())},deep:!0}},created:function(){var t=this;this.query&&(this.queryForm.oid=this.query.oid,this.queryForm.patientId=this.query.patientId,this.queryForm.visitId=this.query.visitId,this.queryForm.visitTypeCode=this.query.visitTypeCode),Object(Y["d"])({configCode:"ORDER_STATUS_CONFIG",oid:"ALL"}).then((function(e){if(e){var i=[];e.forEach((function(t){i.push({label:t.name,value:t.code})})),t.statusOption=i}})),Object(Y["d"])({configCode:"OCL_TYPE_COFING",oid:"ALL"}).then((function(e){e&&(t.oclTypeList=e)})),Object(Y["d"])({configCode:"DRUG_TYPE_CONFIG",oid:"ALL"}).then((function(e){e&&(t.drugTypeList=e)})),Object(Y["d"])({configCode:"ORDER_TYPE_COFING",oid:"ALL"}).then((function(e){e&&(t.natureOption=e)})),this.getTableHeaderProp(),this.getTableData(),this.getOrderCount()},mounted:function(){var t=localStorage.getItem("userRole")||"";this.settingsBtn="admin"==t},methods:{getList:function(){this.getTableHeaderProp(),this.getTableData(),this.getOrderCount()},serach:function(){this.queryForm.pageNo=1,this.getTableData()},getOrderCount:function(){var t=this;H(this.queryForm).then((function(e){t.orderNumber=e}))},getTableHeaderProp:function(){var t=this;V({oid:this.queryForm.oid}).then((function(e){t.configHeadList=e,t.activeName&&t.getConfig(t.activeName)}))},getCount:function(t){switch(t){case"ALL":return this.orderNumber.ALL;case"KF":return this.orderNumber.KF;case"JM":return this.orderNumber.JM;case"QT":return this.orderNumber.QT;case"LAB":return this.orderNumber.LAB;case"EXAM":return this.orderNumber.EXAM;case"OPER":return this.orderNumber.OPER;case"CURE":return this.orderNumber.CURE;case"OTHERS":return this.orderNumber.OTHER}},getConfig:function(t){switch(t){case"ALL":this.tableHeadData=this.configHeadList.ORDER_ALL_SHOW_CONFIG;break;case"KF":this.tableHeadData=this.configHeadList.ORDER_KF_SHOW_CONFIG;break;case"JM":this.tableHeadData=this.configHeadList.ORDER_JM_SHOW_CONFIG;break;case"QT":this.tableHeadData=this.configHeadList.ORDER_QT_SHOW_CONFIG;break;case"LAB":this.tableHeadData=this.configHeadList.ORDER_LAB_SHOW_CONFIG;break;case"EXAM":this.tableHeadData=this.configHeadList.ORDER_EXAM_SHOW_CONFIG;break;case"OPER":this.tableHeadData=this.configHeadList.ORDER_OPER_SHOW_CONFIG;break;case"CURE":this.tableHeadData=this.configHeadList.ORDER_CURE_SHOW_CONFIG;break;case"OTHERS":this.tableHeadData=this.configHeadList.ORDER_OTHER_SHOW_CONFIG}},getOrderTypeConfig:function(t){switch(t){case"ALL":return"ORDER_ALL_SHOW_CONFIG";case"KF":return"ORDER_KF_SHOW_CONFIG";case"JM":return"ORDER_JM_SHOW_CONFIG";case"QT":return"ORDER_QT_SHOW_CONFIG";case"LAB":return"ORDER_LAB_SHOW_CONFIG";case"EXAM":return"ORDER_EXAM_SHOW_CONFIG";case"OPER":return"ORDER_OPER_SHOW_CONFIG";case"CURE":return"ORDER_CURE_SHOW_CONFIG";case"OTHERS":return"ORDER_OTHER_SHOW_CONFIG"}},getConfigTypeVal:function(t){switch(t){case"KF":return"ORDER_KF_FILTER";case"JM":return"ORDER_JM_FILTER";case"QT":return"ORDER_QT_FILTER";case"LAB":return"ORDER_LAB_FILTER";case"EXAM":return"ORDER_EXAM_FILTER";case"OPER":return"ORDER_OPER_FILTER";case"CURE":return"ORDER_CURE_FILTER";case"OTHERS":return"ORDER_OTHER_FILTER"}},getConfigType:function(t){switch(t){case"KF":return"ORDER_CLASS_KF";case"JM":return"ORDER_CLASS_JM";case"QT":return"ORDER_CLASS_QT";case"LAB":return"ORDER_CLASS_LAB";case"EXAM":return"ORDER_CLASS_EXAM";case"OPER":return"ORDER_CLASS_OPER";case"CURE":return"ORDER_CLASS_CURE";case"OTHERS":return"ORDER_CLASS_OTHER"}},indexRow:function(t){return this.activeName+"|"+t.ORDER_NO+"|"+t.ORDER_TIME+"|"+t.rowKey},getTableData:function(){var t=this,e=this;G(this.queryForm).then((function(i){var s=i.result,a=[];a="JM"==t.queryForm.orderType?t.markDuplicates(s):s,e.orderList=a,e.total=i.totalCount}))},markDuplicates:function(t){var e={};t.forEach((function(t){var i=t.PARENT_ORDER_NO;e[i]?e[i]++:e[i]=1}));var i={},s=t.map((function(t){var s=JSON.parse(JSON.stringify(t)),a=s.PARENT_ORDER_NO;i[a]?i[a]++:i[a]=1;var r="single";return e[a]>1&&(r=1===i[a]?"start":i[a]===e[a]?"end":"center"),s.marker=r,s}));return s},getGroupList:function(t,e,i){var s=[];return t.forEach((function(t){var a={};a=i?{label:t[i],value:t[e]}:{label:t[e],value:t[e]};var r=s.find((function(i){return i.value==t[e]}));r||s.push(a)})),s},handleSizeChange:function(t){console.log("每页 ".concat(t," 条")),this.queryForm.pageSize=t,this.getTableData()},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.queryForm.pageNo=t,this.getTableData()},setColumnShow:function(){var t=this.getOrderTypeConfig(this.activeName),e={title:"医嘱列表项配置["+this.getTypeName()+"]",configCode:t,oid:this.query.oid,configType:"columConfig",tableData:this.tableHeadData};this.$refs.diagIndex.open(e)},setReportConfig:function(){var t="LAB"===this.activeName?"检验":"检查",e="LAB"===this.activeName?"HDR_LAB_REPORT":"HDR_EXAM_REPORT",i="LAB"===this.activeName?"LAB_REPORT_STATUS_FILTER":"EXAM_REPORT_STATUS_FILTER",s={title:t+"报告状态过滤器配置",configCode:i,oid:this.query.oid,configType:"orderReportConfig",width:"65%",areaList:this.areaList,namePlaceText:"数据表"+e+"的字段",valuePlaceText:""};this.$refs.diagIndex.open(s)},getTypeName:function(){var t=this;if(this.activeName){var e=this.serachList.find((function(e){return e.value==t.activeName}));if(e)return e.label}return""},haveConfkey:function(t){var e=this,i=this.serachList.find((function(e){return e.value===t.ORDER_TYPE}));if(!t.ORDER_PROPERTIES_NAME)return!1;if(i){var s=this.oclTypeList.find((function(s){return s.name.split("_")[0]===i.label&&(s.visitType===e.queryForm.visitTypeCode||"ALL"===s.visitType)&&(!(s.name.split("_").length>1)||t.ORDER_PROPERTIES_NAME.indexOf(s.name.split("_")[1])>-1)}));return!!s}return!1},handleClick:function(t){var e=this,i="",s=this.serachList.find((function(e){return e.value===t.ORDER_TYPE}));if(s){var a=this.oclTypeList.find((function(i){return i.name.split("_")[0]===s.label&&(i.visitType===e.queryForm.visitTypeCode||"ALL"===i.visitType)&&(!(i.name.split("_").length>1)||t.ORDER_PROPERTIES_NAME.indexOf(i.name.split("_")[1])>-1)}));i=a?a.code:""}if(i){var r="http://localhost:9432/#/sharePage?clientId=cts&clientSecret=123456&confKey=cl_key1003&oid=42661889.5&patientId=0001348752&visitId=10&visitType=02&sourcePk=6003938659";r=this.oclUser.url+"?clientId="+this.oclUser.clientId+"&clientSecret="+this.oclUser.clientSecret+"&confKey="+i+"&oid="+this.query.oid+"&patientId="+this.query.patientId+"&visitId="+this.query.visitId+"&visitType="+this.query.visitTypeCode+"&sourcePk="+t[this.oclUser.sourcePk],console.log("获取到闭环url",r);var n={title:"医嘱闭环",configType:"showIframe",url:r,width:"80%"};this.$refs.diagIndex.open(n)}else this.$message.error("未获取到confKey，请联系管理员")},openUrl:function(t){if(t){var e={title:"deepseek处方点评",configType:"showIframe",url:t,width:"80%"};this.$refs.diagIndex.open(e)}},handleCheckedCitiesChange:function(){},confirm:function(){if(0!==this.checkedColumn.length){var t=this;this.tableHeadData.forEach((function(e){var i=t.checkedColumn.find((function(t){return t===e.display}));e.hidden=!i}));var e=JSON.stringify(this.tableHeadData),i={oid:this.query.oid,configCode:this.getOrderTypeConfig(this.activeName),configValue:e};Object(Y["f"])(i).then((function(e){t.getList()})),this.open=!1}else this.$message.error("至少选择一项")},setQuery:function(t){this.activeName=t,"ALL"!==this.activeName&&"KF"!==this.activeName&&"JM"!==this.activeName&&"QT"!==this.activeName&&(this.queryForm.drugProperty=""),this.activeName&&(this.queryForm.pageNo=1,this.queryForm.orderType=this.activeName,this.getConfig(this.activeName),this.getTableData())},openConfig:function(){var t=this.getConfigTypeVal(this.activeName),e=this.getConfigType(this.activeName),i={title:"医嘱相关配置["+this.getTypeName()+"]",configCode:t,configCodeType:e,oid:this.query.oid,configType:"orderform",visitTypeCode:this.query.visitTypeCode,areaList:this.areaList,width:"65%",namePlaceText:"填写ORDER_CLASS_CODE,多个值之间用英文逗号分隔",valuePlaceText:"填写PHARMACY_WAY_CODE,多个值之间用英文逗号分"};this.$refs.diagIndex.open(i)},cellTableData:function(t){var e=t.row,i=t.column;t.rowIndex,t.columnIndex;if("JM"==this.queryForm.orderType&&"PARENT_ORDER_NO"==i.property&&(e.PARENT_ORDER_NO="","undefined"!=e.group))return e.group},objectSpanMethod:function(t){t.row,t.column,t.rowIndex,t.columnIndex}}},J=Q,K=(i("fa85"),i("d139"),i("2c04"),Object(p["a"])(J,B,j,!1,null,"ad6f39a8",null)),Z=K.exports,tt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"resize",rawName:"v-resize",value:t.handleResize,expression:"handleResize"},{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"lis-report"},[i("div",{ref:"checkTypes",staticClass:"check-type"},t._l(t.typeList,(function(e,s){return i("div",{key:s,ref:"selTypeRout",refInFor:!0,staticClass:"sel-type"},[i("div",{staticClass:"check-all"},[i("span",{staticClass:"tit"},[t._v(t._s(e.title))]),i("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:function(i){return t.checkAllRoutChange(e)}},model:{value:e.checkedRoutAll,callback:function(i){t.$set(e,"checkedRoutAll",i)},expression:"titem.checkedRoutAll"}},[t._v("全选")])],1),t._v(" "),i("div",{staticClass:"line"}),t._v(" "),i("div",{staticClass:"check-list"},[i("el-checkbox-group",{on:{change:function(i){return t.handleCheckedRoutChange(e)}},model:{value:e.checkedRoutType,callback:function(i){t.$set(e,"checkedRoutType",i)},expression:"titem.checkedRoutType"}},t._l(e.children,(function(e,s){return i("el-checkbox",{key:s,attrs:{label:e.code}},[t._v(t._s(e.label))])})),1)],1),t._v(" "),i("div",{staticClass:"setting"},[t.settingsBtn?i("i",{staticClass:"el-icon-setting sett",on:{click:function(e){return t.openGroupConfig()}}}):t._e()])])})),0),t._v(" "),i("div",{ref:"conts",staticClass:"report-cont"},[i("div",{staticClass:"lis-left"},[i("div",{staticClass:"show-icon",class:t.showStat?"curr":"",attrs:{title:"查看统计"},on:{click:t.showStatFun}},[i("span"),t._v(" "),i("span"),t._v(" "),i("span"),t._v(" "),i("span")]),t._v(" "),t.showStat?i("div",{staticClass:"lis-chart"},[i("sunLisModualChart",{attrs:{chartData:t.orderItemList},on:{lisChartClickEmit:t.lisChartClickEmit}})],1):t._e(),t._v(" "),i("div",{staticClass:"top"},[i("div",{staticClass:"sel topinfo"},[i("el-select",{attrs:{placeholder:"请选择"},on:{change:t.selectType},model:{value:t.queryParam.reportType,callback:function(e){t.$set(t.queryParam,"reportType",e)},expression:"queryParam.reportType"}},t._l(t.options,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),i("div",{staticClass:"inp topinfo"},["检验名称"==t.queryParam.reportType?i("el-input",{attrs:{clearable:"",placeholder:"关键字"},on:{change:t.serach},model:{value:t.labItemName,callback:function(e){t.labItemName=e},expression:"labItemName"}}):t._e(),t._v(" "),"检验细项"==t.queryParam.reportType?i("el-input",{attrs:{clearable:"",placeholder:"关键字"},on:{change:t.serach},model:{value:t.labSubItemName,callback:function(e){t.labSubItemName=e},expression:"labSubItemName"}}):t._e()],1)]),t._v(" "),i("div",{staticClass:"bottom",style:t.showStat?"height:calc(100% - 275px)":""},[t._l(t.orderItemList,(function(e,s){return i("div",{key:s,class:"item-list"+(e.REPORT_NO==t.currItem?" curr":""),on:{click:function(i){return t.setItem(e)}}},[i("div",{staticClass:"name"},[i("div",{class:"label"+(e.REPORT_NO==t.currItem?" curr":""),attrs:{title:e.LAB_ITEM_NAME}},[t._v("\n              "+t._s(e.LAB_ITEM_NAME)+"\n            ")]),t._v(" "),e.HH+e.LL+e.high+e.low!=0?i("div",{staticClass:"ins"},[Number(e.HH||0)+Number(e.high||0)!=0?i("span",{staticClass:"rase"},[i("label",{staticClass:"hh"},[t._v(t._s(Number(e.HH)+Number(e.high)))])]):t._e(),t._v(" "),Number(e.LL||0)+Number(e.low||0)!=0?i("span",{staticClass:"fall",class:t.arrowThemeColor},[i("label",{staticClass:"ll",class:t.arrowThemeColor},[t._v(t._s(Number(e.LL)+Number(e.low)))])]):t._e(),t._v(" "),0!=(Number.P||0)?i("span",{staticClass:"P"},[i("label",[t._v(t._s(e.P))])]):t._e()]):t._e()]),t._v(" "),i("div",{staticClass:"time",class:e.REPORT_NO==t.currItem?" curr":""},[t._v("\n            "+t._s(e.REPORT_TIME)+"\n            "),Number(e.HH||0)>0||Number(e.LL||0)>0?i("span",{staticClass:"tags"},[t._v("\n              危\n            ")]):t._e()])])})),t._v(" "),0==t.orderItemList.length?i("div",{staticClass:"empty"},[t._v("暂无数据")]):t._e()],2)]),t._v(" "),i("div",{staticClass:"lis-right"},[i("div",{staticClass:"nav-cont"},[t._l(t.reportTabs,(function(e,s){return i("div",{key:s,class:"tab-page "+(t.reportTabActiveCode==e.code?"current":"none"),on:{click:function(i){return t.reportTabClick(e)}}},[i("div",{staticClass:"tits"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"line-s"})])})),t._v(" "),i("div",{staticClass:"setting"},[t.settingsBtn?i("i",{staticClass:"el-icon-setting sett",on:{click:t.openConfig}}):t._e()])],2),t._v(" "),"reportDetail"==t.reportTabActiveCode?i("div",{staticClass:"detail"},[t._m(0),t._v(" "),t.orderItemList.length>0?i("div",{staticClass:"report-info"},[i("div",{staticClass:"item"},[i("div",{staticClass:"tit"},[i("svg-icon",{attrs:{"icon-class":"projectStatus"}}),t._v("检验类别\n            ")],1),t._v(" "),i("div",{staticClass:"val"},[t._v(t._s(t.reportInfo.LAB_TYPE_NAME))])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tit"},[i("svg-icon",{attrs:{"icon-class":"projectStatus"}}),t._v("检验项目\n            ")],1),t._v(" "),i("div",{staticClass:"val item_name",attrs:{title:t.reportInfo.LAB_ITEM_NAME}},[t._v("\n              "+t._s(t.reportInfo.LAB_ITEM_NAME)+"\n            ")])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tit"},[i("svg-icon",{attrs:{"icon-class":"projectStatus"}}),t._v("样本编号\n            ")],1),t._v(" "),i("div",{staticClass:"val"},[t._v(t._s(t.reportInfo.SAMPLE_NO))])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tit"},[i("svg-icon",{attrs:{"icon-class":"projectStatus"}}),t._v("样本类型\n            ")],1),t._v(" "),i("div",{staticClass:"val"},[t._v(t._s(t.reportInfo.SPECIMAN_TYPE_NAME))])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tit"},[i("svg-icon",{attrs:{"icon-class":"projectStatus"}}),t._v("采样时间\n            ")],1),t._v(" "),i("div",{staticClass:"val"},[t._v(t._s(t.reportInfo.SAMPLE_TIME))])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tit"},[i("svg-icon",{attrs:{"icon-class":"projectStatus"}}),t._v("申请单号\n            ")],1),t._v(" "),i("div",{staticClass:"val"},[t._v(t._s(t.reportInfo.APPLY_NO))])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tit"},[i("svg-icon",{attrs:{"icon-class":"projectStatus"}}),t._v("申请医生\n            ")],1),t._v(" "),i("div",{staticClass:"val"},[t._v(t._s(t.reportInfo.APPLY_DOCTOR_NAME))])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tit"},[i("svg-icon",{attrs:{"icon-class":"projectStatus"}}),t._v("申请科室\n            ")],1),t._v(" "),i("div",{staticClass:"val"},[t._v(t._s(t.reportInfo.APPLY_DEPT_NAME))])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tit"},[i("svg-icon",{attrs:{"icon-class":"projectStatus"}}),t._v("申请时间\n            ")],1),t._v(" "),i("div",{staticClass:"val"},[t._v(t._s(t.reportInfo.APPLY_TIME))])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tit"},[i("svg-icon",{attrs:{"icon-class":"projectStatus"}}),t._v("报告单号\n            ")],1),t._v(" "),i("div",{staticClass:"val"},[t._v(t._s(t.reportInfo.REPORT_NO))])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tit"},[i("svg-icon",{attrs:{"icon-class":"projectStatus"}}),t._v("报告时间\n            ")],1),t._v(" "),i("div",{staticClass:"val"},[t._v(t._s(t.reportInfo.REPORT_TIME))])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tit"},[i("svg-icon",{attrs:{"icon-class":"projectStatus"}}),t._v("生理周期\n            ")],1),t._v(" "),i("div",{staticClass:"val"},[t._v(t._s(t.reportInfo.PHYSICYCLE))])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tit"},[i("svg-icon",{attrs:{"icon-class":"projectStatus"}}),i("span",{staticStyle:{"letter-spacing":"28px"}},[t._v("备")]),t._v("注\n            ")],1),t._v(" "),i("div",{staticClass:"val"},[t._v(t._s(t.reportInfo.NOTE))])])]):t._e(),t._v(" "),t.orderItemList.length>0?i("div",[i("div",{staticClass:"sub-tit"},[i("div",{staticClass:"tit"},[t._v("检验结果")]),t._v(" "),i("div",{staticClass:"line"},[i("el-checkbox",{on:{change:t.checkResultForeException},model:{value:t.queryItem.showFlag,callback:function(e){t.$set(t.queryItem,"showFlag",e)},expression:"queryItem.showFlag"}},[t._v("只显示异常结果")])],1),t._v(" "),i("div",{staticClass:"rbt"},[i("span",{on:{click:t.showDiagFun}},[i("i",{class:t.showDiag?"el-icon-d-arrow-left":"el-icon-d-arrow-right"})])])]),t._v(" "),t.showDiag?i("div",{staticClass:"patient-table"},[i("el-table",{attrs:{data:t.resultList,stripe:""}},[i("el-table-column",{attrs:{type:"index",label:"序号",width:"65",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{id:"circle"+e.$index}}),t._v(" "),i("span",[t._v(t._s(e.$index+1))])]}}],null,!1,2044483997)}),t._v(" "),t._l(t.detailHeadList,(function(e,s){return["SHOW_LINE"!=e.code&&"LAB_RESULT_VALUE"!==e.code&&"LAB_QUAL_RESULT"!==e.code?i("el-table-column",{key:s,class:e.PARENT_ORDER_NO,attrs:{prop:e.code,label:e.name,align:"center"}}):t._e(),t._v(" "),"LAB_RESULT_VALUE"===e.code?i("el-table-column",{key:s,class:e.PARENT_ORDER_NO,attrs:{prop:e.code,label:e.name,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.LAB_RESULT_VALUE)+"\n                    "),e.row.LAB_RESULT_VALUE?i("span",{class:"sptag "+e.row.STATUS+" "+t.arrowThemeColor}):t._e(),t._v(" "),!e.row.LAB_RESULT_VALUE||"HH"!==e.row.STATUS&&"LL"!==e.row.STATUS?t._e():i("span",{class:"sptag "+e.row.STATUS+" "+t.arrowThemeColor})]}}],null,!0)}):t._e(),t._v(" "),"LAB_QUAL_RESULT"===e.code?i("el-table-column",{key:s,class:e.PARENT_ORDER_NO,attrs:{prop:e.code,label:e.name,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{class:"spval-"+e.row.STATUS},[t._v(t._s(e.row.LAB_QUAL_RESULT))]),t._v(" "),e.row.LAB_QUAL_RESULT?i("span",{class:"sptag "+e.row.STATUS+" "+t.arrowThemeColor}):t._e(),t._v(" "),!e.row.LAB_QUAL_RESULT||"HH"!==e.row.STATUS&&"LL"!==e.row.STATUS?t._e():i("span",{class:"sptag "+e.row.STATUS+" "+t.arrowThemeColor})]}}],null,!0)}):t._e()]})),t._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.SHOW_LINE?i("span",{staticStyle:{cursor:"pointer",color:"#4606b9","font-size":"13px"},on:{click:function(i){return t.openchart(e.row)}}},[t._v("趋势图")]):t._e()]}}],null,!1,2227382587)})],2)],1):t._e()]):t._e()]):i("div",{staticStyle:{position:"relative"}},["iframe"==t.reportTabData.linkType?i("div",{staticClass:"report-iframe-container",attrs:{id:"tab-container-other"}},[i("iframeComp",{attrs:{src:t.reportTabData.url?t.reportTabData.url:""}})],1):t._e(),t._v(" "),"iframe"==t.reportTabData.linkType?i("div",{staticClass:"emr-srceen-full-btn"},[i("screen-full",{attrs:{id:"tab-container-other"}})],1):t._e()])])]),t._v(" "),i("diagComp",{ref:"diagComp"}),t._v(" "),i("diagIndex",{ref:"diagIndex",on:{update:function(e){return t.getResultList(t.currItem)}}})],1)},et=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"titles"},[t._v("\n          检验报告\n          "),i("div",{staticClass:"bline"})])}],it=i("0b2a"),st=i("182b"),at=i("061b"),rt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chart",staticStyle:{height:"100%",width:"100%"},attrs:{id:"sunLisModualChart"}})},nt=[],ot=[{parentColor:"#f5c7a9",subColorList:["#f5c7a980","#f5c7a980","#f5c7a980","#f5c7a980","#f5c7a980"]},{parentColor:"#673AB7",subColorList:["#673AB780","#673AB780","#673AB780","#673AB780","#673AB780"]},{parentColor:"#5AD8C1",subColorList:["#5AD8C180","#5AD8C180","#5AD8C180","#5AD8C180","#5AD8C180"]}],lt={props:["chartData"],data:function(){return{chart:null,itemData:[]}},mounted:function(){if(this.chartData){var t=this;this.$nextTick((function(){t.initChartData()}))}},computed:{groupedItems:function(){var t=this.chartData.reduce((function(t,e){e.name;var i=e.LAB_TYPE_NAME;return t[i]=t[i]||{name:i,groupName:e["LAB_GROUP"],value:0},t[i].value+=1,t}),{});return t},groupedItemsByGroup:function(){var t=this.chartData.reduce((function(t,e){e.name;var i=e.LAB_GROUP;return t[i]=t[i]||{name:i,value:0},t[i].value+=1,t}),{});return t}},watch:{chartData:{handler:function(t,e){this.initChartData()},deep:!0}},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChartData:function(){for(var t=Object.values(this.groupedItems),e=Object.values(this.groupedItemsByGroup),i=[],s=0;s<e.length;s++){for(var a={name:e[s].name},r=[],n=0;n<t.length;n++)e[s].name===t[n].groupName&&r.push(t[n]);a.children=r,i.push(a)}this.getChartData(i)},getChartData:function(t){for(var e=0;e<t.length;e++){var i=t[e],s=ot[e%4];if(i.itemStyle={color:s.parentColor},i.children&&i.children.length>0)for(var a=0;a<i.children.length;a++)i.children[a].itemStyle={color:s.subColorList[a%5]}}this.itemData=t,this.initChart()},initChart:function(){this.chart&&(this.chart.dispose(),this.chart=null),this.chart=this.$echarts.init(document.getElementById("sunLisModualChart"));this.chart.setOption({tooltip:{},series:{type:"sunburst",data:this.itemData,radius:[0,"75%"],startAngle:210,label:{rotate:"radial",fontSize:11,formatter:function(t){var e=t.name;return e.length>8&&(e=e.substring(0,8)+"..."),e}},levels:[{},{r0:"2%",r:"55%",label:{color:"#fff"}},{r0:"55%",r:"75%",label:{color:"#333",position:"outside",formatter:function(t){var e="",i=t.name.length,s=6,a=Math.ceil(i/s);if(i>s)for(var r=0;r<a;r++){var n="",o=r*s,l=o+s;n=r===a-1?t.name.substring(o,i):t.name.substring(o,l)+"\n",e+=n}else e=t.name;return e}}}]}})}}},ct=lt,dt=Object(p["a"])(ct,rt,nt,!1,null,null,null),ht=dt.exports,ut=i("d241"),vt=configSetting||{},pt=vt.arrowThemeColor||"",_t={components:{diagComp:st["a"],iframeComp:at["a"],sunLisModualChart:ht,diagIndex:c["a"],screenFull:ut["a"]},props:["query","nowIds"],data:function(){return{options:[{label:"检验名称",value:"检验名称"},{label:"检验细项",value:"检验细项"}],queryParam:{reportType:"检验名称"},labItemName:"",labSubItemName:"",queryItem:{show:"",showFlag:!1},allLabList:[],orderItemList:[],currItem:"",reportInfo:[],showDiag:!0,showAbnormal:!1,resultList:[],reportTabActiveCode:"reportDetail",reportTabData:{},reportTabs:[{name:"报告详情",code:"reportDetail"}],ids:"",checkedRoutAll:!0,checkedMicrAll:!0,checkedRoutType:[],checkedMicrType:[],RoutList:[],MicrList:[],isIndeterminate:!0,isIndeterminate1:!0,showStat:!1,detailHeadList:[],detailTableList:[],settingsBtn:!1,typeList:[],loading:!0,LAB_GROUP:"",arrowThemeColor:pt}},watch:{query:{handler:function(t,e){this.query&&(this.queryParam.oid=this.query.oid,this.ids=this.query.ids,this.queryParam.patientId=this.query.patientId,this.queryParam.visitId=this.query.visitId,this.queryParam.visitTypeCode=this.query.visitTypeCode,this.getItemList(),this.initLabTypeList())},deep:!0}},created:function(){this.query&&(this.queryParam.oid=this.query.oid,this.ids=this.query.ids,this.queryParam.patientId=this.query.patientId,this.queryParam.visitId=this.query.visitId,this.queryParam.visitTypeCode=this.query.visitTypeCode),this.getItemList(),this.initLabTypeList()},mounted:function(){var t=localStorage.getItem("userRole")||"";this.settingsBtn="admin"==t;var e=this;e.$nextTick((function(){e.resizeEle()}))},methods:{serach:function(){this.getItemList()},openConfig:function(){var t={title:"检验报告模块配置",configCode:"LAB_DETAIL_MOUNT_PLUGIN_MANAGE_CONFIG",oid:this.query.oid,configType:"labModuleConfig",visitTypeCode:this.visitType,width:"65%"};this.$refs.diagIndex.open(t)},openGroupConfig:function(){var t={title:"检验报告分组配置",configCode:"LAB_REPORT_GROUP_CONFIG",oid:this.query.oid,configType:"reportGroupConfig",width:"700px"};this.$refs.diagIndex.open(t)},handleResize:function(t){t.width;var e=t.height;if(e){var i=this;i.$nextTick((function(){i.resizeEle()}))}},checkResultForeException:function(){this.getResultList(this.currItem)},resizeEle:function(){var t;if(this.$refs.checkTypes){var e=this.$refs.checkTypes;t=e.clientHeight+10}else t=0;var i=t,s=this.$refs.conts;s.style.height="calc(100% - "+i+"px)"},openchart:function(t){var e={chartId:"chart"+t.LAB_SUB_ITEM_CODE,title:"趋势图",titleObj:{label:"检验项目",value:t.LAB_SUB_ITEM_NAME},customDateSerach:!0,dateType:"3",ids:this.nowIds,subItemCode:t.LAB_SUB_ITEM_CODE};this.$refs.diagComp.open(e)},getItemList:function(){var t=this;this.queryParam.labSubItemName=this.labSubItemName,this.queryParam.labItemName=this.labItemName,Object(it["c"])(this.queryParam).then((function(e){e&&(t.allLabList=e,t.orderItemList=e,t.orderItemList.length>0&&(t.currItem=t.orderItemList[0].REPORT_NO,t.LAB_GROUP=t.orderItemList[0].LAB_GROUP,t.getResultList(t.currItem)))}))},initLabTypeList:function(){var t=this,e={oid:this.query.oid,patientId:this.query.patientId,visitId:this.query.visitId,visitTypeCode:this.query.visitTypeCode};Object(it["e"])(e).then((function(e){var i=e,s=[];for(var a in i)if(i.hasOwnProperty(a)){var r={title:a,isIndeterminate:!1,checkedRoutAll:!0,checkedRoutType:[]},n=[],o=[];for(var l in i[a])i[a].hasOwnProperty(l)&&(n.push({label:i[a][l],code:l}),o.push(l));r.children=n,r.checkedRoutType=o,s.push(r)}t.typeList=s,console.log("typeList",t.typeList)}))},initTypeList:function(){if(this.orderItemList.length>0){var t=this.orderItemList.filter((function(t){return"常规"==t.LAB_GROUP})),e=this.orderItemList.filter((function(t){return"微生物"==t.LAB_GROUP}));this.RoutList=this.getGroupList(t,"LAB_TYPE_NAME"),this.MicrList=this.getGroupList(e,"LAB_TYPE_NAME"),this.checkAllMicrChange(2),this.checkAllRoutChange(2)}},getResultList:function(t){var e=this;this.queryItem.oid=this.query.oid,this.queryItem.patientId=this.query.patientId,this.queryItem.reportNo=t,this.queryItem.visitTypeCode=this.query.visitTypeCode,this.queryItem.visitId=this.query.visitId,this.queryItem.visitId=this.query.visitId,this.queryItem.labGroup=this.LAB_GROUP,this.queryItem.showFlag?this.queryItem.show="abnormal":this.queryItem.show="",this.reportTabActiveCode="reportDetail",this.loading=!0,Object(it["a"])(this.queryItem).then((function(t){if(t){e.reportInfo=t.lab,e.resultList=t.items,e.detailHeadList=t.head;var i=t.urls||[];if(i.length>0){var s=new Array;i.forEach((function(t){s.push({name:t.name,code:t.name,linkType:t.linkType,url:t.url})})),e.reportTabs=[{name:"报告详情",code:"reportDetail"}].concat(s)}else e.reportTabs=[{name:"报告详情",code:"reportDetail"}]}e.loading=!1})).catch((function(){e.loading=!1}))},setItem:function(t){this.currItem=t.REPORT_NO,this.LAB_GROUP=t.LAB_GROUP,this.getResultList(this.currItem)},showDiagFun:function(){this.showDiag=!this.showDiag},setQuery:function(t){var e=this;this.activeName=t,this.orderItemList=this.allLabList.filter((function(t){return t.LAB_GROUP==e.activeName})),this.orderItemList.length>0&&(this.currItem=this.orderItemList[0].REPORT_NO,this.getResultList(this.currItem))},reportTabClick:function(t){this.reportTabActiveCode=t.code,this.reportTabData=t,"reportDetail"==this.activeName?this.reportTabData={}:(this.reportTabData=t,this.civOpenNewUrl(t,"tab-container-other"))},civOpenNewUrl:function(t,e){var i=t.linkType||"";i=i.toLowerCase();var s=t.url||"";-1==s.indexOf("http:/")&&(s="http://"+s),"iframe"==i||"open_page"==i&&window.open(s)},checkAllRoutChange:function(t){if(t.checkedRoutAll){var e=[];t.children.forEach((function(t){e.push(t.code)})),t.checkedRoutType=e}else t.checkedRoutType=[];t.isIndeterminate=!1,this.getFilterList()},checkAllMicrChange:function(t){if(t=t||1,this.checkedMicrAll){var e=[];this.MicrList.forEach((function(t){e.push(t.value)})),this.checkedMicrType=e}else this.checkedMicrType=[];this.isIndeterminate1=!1,2!=t&&this.getFilterList()},handleCheckedRoutChange:function(t){var e=t.checkedRoutType.length;t.checkedRoutAll=e===t.children.length,t.isIndeterminate=e>0&&e<t.children.length,this.getFilterList()},handleCheckedMicrChange:function(t){var e=t.length;this.checkedMicrAll=e===this.MicrList.length,this.isIndeterminate1=e>0&&e<this.MicrList.length,this.getFilterList()},getFilterList:function(){this.queryParam.labTypeCode="";for(var t="",e=0;e<this.typeList.length;e++)t+=this.typeList[e].checkedRoutType.map((function(t){return t})).join(","),e<this.typeList.length-1&&t&&(t+=",");t?(this.queryParam.labTypeCode=t,this.getItemList()):this.orderItemList=[]},selectType:function(){this.labItemName="",this.labSubItemName=""},getGroupList:function(t,e,i){var s=[];return t.forEach((function(t){var a={};a=i?{label:t[i],value:t[e]}:{label:t[e],value:t[e]};var r=s.find((function(i){return i.value==t[e]}));r||s.push(a)})),s},showStatFun:function(){this.showStat=!this.showStat},lisChartClickEmit:function(t){var e=t.name;if(0==t.componentIndex){var i=t.name;"常规"==i?(this.checkedRoutAll=!0,this.checkedMicrAll=!1,this.checkAllRoutChange(2),this.checkAllMicrChange(!1)):"微生物"==i&&(this.checkedRoutAll=!1,this.checkedMicrAll=!0,this.checkAllRoutChange(!1),this.checkAllMicrChange(2))}else if(1==t.componentIndex){var s=t.data.groupName;"常规"==s?(this.checkedRoutType=[e],this.checkedMicrType=[],this.handleCheckedRoutChange([e]),this.handleCheckedMicrChange([])):"微生物"==s&&(this.checkedRoutType=[],this.checkedMicrType=[e],this.handleCheckedRoutChange([]),this.handleCheckedMicrChange([e]))}}}},ft=_t,mt=(i("906b"),i("929f"),Object(p["a"])(ft,tt,et,!1,null,"4e5c1ccc",null)),yt=mt.exports,Ct=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"operate"},[i("div",{staticClass:"cont-oper"},[i("div",{staticClass:"oper-left"},[i("div",{staticClass:"bottom"},[t._l(t.operaList,(function(e,s){return i("div",{key:s,class:"item-list"+(e.OPER_NO==t.currOperNo?" curr":""),on:{click:function(i){return t.setItem(e)}}},[i("div",{staticClass:"name"},[i("div",{class:"label"+(e.OPER_NO==t.currOperNo?" curr":"")},[t._v("\n              "+t._s(e.OPERATION_NAME)+"\n            ")]),t._v(" "),i("div",{staticClass:"ins"})]),t._v(" "),i("div",{staticClass:"time"},[t._v(t._s(e.OPER_START_TIME))])])})),t._v(" "),0==t.operaList.length?i("div",{staticClass:"empty"},[t._v("暂无数据")]):t._e()],2)]),t._v(" "),t.operaList.length>0?i("div",{staticClass:"oper-right"},[i("div",{staticClass:"nav-cont"},t._l(t.moudleList,(function(e,s){return i("div",{key:s,class:"tab-page "+(t.activeName==e.value?"current":"none"),on:{click:function(i){return t.setQuery(e.value)}}},[i("div",{staticClass:"tits"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"line-s"})])})),0),t._v(" "),"operate"==t.activeName?i("div",{staticClass:"opera-info"},[i("div",{staticClass:"sub-tit"},[i("div",{staticClass:"tit"},[t._v("术前")]),t._v(" "),i("div",{staticClass:"line"}),t._v(" "),i("div",{staticClass:"rbt"},[i("span",{on:{click:t.showOperatePreFun}},[i("i",{class:t.showOperatePre?"el-icon-d-arrow-left":"el-icon-d-arrow-right"})])])]),t._v(" "),t.showOperatePre?i("div",{staticClass:"patient-table"},[i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("手术名称")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operatePreForm.OPERATION_NAME)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("编号")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operatePreForm.OPER_NO)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("手术时间")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateProcess.OPER_START_TIME)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("术前主要诊断")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operatePreForm.DIAG_BEFORE_OPERATION_NAME)+"\n            ")])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("血压")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operatePreForm.PRE_OPER_BP_VALUE)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("心率")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operatePreForm.PRE_OPER_HR_VALUE)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("呼吸")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operatePreForm.PRE_OPER_R_VALUE)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("体温")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operatePreForm.PRE_OPER_T_VALUE)+"\n            ")])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("体重")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont conts"},[t._v("\n              "+t._s(t.operatePreForm.PRE_OPER_WT_VALUE)+"\n            ")])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("血常规")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operatePreForm.PRE_OPER_BLOOD)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("尿常规")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operatePreForm.PRE_OPER_URINE)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("肾功能")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operatePreForm.PRE_OPER_KIDNEY)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("凝血II号")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operatePreForm.PRE_OPER_SOLID)+"\n            ")])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("电解质")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont conts"},[t._v("\n              "+t._s(t.dealEmpty(t.operatePreForm.PRE_OPER_ELEC))+"\n            ")])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("术前八项")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont conts"},[t._v("\n              "+t._s(t.dealEmpty(t.operatePreForm.PRE_OPER_HB))+"\n            ")])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("肝功能")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont conts"},[t._v("\n              "+t._s(t.operatePreForm.PRE_OPER_LIVER)+"\n            ")])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("过敏史")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont cont2"},[t._v("\n              "+t._s(t.operatePreForm.PRE_OPER_ALLERGY)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("心功能")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont cont2"},[t._v("\n              "+t._s(t.operatePreForm.PRE_OPER_HEART)+"\n            ")])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("肺功能")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont cont2"},[t._v("\n              "+t._s(t.operatePreForm.PRE_OPER_LUNGS)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("心电图")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont cont2"},[t._v("\n              "+t._s(t.operatePreForm.PRE_OPER_ECG)+"\n            ")])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("其他特殊检查")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont cont2"},[t._v("\n              "+t._s(t.dealEmpty(t.operatePreForm.PRE_OPER_OTHER_EXAM))+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("其他检验")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont cont2"},[t._v("\n              "+t._s(t.dealEmpty(t.operatePreForm.PRE_OPER_OTHER_LAB))+"\n            ")])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("麻醉评估计划")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont conts"},[t._v("\n              "+t._s(t.operatePreForm.PRE_OPER_ASSESS)+"\n            ")])])]):t._e(),t._v(" "),i("div",{staticClass:"sub-tit"},[i("div",{staticClass:"tit"},[t._v("术中")]),t._v(" "),i("div",{staticClass:"line"}),t._v(" "),i("div",{staticClass:"rbt"},[i("span",{on:{click:t.showOperateInFun}},[i("i",{class:t.showOperateIn?"el-icon-d-arrow-left":"el-icon-d-arrow-right"})])])]),t._v(" "),t.showOperateIn?i("div",{staticClass:"patient-table"},[i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("手术操作")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateProcess.OPERATION_NAME)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("手术序号")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateProcess.OPER_NO)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("手术级别")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateProcess.OPERATION_GRADE_NAME)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("手术室")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateProcess.OPER_ROOM_NAME)+"\n            ")])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("手术间")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateProcess.OPER_ROOM_NO)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("手术医师")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateProcess.SURGEN_NAME)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("第一手术助手")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateProcess.FIRST_ASSISTANT_NAME)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("第二手术助手")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateProcess.SECOND_ASSISTANT_NAME)+"\n            ")])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("器械护士")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateProcess.INSTRUMENT_NURSE_NAME)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("巡回护士")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateProcess.CIRCUIT_NURSE_NAME)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("麻醉医生")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateProcess.ANESTHESIA_DOCTOR_NAME)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("麻醉助手")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateProcess.ANESTHESIOLOGIST_ASSISTANT_NAME)+"\n            ")])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("手术体位")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateProcess.SURGICAL_POSITION_NAME)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("手术部位")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateProcess.SURGERY_SITE_NAME)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("切口等级")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateProcess.WOUND_LEVEL_NAME)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("麻醉方式")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateProcess.ANESTHESIA_METHOD_NAME)+"\n            ")])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("引流部位")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateProcess.DRAINAGE_SITE_NAME)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("术中出血")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateProcess.BLEEDING_AMOUNT_VALUE)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("术中输血")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateProcess.BLOOD_TRANSFUSION_AMOUNT_VALUE)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("输血类型")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateProcess.BLOOD_TRANSFUSION_TYPE_NAME)+"\n            ")])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("出手术室时间")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateProcess.OUT_OPER_DEPT_TIME)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("手术状态")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateProcess.OPER_STATUS_NAME)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("手术开始时间")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateProcess.OPER_START_TIME)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("麻醉剂")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateProcess.NARCOTIC_DRUG_NAME)+"\n            ")])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("ASA分级")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateProcess.ASA_GRADE_CODE)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("麻醉时间")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateProcess.ANESTHESIA_START_TIME)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"}),t._v(" "),i("div",{staticClass:"cell-body cell-cont"}),t._v(" "),i("div",{staticClass:"cell-body cell-title"}),t._v(" "),i("div",{staticClass:"cell-body cell-cont"})])]):t._e(),t._v(" "),t.showOperateIn?i("div",{staticClass:"patient-table"},[i("div",{staticClass:"dtable"},[t._m(0),t._v(" "),t._l(t.drugList,(function(e,s){return i("div",{key:s+"op",class:"row-body rows r"+s%2},[i("div",{staticClass:"cell cell-body ch0"},[t._v(t._s(s+1))]),t._v(" "),i("div",{staticClass:"cell cell-body opcell1"},[t._v(t._s(e.DRUG_NAME))]),t._v(" "),i("div",{staticClass:"cell cell-body opcell0"},[t._v("\n                "+t._s(e.DOSAGE_VALUE)+" "+t._s(e.DOSAGE_UNIT)+"\n              ")]),t._v(" "),i("div",{staticClass:"cell cell-body opcell0"},[t._v("\n                "+t._s(e.AMOUNT_VALUE)+" "+t._s(e.AMOUNT_UNIT)+"\n              ")]),t._v(" "),i("div",{staticClass:"cell cell-body opcell0"},[t._v("\n                "+t._s(e.PHARMACY_START_TIME)+"\n              ")]),t._v(" "),i("div",{staticClass:"cell cell-body opcell0"},[t._v("\n                "+t._s(e.PHARMACY_STOP_TIME)+"\n              ")]),t._v(" "),i("div",{staticClass:"cell cell-body opcell0"},[t._v("\n                "+t._s(e.PHARMACY_WAY_NAME)+"\n              ")])])}))],2)]):t._e(),t._v(" "),i("div",{staticClass:"sub-tit"},[i("div",{staticClass:"tit"},[t._v("术后")]),t._v(" "),i("div",{staticClass:"line"}),t._v(" "),i("div",{staticClass:"rbt"},[i("span",{on:{click:t.showOperateAfterFun}},[i("i",{class:t.showOperateAfter?"el-icon-d-arrow-left":"el-icon-d-arrow-right"})])])]),t._v(" "),t.showOperateAfter?i("div",{staticClass:"patient-table"},[i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("入恢复室时间")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateRecory.IN_RECOVERY_ROOM_TIME)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("出恢复室时间")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateRecory.OUT_RECOVERY_ROOM_TIME)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("麻醉复苏医师")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateRecory.ANESTHESIA_RECOVERY_DOCTOR_NAME)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("麻醉复苏护士")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateRecory.ANESTHESIA_RECOVERY_NURSE_NAME)+"\n            ")])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("PACU尿量")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateRecory.PACU_URINE_VOLUME_VALUE)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("PACU液体总量")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateRecory.PACU_TRSFU_AMOUNT_VALUE)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("PACU引流量")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateRecory.PACU_DRAINAGE_VOLUME_VALUE)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("苏醒评分")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateRecory.RECOVERY_SCORE)+"\n            ")])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("伤口观察")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateRecory.IN_OPER_WOUND_OBV)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("胃管")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateRecory.IN_OPER_STOMACH)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("外周静脉")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateRecory.IN_OPER_PB_VALUE)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("中心静脉")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateRecory.IN_OPER_CV_VALUE)+"\n            ")])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("输液量")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateRecory.INFUSION_TRSFU_AMOUNT_VALUE)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("入室意识")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateRecory.IN_OPER_DISABILITY)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("入室体位")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateRecory.IN_OPER_POSITION)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("出室吸氧条件")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateRecory.OUT_OPER_O2_VALUE)+"\n            ")])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("出室血氧饱和度")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateRecory.OUT_OPER_SP02)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("疼痛部位")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateRecory.PAIN_LOCATION_NAME)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("疼痛程度评估")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateRecory.PAIN_ACCESS_DEGREE)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("疼痛出现时间")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateRecory.PAIN_OCCUR_TIME)+"\n            ")])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("疼痛治疗方案")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateRecory.ANALGESIC_TREATMENT_OPTIONS_NAME)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("疼痛治疗时间")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateRecory.ANALGESIC_TREATMENT_TIME)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("疼痛治疗结果")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateRecory.ANALGESIC_TREATMENT_RESULT_NAME)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("疼痛医师")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateRecory.ANALGESIC_DOCTOR_NAME)+"\n            ")])])]):t._e(),t._v(" "),t.showOperateAfter?i("div",{staticClass:"patient-table"},[i("div",{staticClass:"dtable"},[t._m(1),t._v(" "),i("div",{staticClass:"row-body rows"},[i("div",{staticClass:"cell cell-head opcell3"},[t._v("入恢复室")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell2"},[t._v("\n                "+t._s(t.operateRecory.IN_OPER_HR_VALUE)+"\n              ")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell2"},[t._v("\n                "+t._s(t.operateRecory.IN_OPER_R_VALUE)+"\n              ")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell2"},[t._v("\n                "+t._s(t.operateRecory.IN_OPER_T_VALUE)+"\n              ")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell2"},[t._v("\n                "+t._s(t.operateRecory.IN_OPER_BP_VALUE)+"\n              ")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell2"},[t._v("\n                "+t._s(t.operateRecory.IN_OPER_VT_VALUE)+"\n              ")])]),t._v(" "),i("div",{staticClass:"row-body rows"},[i("div",{staticClass:"cell cell-head opcell3"},[t._v("出恢复室")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell2"},[t._v("\n                "+t._s(t.operateRecory.OUT_OPER_HR_VALUE)+"\n              ")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell2"},[t._v("\n                "+t._s(t.operateRecory.OUT_OPER_R_VALUE)+"\n              ")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell2"},[t._v("\n                "+t._s(t.operateRecory.OUT_OPER_T_VALUE)+"\n              ")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell2"},[t._v("\n                "+t._s(t.operateRecory.OUT_OPER_BP_VALUE)+"\n              ")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell2"},[t._v("\n                "+t._s(t.operateRecory.OUT_OPER_VT_VALUE)+"\n              ")])])])]):t._e(),t._v(" "),t.showOperateAfter?i("div",{staticClass:"patient-table"},[i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("病人去向")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateAfter.PATIENT_GO)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("清醒时间")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateAfter.TIME_WAKE)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("术后新发昏迷")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateAfter.QT_SHXFHM)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("术后镇痛")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateAfter.ZT_AFTEROP)+"\n            ")])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("镇痛效果")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v(t._s(t.operateAfter.EFFECT))]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("麻醉并发症")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateAfter.ANE_COMPLICATION)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("围麻醉期心跳骤停")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v(t._s(t.operateAfter.QT_XTZT))]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("围麻醉期死亡")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v(t._s(t.operateAfter.QT_SW))])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("气管拔管")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateAfter.EXTUBATION)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("拔管时间")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateAfter.TIME_EXTUBATION)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("\n              非预期气管拔管后小时内再插管\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v(t._s(t.operateAfter.CGQM_FYQ))]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("重度头痛")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateAfter.ZGNMA_ZDTT)+"\n            ")])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("麻木或异物感")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateAfter.ZGNMA_MMYG)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("肌无力")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateAfter.ZGNMA_JWL)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("硬膜外血肿")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateAfter.ZGNMA_YMWXZ)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("硬膜外脓肿")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateAfter.ZGNMA_YMWNZ)+"\n            ")])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("截瘫")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v(t._s(t.operateAfter.ZGNMA_JT))]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("气胸")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v(t._s(t.operateAfter.ZXJM_QX))]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("血胸")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v(t._s(t.operateAfter.ZXJM_XX))]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("声音嘶哑")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateAfter.CGQM_SYSY)+"\n            ")])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"cell-body cell-title"},[t._v("局部血肿")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v("\n              "+t._s(t.operateAfter.ZXJM_JBXZ)+"\n            ")]),t._v(" "),i("div",{staticClass:"cell-body cell-title"},[t._v("导管或导丝异常")]),t._v(" "),i("div",{staticClass:"cell-body cell-cont"},[t._v(t._s(t.operateAfter.ZXJM_DG))]),t._v(" "),i("div",{staticClass:"cell-body cell-title"}),t._v(" "),i("div",{staticClass:"cell-body cell-cont"}),t._v(" "),i("div",{staticClass:"cell-body cell-title"}),t._v(" "),i("div",{staticClass:"cell-body cell-cont"})])]):t._e()]):t._e(),t._v(" "),"anesthesia"==t.activeName?i("div",{staticClass:"opera-info"},["iamge"==t.operaAnestheType?i("div",{staticClass:"sel"},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.operaAnesthe,callback:function(e){t.operaAnesthe=e},expression:"operaAnesthe"}},t._l(t.options,(function(t){return i("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})})),1)],1):t._e(),t._v(" "),"iamge"==t.operaAnestheType?i("div",{staticClass:"anesth-img"},[i("img",{attrs:{src:t.trasferBase64(t.operaAnesthe)}})]):"iframe"==t.operaAnestheType?i("div",{staticClass:"anesth-img"},[i("div",{staticClass:"report-iframe-container",attrs:{id:"tab-container-other"}},[i("iframeComp",{attrs:{src:t.operaAnestheUrl?t.operaAnestheUrl:""}})],1)]):i("div",{staticClass:"anesth-img"},[t._v("-")])]):t._e()]):t._e()])])},gt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row-head rows"},[i("div",{staticClass:"cell cell-head ch0"},[t._v("序号")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell1"},[t._v("药品名称和编码")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell0"},[t._v("剂量")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell0"},[t._v("数量")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell0"},[t._v("用药开始时间")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell0"},[t._v("用药结束时间")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell0"},[t._v("给药途径和方法")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row-body rows"},[i("div",{staticClass:"cell cell-head opcell3"}),t._v(" "),i("div",{staticClass:"cell cell-head opcell2"},[t._v("心率")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell2"},[t._v("呼吸")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell2"},[t._v("体温")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell2"},[t._v("血压")]),t._v(" "),i("div",{staticClass:"cell cell-head opcell2"},[t._v("通气")])])}],bt=i("b85c");function It(t){return Object(S["a"])({url:D["a"]["getPatientVisitOpers"],method:"post",data:w.a.stringify(t),headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:localStorage.getItem("Authorization")}})}function Tt(t){return Object(S["a"])({url:D["a"]["getOperVisit"],method:"post",data:w.a.stringify(t),headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:localStorage.getItem("Authorization")}})}function Et(t){return Object(S["a"])({url:D["a"]["getOperAfter"],method:"post",data:w.a.stringify(t),headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:localStorage.getItem("Authorization")}})}function Lt(t){return Object(S["a"])({url:D["a"]["getOperRecovery"],method:"post",data:w.a.stringify(t),headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:localStorage.getItem("Authorization")}})}function Ot(t){return Object(S["a"])({url:D["a"]["getAnesthesiaData"],method:"post",data:w.a.stringify(t),headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:localStorage.getItem("Authorization")}})}function Nt(t){return Object(S["a"])({url:D["a"]["getOperDrug"],method:"post",data:w.a.stringify(t),headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:localStorage.getItem("Authorization")}})}var St=configSetting||{},At=St.operateConfig,wt={components:{iframeComp:at["a"]},props:["query"],data:function(){return{activeName:"operate",showOperatePre:!0,showOperateIn:!0,showOperateAfter:!0,operaAnesthe:"",operaAnestheUrl:"",operaAnestheType:"",queryForm:{oid:"",patientId:"",visitId:""},queryParam:{pageNo:1,pageSize:10,oid:"",patientId:"",operNo:""},operaList:[],operatePreForm:{},operateProcess:{},operateAfter:{},operateRecory:{},currOperNo:"",drugList:[],options:[],OPER_START_TIME:"",operateConfig:At,moudleList:[{name:"手术信息",value:"operate"},{name:"手术麻醉",value:"anesthesia"}]}},watch:{query:{handler:function(t,e){this.query&&(this.queryForm.oid=this.query.oid,this.queryForm.patientId=this.query.patientId,this.queryForm.visitId=this.query.visitId,this.queryForm.visitTypeCode=this.query.visitTypeCode,this.getOperList())},deep:!0}},created:function(){var t=this;if(this.operateConfig&&this.operateConfig.active&&(this.activeName=this.operateConfig.active,this.operateConfig.showModual)){var e,i=this.operateConfig.showModual.split("|"),s=[],a=Object(bt["a"])(i);try{var r=function(){var i=e.value,a=t.moudleList.find((function(t){return t.value==i}));a&&s.push(a)};for(a.s();!(e=a.n()).done;)r()}catch(n){a.e(n)}finally{a.f()}this.moudleList=s}this.query&&(this.queryForm.oid=this.query.oid,this.queryForm.patientId=this.query.patientId,this.queryForm.visitId=this.query.visitId,this.queryForm.visitTypeCode=this.query.visitTypeCode,this.getOperList())},methods:{getOperList:function(){var t=this,e=this;It(this.queryForm).then((function(i){e.operaList=i,e.operaList.length>0&&(e.currOperNo=e.operaList[0].OPER_NO,e.getOperVisitData(e.operaList[0].OPER_NO),e.operateProcess=t.operaList[0])}))},getOperVisitData:function(t){var e={oid:this.query.oid,patientId:this.query.patientId,operNo:t,visitId:this.query.visitId,visitTypeCode:this.query.visitTypeCode};this.getOperPre(e),this.getOperProcess(e),this.getOperFinish(e),this.getOperAnesthesiaData(e),this.getDrugList(t)},getOperPre:function(t){var e=this;Tt(t).then((function(t){e.operatePreForm=t}))},getOperProcess:function(t){var e=this;Et(t).then((function(t){e.operateAfter=t}))},getOperFinish:function(t){var e=this;Lt(t).then((function(t){e.operateRecory=t}))},getDrugList:function(t){var e=this;this.queryParam.oid=this.query.oid,this.queryParam.patientId=this.query.patientId,this.queryParam.operNo=t,this.queryParam.visitId=this.query.visitId,this.queryParam.visitTypeCode=this.query.visitTypeCode,Nt(this.queryParam).then((function(t){e.drugList=t.result}))},getOperAnesthesiaData:function(t){var e=this;Ot(t).then((function(t){if(e.options=t,t.length>0){var i=t[0].type||"iamge";e.operaAnestheType=i,"image"==i?e.operaAnesthe=t[0].value:"iframe"==i?(e.operaAnesthe="",e.operaAnestheUrl=t[0].value):"open_page"==i&&(e.operaAnesthe="",window.open(t[0].value))}}))},showOperatePreFun:function(){this.showOperatePre=!this.showOperatePre},showOperateInFun:function(){this.showOperateIn=!this.showOperateIn},showOperateAfterFun:function(){this.showOperateAfter=!this.showOperateAfter},setQuery:function(t){this.activeName=t},setItem:function(t){this.currOperNo=t.OPER_NO,this.operateProcess=t,this.getOperVisitData(t.OPER_NO)},trasferBase64:function(t){if(t)return"data:image/jpg;base64,"+t},dealEmpty:function(t){if(!t||null==t)return"";var e=t.split(","),i=[];return e.forEach((function(t){t&&"null"!==t?i.push(t):i.push("")})),i.join(" ")}}},Dt=wt,qt=(i("34f1"),Object(p["a"])(Dt,Ct,gt,!1,null,"2570b294",null)),Rt=qt.exports,Pt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"emr-cont"},[i("div",{staticClass:"emr-left"},[i("div",{staticClass:"show-icon",class:t.showStat?"curr":"",attrs:{title:"查看统计"},on:{click:t.showStatFun}},[i("span"),t._v(" "),i("span"),t._v(" "),i("span"),t._v(" "),i("span")]),t._v(" "),t.showStat?i("div",{staticClass:"lis-chart"},[i("BarChart",{attrs:{chartData:t.oriList},on:{emrChartClickEmit:t.emrChartClickEmit}})],1):t._e(),t._v(" "),i("div",{staticClass:"top"},[i("div",{staticClass:"nav-cont"},[i("div",{class:"tab-page "+("type"==t.activeName?"current":"none"),on:{click:function(e){return t.setQuery("type")}}},[i("div",{staticClass:"tits"},[t._v("按类型排序")]),t._v(" "),i("div",{staticClass:"line-s"})]),t._v(" "),i("div",{class:"tab-page "+("date"==t.activeName?"current":"none"),on:{click:function(e){return t.setQuery("date")}}},[i("div",{staticClass:"tits"},[t._v("按时间排序")]),t._v(" "),i("div",{staticClass:"line-s"})])])]),t._v(" "),"date"==t.activeName?i("div",{staticClass:"bottom bottom1",style:t.showStat?"height:calc(100% - 275px)":""},[t._l(t.dateContList,(function(e,s){return i("div",{key:s,class:"item-list"+(e.FILE_NO==t.fileNo?" curr":""),on:{click:function(i){return t.setItem(e)}}},[i("div",{staticClass:"name"},[i("div",{class:"label"+(e.FILE_NO==t.fileNo?" curr":""),attrs:{title:e.TOPIC}},[t._v("\n            "+t._s(e.TOPIC)+"\n          ")])]),t._v(" "),i("div",{staticClass:"time",class:e.FILE_NO==t.fileNo?" curr":""},[i("div",{staticClass:"ll"},[t._v(t._s(e.CREATE_DATE_TIME))]),t._v(" "),i("div",{staticClass:"rr"},[t._v(t._s(e.creatorName))])])])})),t._v(" "),0==t.dateContList.length?i("div",{staticClass:"empty"},[t._v("暂无数据")]):t._e()],2):t._e(),t._v(" "),"type"==t.activeName?i("div",{staticClass:"bottom",style:t.showStat?"height:calc(100% - 275px)":""},[t._l(t.typeContList,(function(e){return i("div",{key:e.type,staticClass:"type-list"},[i("div",{class:"type-item"+(t.selectType==e.type?" curr":"")},[i("div",{staticClass:"pre"},[i("svg-icon",{attrs:{"icon-class":"treeLine","class-name":"treeLine"}})],1),t._v(" "),i("div",{staticClass:"tit-name",on:{click:function(i){return t.setShow(e)}}},[t._v("\n            "+t._s(e.type)+"\n          ")]),t._v(" "),i("div",{staticClass:"type-count"},[i("span",[t._v(t._s(e.children.length))])]),t._v(" "),i("div",{staticClass:"icon"},[i("i",{class:e.show?"el-icon-arrow-up":"el-icon-arrow-down",on:{click:function(i){return t.setShow(e)}}})])]),t._v(" "),e.show?i("div",{staticClass:"sub-list"},t._l(e.children,(function(s){return i("div",{key:s.FILE_NO,class:"lst"+(s.FILE_NO==t.fileNo?" curr":""),on:{click:function(i){return t.setItem(s,e)}}},[i("div",{staticClass:"name"},[i("div",{class:"label"+(s.FILE_NO==t.fileNo?" curr":""),attrs:{title:s.TOPIC}},[t._v("\n                "+t._s(s.TOPIC)+"\n              ")])]),t._v(" "),i("div",{staticClass:"time",class:s.FILE_NO==t.fileNo?" curr":""},[i("div",{staticClass:"ll"},[t._v(t._s(s.CREATE_DATE_TIME))]),t._v(" "),i("div",{staticClass:"rr"},[t._v(t._s(s.creatorName))])])])})),0):t._e()])})),t._v(" "),0==t.typeContList.length?i("div",{staticClass:"empty"},[t._v("暂无数据")]):t._e()],2):t._e()]),t._v(" "),i("div",{staticClass:"emr-right"},[t.emrContInfo&&t.emrContInfo.FILE_CLASS&&"HTML"===t.emrContInfo.FILE_CLASS.toUpperCase()?i("div",{staticClass:"emr-text",attrs:{id:"emrText"}},[i("div",{staticClass:"blws",domProps:{innerHTML:t._s(t.emrContInfo.MR_CONTENT_HTML)}}),t._v(" "),"Y"===t.showNextOrLastBtn?i("div",{staticClass:"btn-oper"},[i("div",{staticClass:"btn",on:{click:t.lastEmr}},[t._v("上一条")]),t._v(" "),i("div",{staticClass:"btn",on:{click:t.nextEmr}},[t._v("下一条")])]):t._e()]):t._e(),t._v(" "),t.emrContInfo&&t.emrContInfo.FILE_CLASS&&"URL"===t.emrContInfo.FILE_CLASS.toUpperCase()?i("div",{staticClass:"emr-text",attrs:{id:"emrText"}},[i("i-frame",{attrs:{src:t.emrContInfo.MR_CONTENT_HTML}}),t._v(" "),"Y"===t.showNextOrLastBtn?i("div",{staticClass:"btn-oper"},[i("div",{staticClass:"btn",on:{click:t.lastEmr}},[t._v("上一条")]),t._v(" "),i("div",{staticClass:"btn",on:{click:t.nextEmr}},[t._v("下一条")])]):t._e()],1):t._e(),t._v(" "),t.emrContInfo&&t.emrContInfo.FILE_CLASS&&"TEXT"===t.emrContInfo.FILE_CLASS.toUpperCase()?i("div",{staticClass:"emr-text",attrs:{id:"emrText"}},[i("div",{staticClass:"blws",domProps:{innerHTML:t._s(t.emrContInfo.MR_CONTENT_HTML)}}),t._v(" "),"Y"===t.showNextOrLastBtn?i("div",{staticClass:"btn-oper"},[i("div",{staticClass:"btn",on:{click:t.lastEmr}},[t._v("上一条")]),t._v(" "),i("div",{staticClass:"btn",on:{click:t.nextEmr}},[t._v("下一条")])]):t._e()]):t._e(),t._v(" "),i("div",{staticClass:"emr-srceen-full-btn"},[i("screen-full",{attrs:{id:"emrText"},on:{getStatus:t.getStatus}})],1),t._v(" "),t.emrContInfo?t._e():i("div",{staticClass:"empty-icon"},[i("svg-icon",{attrs:{"icon-class":"empty-data"}})],1)])])},xt=[];i("a481"),i("6762"),i("2fdb"),i("20d6");function Ft(t){return Object(S["a"])({url:D["a"]["getVisitMrs"],method:"post",data:w.a.stringify(t),headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:localStorage.getItem("Authorization")}})}function kt(t){return Object(S["a"])({url:D["a"]["getMrDetails"],method:"post",data:w.a.stringify(t),headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:localStorage.getItem("Authorization")}})}var Mt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bar-chart"},[i("div",{staticClass:"bar-wap"},[i("transition-group",{staticClass:"parent",attrs:{name:"list-bar",tag:"div"}},t._l(t.barData,(function(e,s){return i("div",{key:s,staticClass:"list-bar"},[i("div",{staticClass:"tit"},[t._v(t._s(e.name)+":")]),t._v(" "),i("div",{staticClass:"barnav"},[i("div",{staticClass:"bar2"},[i("span",{staticClass:"data-bar",style:"width: "+e.process+"%;background:"+t.colorList[s%6]+";"})]),t._v(" "),i("div",{staticClass:"sp1"},[t._v(t._s(e.value))])])])})),0)],1)])},Ut=[],Bt={props:["chartData"],data:function(){return{colorList:["linear-gradient(270deg,#a5fdfd, #2fc8ca 43%)","linear-gradient(270deg,#fefeff, #b7a3de 43%)","linear-gradient(270deg,#c6fdff, #5cb3ef 43%)","linear-gradient(270deg,#fffee0, #ffba81 43%)","linear-gradient(270deg,#fedce0, #d87b81 43%)","linear-gradient(270deg,#effbfe, #8e99b4 43%)"],barData:[]}},watch:{chartData:{handler:function(t,e){this.initData()},deep:!0}},computed:{groupedItems:function(){var t=this.chartData.reduce((function(t,e){e.name;var i=e.MR_CLASS_NAME;return t[i]=t[i]||{name:i,value:0},t[i].value+=1,t}),{});return t}},mounted:function(){this.initData()},methods:{initData:function(){var t=Object.values(this.groupedItems),e=Math.max.apply(null,t.map((function(t){return t.value})));t.forEach((function(t,i){t.process=(t.value/e*100).toFixed(0)})),this.barData=t}}},jt=Bt,Vt=(i("eb31"),Object(p["a"])(jt,Mt,Ut,!1,null,"4b9214d3",null)),Gt=Vt.exports,zt=configSetting||{},$t=zt.convertType,Ht=zt.showNextOrLastBtn,Yt={components:{iFrame:at["a"],screenFull:ut["a"],BarChart:Gt},props:["query"],data:function(){return{activeName:"",oriList:[],dateContList:[],typeContList:[],fileNo:"",contType:"",emrContInfo:null,selectType:"",queryParam:{},showStat:!1,convertType:$t,showNextOrLastBtn:Ht,fullScreenFlag:!1}},watch:{query:{handler:function(t,e){this.query&&(this.queryParam.oid=this.query.oid,this.queryParam.patientId=this.query.patientId,this.queryParam.visitId=this.query.visitId,this.queryParam.visitTypeCode=this.query.visitTypeCode,this.getList())},deep:!0}},created:function(){this.query&&(this.queryParam.oid=this.query.oid,this.queryParam.patientId=this.query.patientId,this.queryParam.visitId=this.query.visitId,this.queryParam.visitTypeCode=this.query.visitTypeCode,this.getList(),this.setQuery("type"))},methods:{getStatus:function(t){console.log("全屏状态",t),this.fullScreenFlag=t},exitFull:function(){},setQuery:function(t){this.activeName=t,"date"==t?this.getListByDate():this.getListByType()},getList:function(){var t=this;Ft(this.queryParam).then((function(e){t.oriList=e,"date"==t.activeName?t.getListByDate():t.getListByType()}))},getListByDate:function(){this.dateContList=this.oriList,this.dateContList.length>0?(this.fileNo=this.dateContList[0].FILE_NO,this.getEmrInfo(this.fileNo)):this.emrContInfo=null},getListByType:function(){if(this.typeContList=this.getGroupList(this.oriList),this.typeContList.length>0){this.typeContList[0].show=!0,this.selectType=this.typeContList[0].type;var t=this.typeContList[0].children[0];this.fileNo=t.FILE_NO,this.getEmrInfo(this.fileNo)}else this.emrContInfo=null},lastEmr:function(){var t=this;if("date"==this.activeName){var e=this.dateContList.findIndex((function(e){return e.FILE_NO==t.fileNo}));e>0?(this.fileNo=this.dateContList[e-1].FILE_NO,this.getEmrInfo(this.fileNo)):this.$message.warning("已经是第一条")}else{var i=this.typeContList.findIndex((function(e){return t.selectType==e.type}));if(i>-1){var s=this.typeContList[i].children,a=s.findIndex((function(e){return e.FILE_NO==t.fileNo}));a>0?(this.fileNo=s[a-1].FILE_NO,this.getEmrInfo(this.fileNo)):0===a&&0===i?this.$message.warning("已经是第一条"):(this.selectType=this.typeContList[i-1].type,s=this.typeContList[i-1].children,this.fileNo=s[s.length-1].FILE_NO,this.getEmrInfo(this.fileNo))}}},nextEmr:function(){var t=this;if("date"==this.activeName){var e=this.dateContList.findIndex((function(e){return e.FILE_NO==t.fileNo}));e<this.dateContList.length-1?(this.fileNo=this.dateContList[e+1].FILE_NO,this.getEmrInfo(this.fileNo)):this.$message.warning("已经是最后一条")}else{var i=this.typeContList.findIndex((function(e){return t.selectType==e.type}));if(i>-1){var s=this.typeContList[i].children,a=s.findIndex((function(e){return e.FILE_NO==t.fileNo}));a<s.length-1?(this.fileNo=s[a+1].FILE_NO,this.getEmrInfo(this.fileNo)):a===s.length-1&&i===this.typeContList.length-1?this.$message.warning("已经是最后一条"):(this.selectType=this.typeContList[i+1].type,s=this.typeContList[i+1].children,this.fileNo=s[0].FILE_NO,this.getEmrInfo(this.fileNo))}}},getGroupList:function(t){for(var e=[],i={},s=0;s<t.length;s++){var a=t[s];if(i[a.MR_CLASS_NAME])for(var r=0;r<e.length;r++){var n=e[r];if(n.type==a.MR_CLASS_NAME){n.children.push(a);break}}else e.push({type:a.MR_CLASS_NAME,children:[a]}),i[a.MR_CLASS_NAME]=a}return e},getEmrInfo:function(t){var e={oid:this.queryParam.oid,patientId:this.queryParam.patientId,fileNo:t,visitId:this.queryParam.visitId,visitTypeCode:this.queryParam.visitTypeCode},i=this;kt(e).then((function(t){i.emrContInfo=t,i.convertType&&i.convertType.includes(i.emrContInfo.FILE_CLASS.toUpperCase())&&(i.emrContInfo.MR_CONTENT_HTML=i.formattedText(i.emrContInfo.MR_CONTENT_HTML))}))},formattedText:function(t){if(t)return t.replace(/\r\n/g,"<br>")},setItem:function(t,e){this.fileNo=t.FILE_NO,e&&(this.selectType=e.type),this.getEmrInfo(this.fileNo)},setShow:function(t){this.selectType=t.type,t.show?t.show=!1:t.show=!0,this.$forceUpdate()},showStatFun:function(){this.showStat=!this.showStat},emrChartClickEmit:function(t,e){if(!t||"undefined"==t)return!1;var i=t.name,s=this;if(e)return"date"==s.activeName?s.getListByDate():s.getListByType(),!1;"date"==s.activeName?(s.dateContList=s.dateContList.filter((function(t){return t.MR_CLASS_NAME==i})),s.dateContList.length>0?(s.fileNo=s.dateContList[0].FILE_NO,s.getEmrInfo(s.fileNo)):s.emrContInfo=null):(s.typeContList=s.typeContList.filter((function(t){return t.type==i})),s.dateContList.length>0?s.getEmrInfo(s.fileNo):s.emrContInfo=null)}}},Xt=Yt,Wt=(i("d663"),Object(p["a"])(Xt,Pt,xt,!1,null,"5b26a808",null)),Qt=Wt.exports,Jt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"resize",rawName:"v-resize",value:t.handleResize,expression:"handleResize"}],staticClass:"pacs-report"},[i("div",{ref:"selType",staticClass:"check-type"},t._l(t.typeList,(function(e,s){return i("div",{key:s,ref:"selTypeRout",refInFor:!0,staticClass:"sel-type"},[i("div",{staticClass:"check-all"},[i("span",{staticClass:"tit"},[t._v(t._s(e.title))]),i("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:function(i){return t.checkAllRoutChange(e)}},model:{value:e.checkedRoutAll,callback:function(i){t.$set(e,"checkedRoutAll",i)},expression:"titem.checkedRoutAll"}},[t._v("全选")])],1),t._v(" "),i("div",{staticClass:"line"}),t._v(" "),i("div",{staticClass:"check-list"},[i("el-checkbox-group",{on:{change:function(i){return t.handleCheckedRoutChange(e)}},model:{value:e.checkedRoutType,callback:function(i){t.$set(e,"checkedRoutType",i)},expression:"titem.checkedRoutType"}},t._l(e.children,(function(e,s){return i("el-checkbox",{key:s,attrs:{label:e.code}},[t._v(t._s(e.label))])})),1)],1),t._v(" "),i("div",{staticClass:"setting"},[t.settingsBtn?i("i",{staticClass:"el-icon-setting sett",on:{click:function(e){return t.openGroupConfig()}}}):t._e()])])})),0),t._v(" "),i("div",{ref:"conts",staticClass:"cont-report"},[i("div",{staticClass:"pacs-left"},[i("div",{staticClass:"show-icon",class:t.showStat?"curr":"",attrs:{title:"查看统计"},on:{click:t.showStatFun}},[i("span"),t._v(" "),i("span"),t._v(" "),i("span"),t._v(" "),i("span")]),t._v(" "),t.showStat?i("div",{staticClass:"lis-chart"},[i("pacsLeftChart",{attrs:{chartData:t.pacsReportList},on:{pacsChartClickEmit:t.pacsChartClickEmit}})],1):t._e(),t._v(" "),i("div",{staticClass:"top"},[i("div",{staticClass:"sel topinfo"},[i("el-select",{attrs:{placeholder:"请选择"},on:{change:t.selectType},model:{value:t.queryParam.reportType,callback:function(e){t.$set(t.queryParam,"reportType",e)},expression:"queryParam.reportType"}},t._l(t.options,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),i("div",{staticClass:"inp topinfo"},["检查名称"==t.queryParam.reportType?i("el-input",{attrs:{clearable:"",placeholder:"关键字"},on:{input:t.serach},model:{value:t.examItemName,callback:function(e){t.examItemName=e},expression:"examItemName"}}):t._e(),t._v(" "),"检查诊断"==t.queryParam.reportType?i("el-input",{attrs:{clearable:"",placeholder:"关键字"},on:{input:t.serach},model:{value:t.examDiag,callback:function(e){t.examDiag=e},expression:"examDiag"}}):t._e(),t._v(" "),"检查所见"==t.queryParam.reportType?i("el-input",{attrs:{clearable:"",placeholder:"关键字"},on:{input:t.serach},model:{value:t.examFeature,callback:function(e){t.examFeature=e},expression:"examFeature"}}):t._e()],1)]),t._v(" "),i("div",{staticClass:"bottom",style:t.showStat?"height:calc(100% - 275px)":""},[t._l(t.pacsReportList,(function(e,s){return i("div",{key:s,class:"item-list"+(e.REPORT_NO==t.currItem?" curr":""),on:{click:function(i){return t.setItem(e)}}},[i("div",{staticClass:"name"},[i("div",{class:"label"+(e.REPORT_NO==t.currItem?" curr":"")},[t._v("\n              "+t._s(e.EXAM_ITEM_NAME)+"\n            ")]),t._v(" "),i("div",{staticClass:"ins"})]),t._v(" "),i("div",{staticClass:"time",class:e.REPORT_NO==t.currItem?" curr":""},[t._v("\n            "+t._s(e.REPORT_TIME)+"\n          ")])])})),t._v(" "),0==t.pacsReportList.length?i("div",{staticClass:"empty"},[t._v("暂无数据")]):t._e()],2)]),t._v(" "),i("div",{staticClass:"pacs-right"},[i("div",{staticClass:"nav-cont"},[t._l(t.serachList,(function(e,s){return i("div",{key:s,class:"tab-page "+(t.activeName==e.value?"current":"none"),on:{click:function(i){return t.setQuery(e)}}},[i("div",{staticClass:"tits"},[t._v(t._s(e.label))]),t._v(" "),i("div",{staticClass:"line-s"})])})),t._v(" "),i("div",{staticClass:"setting"},[t.settingsBtn?i("i",{staticClass:"el-icon-setting sett",on:{click:t.openConfig}}):t._e()])],2),t._v(" "),t.pacsReportList.length>0&&"detail"==t.activeName?i("div",{staticClass:"report-cont"},[i("div",{staticClass:"titles"},[t._v("\n          "+t._s(t.currItemName)+"\n          "),i("div",{staticClass:"bline"})]),t._v(" "),i("div",{staticClass:"report-info"},[i("div",{staticClass:"item"},[i("div",{staticClass:"tit"},[i("svg-icon",{attrs:{"icon-class":"projectStatus"}}),t._v("检查类别\n            ")],1),t._v(" "),i("div",{staticClass:"val"},[t._v(t._s(t.reportInfos.EXAM_CLASS_NAME))])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tit"},[i("svg-icon",{attrs:{"icon-class":"projectStatus"}}),i("span",{staticStyle:{"letter-spacing":"6.5px"}},[t._v("申请")]),t._v("号\n            ")],1),t._v(" "),i("div",{staticClass:"val"},[t._v("\n              "+t._s(t.reportInfos.APPLY_NO?t.reportInfos.APPLY_NO:"-")+"\n            ")])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tit"},[i("svg-icon",{attrs:{"icon-class":"projectStatus"}}),t._v("检查部位\n            ")],1),t._v(" "),i("div",{staticClass:"val"},[t._v(t._s(t.reportInfos.EXAM_PART_NAME))])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tit"},[i("svg-icon",{attrs:{"icon-class":"projectStatus"}}),t._v("检查时间\n            ")],1),t._v(" "),i("div",{staticClass:"val"},[t._v(t._s(t.reportInfos.EXAM_PERFORM_TIME))])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tit"},[i("svg-icon",{attrs:{"icon-class":"projectStatus"}}),t._v("申请医生\n            ")],1),t._v(" "),i("div",{staticClass:"val"},[t._v(t._s(t.reportInfos.APPLY_DOCTOR_NAME))])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tit"},[i("svg-icon",{attrs:{"icon-class":"projectStatus"}}),t._v("申请科室\n            ")],1),t._v(" "),i("div",{staticClass:"val"},[t._v(t._s(t.reportInfos.APPLY_DEPT_NAME))])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tit"},[i("svg-icon",{attrs:{"icon-class":"projectStatus"}}),t._v("申请时间\n            ")],1),t._v(" "),i("div",{staticClass:"val"},[t._v(t._s(t.reportInfos.APPLY_TIME))])]),t._v(" "),i("div",{staticClass:"item item2"},[i("div",{staticClass:"tit"},[i("svg-icon",{attrs:{"icon-class":"projectStatus"}}),t._v("检查所见\n            ")],1),t._v(" "),i("div",{staticClass:"val"},[t._v(t._s(t.reportInfos.EXAM_FEATURE))])]),t._v(" "),i("div",{staticClass:"item item2"},[i("div",{staticClass:"tit"},[i("svg-icon",{attrs:{"icon-class":"projectStatus"}}),t._v("检查诊断\n            ")],1),t._v(" "),i("div",{staticClass:"val"},[t._v(t._s(t.reportInfos.EXAM_DIAG))])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tit"},[i("svg-icon",{attrs:{"icon-class":"projectStatus"}}),t._v("报告时间\n            ")],1),t._v(" "),i("div",{staticClass:"val"},[t._v(t._s(t.reportInfos.REPORT_TIME))])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tit"},[i("svg-icon",{attrs:{"icon-class":"projectStatus"}}),i("span",{staticStyle:{"letter-spacing":"6.5px"}},[t._v("报告")]),t._v("人\n            ")],1),t._v(" "),i("div",{staticClass:"val"},[t._v(t._s(t.reportInfos.REPORT_DOCTOR_NAME))])])])]):t._e(),t._v(" "),t.pacsReportList.length>0&&"detail"!=t.activeName?i("div",{staticClass:"report-cont"},["iframe"==t.tabUrlsData.linkType?i("div",{staticClass:"report-iframe-container",attrs:{id:"tab-container-other"}},[i("iframeComp",{attrs:{src:t.tabUrlsData.url?t.tabUrlsData.url:""}})],1):t._e(),t._v(" "),"iframe"==t.tabUrlsData.linkType?i("div",{staticClass:"emr-srceen-full-btn"},[i("screen-full",{attrs:{id:"tab-container-other"}})],1):t._e()]):t._e()])]),t._v(" "),i("diagIndex",{ref:"diagIndex"})],1)},Kt=[],Zt=i("2909"),te=i("e2a6"),ee=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chart",staticStyle:{height:"100%",width:"100%"},attrs:{id:"lisPieChart"}})},ie=[],se={props:["chartData"],data:function(){return{chart:null,chartClicked:!1,pieData:[],pieGroupData:[]}},watch:{chartData:{handler:function(t,e){this.initChartData()},deep:!0}},computed:{groupedItems:function(){var t=this.chartData.reduce((function(t,e){e.name;var i=e.EXAM_CLASS_NAME;return t[i]=t[i]||{name:i,value:0},t[i].value+=1,t}),{});return t},groupedItemsByGroup:function(){var t=this.chartData.reduce((function(t,e){e.name;var i=e.EXAM_GROUP;return t[i]=t[i]||{name:i,value:0},t[i].value+=1,t}),{});return t}},mounted:function(){var t=this;this.$nextTick((function(){t.initChartData()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChartData:function(){this.pieData=Object.values(this.groupedItems),this.pieData.length>1&&(this.chartClicked=!1);var t=[];this.pieData.forEach((function(e){t.push(e.name)})),this.initChart(t)},initChart:function(t){for(var e=this,s=[],a=[],r=["#1890ff","#925af6","#ffc159","#d15cf8"],n=this.pieData,o=[{value:10,name:" "}],l=0;l<n.length;l++)s.push({value:n[l].value,name:n[l].name,itemStyle:{borderRadius:"50%",borderWidth:6,shadowBlur:10,borderColor:r[l],shadowColor:r[l]}},{value:.5,name:"",itemStyle:{normal:{label:{show:!1},labelLine:{show:!1},color:"rgba(0, 0, 0, 0)",borderColor:"rgba(0, 0, 0, 0)",borderWidth:0}}});for(var c=0;c<o.length;c++)a.push({value:o[c].value,name:o[c].name,itemStyle:{borderRadius:"50%"}});this.chart=this.$echarts.init(document.getElementById("lisPieChart"));var d=[{name:"",type:"pie",radius:["50%","55%"],avoidLabelOverlap:!1,center:["50%","50%"],label:{show:!0,color:"#fff"},itemStyle:{normal:{label:{show:!0,position:"outside",formatter:function(t){var e=0;return e=t.value,""!==t.name?"{b|"+t.name+"} \n {hr|} \n{c|"+e+"} {a|份}":""},rich:{b:{fontSize:12,color:"#2f044e",padding:1,align:"center"},hr:{borderColor:"#efefef",width:"100%",borderWidth:1,height:0},w:{fontSize:12,color:"#333",align:"left",padding:1},c:{fontSize:12,align:"center",padding:1,color:"#9002f7",fontWeight:"bold"},a:{fontSize:12,align:"center",padding:1,color:"#53C6F2",fontWeight:"bold"}}},labelLine:{length:10,length2:10,show:!0,color:"#00ffff"}}},emphasis:{label:{show:!1,fontSize:"10"}},color:r,data:s}];function h(t){e.$emit("pacsChartClickEmit",t,e.chartClicked),e.chartClicked=!0}this.chart.setOption({title:{top:0,text:"",subtext:""},tooltip:{trigger:"item"},legend:{show:!1,icon:"circle",type:"scroll",right:"0px",orient:"vertical",pageButtonPosition:"end",pageIconColor:"#3ba1ff",pageTextStyle:{color:"#000"},top:5,data:t,textStyle:{color:"#000",fontSize:"12px"}},series:d,graphic:[{type:"image",left:"center",top:"middle",z:100,bounding:"raw",silent:!1,style:{image:i("2220"),width:100,height:100}}]}),this.chart.on("click",h)}}},ae=se,re=Object(p["a"])(ae,ee,ie,!1,null,null,null),ne=re.exports,oe=configSetting||{},le=oe.showPacsExe,ce=oe.appointIeOpen,de={components:{iframeComp:at["a"],pacsLeftChart:ne,diagIndex:c["a"],screenFull:ut["a"]},props:["query"],data:function(){return{options:[{label:"检查名称",value:"检查名称"},{label:"检查诊断",value:"检查诊断"},{label:"检查所见",value:"检查所见"}],queryParam:{reportType:"检查名称",examItemName:"",examDiag:"",examFeature:""},examItemName:"",examDiag:"",examFeature:"",serachList:[{label:"报告详情",value:"detail"}],tabUrlsData:{},pacsReportList:[],currItem:"",currItemName:"",activeName:"",reportInfo:[],reportInfos:{},showDiag:!0,showAbnormal:!1,reportTypeList:[],checkedType:[],checkedAll:!0,allReportList:[],isIndeterminate:!1,showStat:!1,settingsBtn:!1,typeList:[],showPacsExe:le,appointIeOpen:ce}},watch:{query:{handler:function(t,e){this.query&&(this.queryParam.oid=this.query.oid,this.queryParam.patientId=this.query.patientId,this.queryParam.visitId=this.query.visitId,this.queryParam.visitTypeCode=this.query.visitTypeCode,this.getPacsList())},deep:!0}},created:function(){this.activeName=this.serachList[0].value,this.query&&(this.queryParam.oid=this.query.oid,this.queryParam.patientId=this.query.patientId,this.queryParam.visitId=this.query.visitId,this.queryParam.visitTypeCode=this.query.visitTypeCode,this.getPacsList(),this.getPacsReportTypeList())},mounted:function(){var t=localStorage.getItem("userRole")||"";this.settingsBtn="admin"==t;var e=this;e.$nextTick((function(){e.resizeEle()}))},methods:{openPacsExe:function(){"ECG"===this.reportInfos.EXAM_CLASS_CODE?(console.log("EXAM_NO",this.reportInfos.EXAM_NO),window.location.href="gyeyecgview://"+this.reportInfos.EXAM_NO):(console.log("REPORT_NO",this.reportInfos.REPORT_NO),window.location.href="gyeypacsview://-_"+this.reportInfos.REPORT_NO)},serach:function(){this.getFilterList("filter")},setQuery:function(t){this.activeName=t.value,"reportDetail"==this.activeName?this.tabUrlsData={}:"pacsExe"==this.activeName?this.openPacsExe():(this.tabUrlsData=t,this.civOpenNewUrl(t,"tab-container-other"))},civOpenNewUrl:function(t,e){var i=t.linkType||"";i=i.toLowerCase();var s=t.url||"";if("exe"!=i&&(-1==s.indexOf("http:/")&&(s="http://"+s),this.appointIeOpen&&this.appointIeOpen.indexOf(t.label)>-1&&(s="openIE:"+s)),"iframe"==i);else if("open_page"==i)window.open(s);else if("exe"==i){var a=document.createElement("a");a.style.display="none",a.href=s,document.body.appendChild(a),a.click(),document.body.removeChild(a)}},handleResize:function(t){t.width;var e=t.height;if(e){var i=this;i.$nextTick((function(){i.resizeEle()}))}},resizeEle:function(){var t;if(this.$refs.selType){var e=this.$refs.selType;t=e.clientHeight+10}else t=0;var i=this.$refs.conts;i.style.height="calc(100% - "+t+"px)"},getPacsReportTypeList:function(){var t=this,e={oid:this.query.oid,patientId:this.query.patientId,visitId:this.query.visitId,visitTypeCode:this.query.visitTypeCode};Object(te["c"])(e).then((function(e){var i=e,s=[];for(var a in i)if(i.hasOwnProperty(a)){var r={title:a,isIndeterminate:!1,checkedRoutAll:!0,checkedRoutType:[]},n=[],o=[];for(var l in i[a])i[a].hasOwnProperty(l)&&(n.push({label:i[a][l],code:l}),o.push(l));r.children=n,r.checkedRoutType=o,s.push(r)}t.typeList=s,console.log("typeList",s)}))},getPacsList:function(){var t=this;Object(te["b"])(this.queryParam).then((function(e){if(t.allReportList=e,t.pacsReportList=e,t.pacsReportList.length>0){if(t.currItem=t.pacsReportList[0].REPORT_NO,t.currItemName=t.pacsReportList[0].EXAM_ITEM_NAME,t.reportTypeList=t.getGroupList(t.pacsReportList,"EXAM_CLASS_NAME"),t.checkedAll){var i=[];t.reportTypeList.forEach((function(t){i.push(t.value)})),t.checkedType=i}t.getDetailInfo(t.currItem)}}))},getGroupList:function(t,e,i){var s=[];return t.forEach((function(t){var a={};a=i?{label:t[i],value:t[e]}:{label:t[e],value:t[e]};var r=s.find((function(i){return i.value==t[e]}));r||s.push(a)})),s},getDetailInfo:function(t){var e=this,i={oid:this.query.oid,patientId:this.query.patientId,visitTypeCode:this.query.visitTypeCode,visitId:this.query.visitId,reportNo:t};Object(te["a"])(i).then((function(t){e.reportInfos=t;for(var i=t.urls||[],s=new Array,a=0;a<i.length;a++)s.push({label:i[a].name,value:i[a].name,linkType:i[a].linkType,url:i[a].url});e.serachList=[e.serachList[0]].concat(s),e.showPacsExe&&e.showPacsExe.includes(t.EXAM_CLASS_CODE)&&e.serachList.push({label:"影像",value:"pacsExe"})}))},setItem:function(t){this.currItem=t.REPORT_NO,this.currItemName=t.EXAM_ITEM_NAME,this.getDetailInfo(this.currItem),this.activeName=this.serachList[0].value},showDiagFun:function(){this.showDiag=!this.showDiag},checkAllRoutChange:function(t){if(t.checkedRoutAll){var e=[];t.children.forEach((function(t){e.push(t.code)})),t.checkedRoutType=e}else t.checkedRoutType=[];t.isIndeterminate=!1,this.getFilterList()},handleCheckedRoutChange:function(t){var e=t.checkedRoutType.length;t.checkedRoutAll=e===t.children.length,t.isIndeterminate=e>0&&e<t.children.length,this.getFilterList()},getFilterList:function(t){for(var e=this,i="",s=0;s<this.typeList.length;s++)i+=this.typeList[s].checkedRoutType.map((function(t){return t})).join(","),s<this.typeList.length-1&&i&&(i+=",");if(i){var a=Object(Zt["a"])(this.allReportList);"filter"==t&&(this.examItemName||this.examDiag||this.examFeature)&&(a=this.allReportList.filter((function(t){return e.examItemName&&t.EXAM_ITEM_NAME.includes(e.examItemName)||e.examDiag&&t.EXAM_DIAG.includes(e.examDiag)||e.examFeature&&t.EXAM_FEATURE.includes(e.examFeature)}))),this.pacsReportList=a.filter((function(t){return i.split(",").includes(t.EXAM_CLASS_CODE)})),this.resetReport()}else this.pacsReportList=[]},checkAllChange:function(){var t=this;if(this.checkedAll){var e=[];this.reportTypeList.forEach((function(t){e.push(t.value)})),this.checkedType=e}else this.checkedType=[];this.isIndeterminate=!1,this.pacsReportList=this.allReportList.filter((function(e){return t.checkedType.includes(e.EXAM_CLASS_NAME)})),this.resetReport()},resetReport:function(){this.pacsReportList.length>0?(this.currItem=this.pacsReportList[0].REPORT_NO,this.currItemName=this.pacsReportList[0].EXAM_ITEM_NAME,this.getDetailInfo(this.currItem)):(this.currItem="",this.currItemName="",this.reportInfos={})},handleCheckedCitiesChange:function(t){var e=this,i=t.length;this.checkedAll=i===this.reportTypeList.length,this.isIndeterminate=i>0&&i<this.reportTypeList.length,this.pacsReportList=this.allReportList.filter((function(t){return e.checkedType.includes(t.EXAM_CLASS_NAME)})),this.resetReport()},selectType:function(){this.examItemName="",this.examDiag="",this.examFeature=""},showStatFun:function(){this.showStat=!this.showStat},openConfig:function(){var t={title:"检查报告模块配置",configCode:"EXAM_DETAIL_MOUNT_PLUGIN_MANAGE_CONFIG",oid:this.query.oid,configType:"labModuleConfig",visitTypeCode:this.visitType,width:"65%"};this.$refs.diagIndex.open(t)},openGroupConfig:function(){var t={title:"检查报告分组配置",configCode:"EXAM_REPORT_GROUP_CONFIG",oid:this.query.oid,configType:"reportGroupConfig",width:"700px"};this.$refs.diagIndex.open(t)},pacsChartClickEmit:function(t,e){if(void 0==t||"undefined"==t)return!1;e?(this.checkedAll=!0,this.checkAllChange()):(this.checkedType=[t.name],this.handleCheckedCitiesChange(this.checkedType))}}},he=de,ue=(i("6c28"),Object(p["a"])(he,Jt,Kt,!1,null,"1b1c8ff0",null)),ve=ue.exports,pe=i("ebba"),_e=i("07f4"),fe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"common-plugs-list-table"},[i("div",{staticClass:"plugs-content"},[i("div",{staticClass:"content-left"},[i("div",{staticClass:"bottom"},[t._l(t.typeList,(function(e,s){return i("div",{key:s,class:"item-list"+(s==t.currItem?" curr":""),on:{click:function(i){return t.setItem(e,s)}}},[i("div",{staticClass:"name"},[i("div",{class:"label"+(s==t.currItem?" curr":""),attrs:{title:e.title}},[t._v("\n              "+t._s(e.title)+"\n            ")]),t._v(" "),i("div",{staticClass:"ins"})]),t._v(" "),i("div",{staticClass:"time",class:s==t.currItem?" curr":""},[t._v("\n            "+t._s(e.time)+"\n          ")])])})),t._v(" "),0==t.typeList.length?i("div",{staticClass:"empty"},[t._v("暂无数据")]):t._e()],2)]),t._v(" "),"LIST_TABLE"===t.typeCode?i("div",{staticClass:"content-right"},[i("el-table",{attrs:{data:t.tableList,stripe:""}},[i("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"70"}},[i("template",{slot:"header"},[t._v(" 序号 ")])],2),t._v(" "),t._l(t.tableHeadData,(function(e,s){return[e.hidden&&"false"!=e.hidden?t._e():i("el-table-column",{key:s,attrs:{prop:e.field,label:e.name,width:e.width,align:"center"}})]})),t._v(" "),t.hasUrl?i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"sp",on:{click:function(i){return t.handleClick(e.row)}}},[i("i",{staticClass:"el-icon-view"}),t._v("查看")])]}}],null,!1,2474510744)},[i("template",{slot:"header"},[t._v(" 操作 ")])],2):t._e()],2),t._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{"page-sizes":[10,20,30,40,50,100],total:t.total,background:!1,page:t.queryForm.pageNo,limit:t.queryForm.pageSize,layout:"total, sizes, prev, pager, next "},on:{"update:page":function(e){return t.$set(t.queryForm,"pageNo",e)},"update:limit":function(e){return t.$set(t.queryForm,"pageSize",e)},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,pagination:t.getTableData}})],1):t._e(),t._v(" "),"LIST_URL"===t.typeCode?i("div",{staticClass:"content-right"},[t.detail&&t.detail.url?i("div",{staticClass:"url-content",attrs:{id:"emrText"}},[i("i-frame",{attrs:{src:t.detail.url}})],1):t._e(),t._v(" "),i("div",{staticClass:"srceen-full-btn"},[i("screen-full",{attrs:{id:"emrText"}})],1)]):t._e()]),t._v(" "),i("diagIndex",{ref:"diagIndex"})],1)},me=[];function ye(t){return Object(S["a"])({url:D["a"]["pluginList"],method:"post",data:t,headers:{"Content-Type":"application/json;charset=utf-8",Authorization:localStorage.getItem("Authorization")}})}function Ce(t){return Object(S["a"])({url:D["a"]["pluginListUrl"],method:"post",data:t,headers:{"Content-Type":"application/json;charset=utf-8",Authorization:localStorage.getItem("Authorization")}})}function ge(t){return Object(S["a"])({url:D["a"]["pluginTableList"],method:"post",data:t,headers:{"Content-Type":"application/json;charset=utf-8",Authorization:localStorage.getItem("Authorization")}})}function be(t){return Object(S["a"])({url:D["a"]["getTableConfig"],method:"post",data:t,headers:{"Content-Type":"application/json;charset=utf-8",Authorization:localStorage.getItem("Authorization")}})}function Ie(t){return Object(S["a"])({url:D["a"]["getListTableConfig"],method:"post",data:t,headers:{"Content-Type":"application/json;charset=utf-8",Authorization:localStorage.getItem("Authorization")}})}function Te(t){return Object(S["a"])({url:D["a"]["pluginGetUrl"],method:"post",data:t,headers:{"Content-Type":"application/json;charset=utf-8",Authorization:localStorage.getItem("Authorization")}})}function Ee(t){return Object(S["a"])({url:D["a"]["pluginListGetUrl"],method:"post",data:t,headers:{"Content-Type":"application/json;charset=utf-8",Authorization:localStorage.getItem("Authorization")}})}function Le(t){return Object(S["a"])({url:D["a"]["pluginGetTableUrl"],method:"post",data:t,headers:{"Content-Type":"application/json;charset=utf-8",Authorization:localStorage.getItem("Authorization")}})}function Oe(t){return Object(S["a"])({url:D["a"]["pluginGetTable"],method:"post",data:t,headers:{"Content-Type":"application/json;charset=utf-8",Authorization:localStorage.getItem("Authorization")}})}var Ne={props:["query","idCardNo","plugsType","moduleId","typeCode"],components:{iFrame:at["a"],diagIndex:c["a"],screenFull:ut["a"]},data:function(){return{total:0,tableList:[],typeList:[],tableHeadData:[],queryForm:{pageNo:1,pageSize:10},currItem:0,detail:{},linkType:"",hasUrl:!1,associateFieldToUrl:""}},watch:{query:{handler:function(t,e){this.query&&(this.queryForm.oid=this.query.oid,this.queryForm.patientId=this.query.patientId,this.queryForm.visitId=this.query.visitId,this.queryForm.visitTypeCode=this.query.visitTypeCode,this.loadingPage())},deep:!0},idCardNo:{handler:function(t,e){this.queryForm.idCardNo=this.idCardNo}},plugsType:{handler:function(t,e){}},typeCode:{handler:function(t,e){}},moduleId:{handler:function(t,e){this.loadingPage()}}},created:function(){this.query&&(this.queryForm.oid=this.query.oid,this.queryForm.patientId=this.query.patientId,this.queryForm.visitId=this.query.visitId,this.queryForm.visitTypeCode=this.query.visitTypeCode),this.queryForm.idCardNo=this.idCardNo,this.loadingPage()},methods:{loadingPage:function(){"LIST_URL"===this.typeCode?this.getTypeListUrl():(this.getTableHead(),this.getTypeList())},getTableData:function(){var t=this;this.queryForm.moduleId=this.moduleId,this.queryForm.pluginCode=this.plugsType,ge(this.queryForm).then((function(e){t.tableList=e.result,t.total=e.totalCount}))},getTableHead:function(){var t=this,e={oid:this.query.oid,moduleId:this.moduleId,pluginCode:this.plugsType};Ie(e).then((function(e){t.tableHeadData=e.tableColumnConfigs,t.associateFieldToUrl=e.associateFieldToUrl,t.hasUrl=e.linkType}))},getTypeList:function(){var t=this,e={oid:this.query.oid,moduleId:this.moduleId,pluginCode:this.plugsType,patientId:this.query.patientId,visitId:this.query.visitId,visitTypeCode:this.query.visitTypeCode,idCardNo:this.idCardNo};ye(e).then((function(e){t.typeList=e,t.typeList.length>0&&(t.queryForm.associateParam=t.typeList[0]["associateParam"],t.getTableData())}))},getTypeListUrl:function(){var t=this,e={oid:this.query.oid,moduleId:this.moduleId,pluginCode:this.plugsType,patientId:this.query.patientId,visitId:this.query.visitId,visitTypeCode:this.query.visitTypeCode,idCardNo:this.idCardNo};Ce(e).then((function(e){t.typeList=e,t.typeList.length>0&&(t.queryForm.associateParam=t.typeList[0]["associateParam"],t.getListDetail())}))},getListDetail:function(){var t=this,e={oid:this.query.oid,moduleId:this.moduleId,pluginCode:this.plugsType,patientId:this.query.patientId,visitId:this.query.visitId,visitTypeCode:this.query.visitTypeCode,idCardNo:this.idCardNo,associateParam:this.queryForm.associateParam};Ee(e).then((function(e){t.detail=e}))},setItem:function(t,e){this.currItem=e,this.queryForm.associateParam=t["associateParam"],"LIST_URL"===this.typeCode?this.getListDetail():this.getTableData()},handleSizeChange:function(t){console.log("每页 ".concat(t," 条")),this.queryForm.pageSize=t,this.getTableData()},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.queryForm.pageNo=t,this.getTableData()},handleClick:function(t){var e=this,i={oid:this.query.oid,moduleId:this.moduleId,pluginCode:this.plugsType,patientId:this.query.patientId,visitId:this.query.visitId,visitTypeCode:this.query.visitTypeCode,idCardNo:this.idCardNo,associateParam:t[this.associateFieldToUrl]};Te(i).then((function(t){if("open_page"===t.linkType)window.open(t.url,"_self");else{var i={title:"查看",configType:"showIframe",url:t.url,width:"85%"};e.$refs.diagIndex.open(i)}}))}}},Se=Ne,Ae=(i("13f4"),i("54d4"),Object(p["a"])(Se,fe,me,!1,null,"62bffb29",null)),we=Ae.exports,De=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"group-plugs"},[i("div",{staticClass:"nav-cont"},t._l(t.groupList,(function(e,s){return i("div",{key:s,class:"tab-page "+(t.moduleId==e.id?"current":"none"),on:{click:function(i){return t.setQuery(e)}}},[i("div",{staticClass:"tits"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"line-s"})])})),0),t._v(" "),i("commonPlugsTable",{attrs:{plugsType:t.plugsType,moduleId:t.moduleId,typeCode:t.typeCode,query:t.query,viewType:"page",idCardNo:t.idCardNo}})],1)},qe=[],Re=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"common-plugs"},[i("el-table",{attrs:{data:t.tableList,stripe:""}},[i("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"70"}},[i("template",{slot:"header"},[t._v(" 序号 ")])],2),t._v(" "),t._l(t.tableHeadData,(function(e,s){return[e.hidden&&"false"!=e.hidden?t._e():i("el-table-column",{key:s,attrs:{prop:e.field,label:e.name,width:e.width,align:"center"}})]})),t._v(" "),t.hasUrl?i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"sp",on:{click:function(i){return t.handleClick(e.row)}}},[i("i",{staticClass:"el-icon-view"}),t._v("查看")])]}}],null,!1,2474510744)},[i("template",{slot:"header"},[t._v(" 操作 ")])],2):t._e()],2),t._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{"page-sizes":[10,20,30,40,50,100],total:t.total,background:!1,page:t.queryForm.pageNo,limit:t.queryForm.pageSize,layout:"total, sizes, prev, pager, next "},on:{"update:page":function(e){return t.$set(t.queryForm,"pageNo",e)},"update:limit":function(e){return t.$set(t.queryForm,"pageSize",e)},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,pagination:t.getTableData}}),t._v(" "),i("diagIndex",{ref:"diagIndex"})],1)},Pe=[],xe={props:["query","idCardNo","plugsType","moduleId","typeCode"],components:{diagIndex:c["a"]},data:function(){return{total:0,tableList:[],tableHeadData:[],queryForm:{pageNo:1,pageSize:10},hasUrl:!1,associateField:""}},watch:{query:{handler:function(t,e){this.query&&(this.queryForm.oid=this.query.oid,this.queryForm.patientId=this.query.patientId,this.queryForm.visitId=this.query.visitId,this.queryForm.visitTypeCode=this.query.visitTypeCode,this.getTableData())},deep:!0},idCardNo:{handler:function(t,e){this.queryForm.idCardNo=this.idCardNo}},plugsType:{handler:function(t,e){}},typeCode:{handler:function(t,e){}},moduleId:{handler:function(t,e){this.queryForm.oid=this.query.oid,this.queryForm.patientId=this.query.patientId,this.queryForm.visitId=this.query.visitId,this.queryForm.visitTypeCode=this.query.visitTypeCode,this.queryForm.idCardNo=this.idCardNo,this.getTableData(),this.getTableHead()}}},created:function(){this.query&&(this.queryForm.oid=this.query.oid,this.queryForm.patientId=this.query.patientId,this.queryForm.visitId=this.query.visitId,this.queryForm.visitTypeCode=this.query.visitTypeCode),this.queryForm.idCardNo=this.idCardNo,this.getTableData(),this.getTableHead()},methods:{getTableData:function(){var t=this;this.queryForm.moduleId=this.moduleId,this.queryForm.pluginCode=this.plugsType,Oe(this.queryForm).then((function(e){t.tableList=e.result,t.total=e.totalCount}))},getTableHead:function(){var t=this,e={oid:this.query.oid,moduleId:this.moduleId,pluginCode:this.plugsType};be(e).then((function(e){t.tableHeadData=e.tableColumnConfigs,t.associateField=e.associateField,t.hasUrl=e.linkType}))},handleSizeChange:function(t){console.log("每页 ".concat(t," 条")),this.queryForm.pageSize=t,this.getTableData()},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.queryForm.pageNo=t,this.getTableData()},handleClick:function(t){var e=this,i={oid:this.query.oid,moduleId:this.moduleId,pluginCode:this.plugsType,patientId:this.query.patientId,visitId:this.query.visitId,visitTypeCode:this.query.visitTypeCode,idCardNo:this.idCardNo,associateParam:t[this.associateField]};Le(i).then((function(t){if("open_page"===t.linkType)window.open(t.url,"_self");else{var i={title:"查看",configType:"showIframe",url:t.url,width:"85%"};e.$refs.diagIndex.open(i)}}))}}},Fe=xe,ke=(i("9ba1"),i("d4e7"),Object(p["a"])(Fe,Re,Pe,!1,null,"51368ab2",null)),Me=ke.exports,Ue={components:{commonPlugsTable:Me},props:["query","idCardNo","groupList"],data:function(){return{plugsType:"",moduleId:"",typeCode:""}},watch:{query:{handler:function(t,e){},deep:!0},groupList:{handler:function(t,e){this.initData()},deep:!0},idCardNo:{handler:function(t,e){}}},created:function(){this.initData()},methods:{initData:function(){console.log("初始化"),this.groupList.length>0&&(this.plugsType=this.groupList[0].pluginCode,this.moduleId=this.groupList[0].id,this.typeCode=this.groupList[0].typeCode)},setQuery:function(t){this.plugsType=t.pluginCode,this.moduleId=t.id,this.typeCode=t.typeCode}}},Be=Ue,je=(i("c930"),Object(p["a"])(Be,De,qe,!1,null,"1c941899",null)),Ve=je.exports,Ge=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"emr-cont"},[i("div",{staticClass:"emr-left"},[i("div",{staticClass:"bottom bottom1"},[t._l(t.oriList,(function(e,s){return i("div",{key:s,class:"item-list"+(e.DOCUMENT_ID==t.fileNo?" curr":""),on:{click:function(i){return t.setItem(e)}}},[i("div",{staticClass:"name"},[i("div",{class:"label"+(e.DOCUMENT_ID==t.fileNo?" curr":""),attrs:{title:e.TOPIC}},[t._v("\n            "+t._s(e.TOPIC)+"\n          ")]),t._v(" "),i("div",{staticClass:"ins"},[t._v(t._s(e.status))])]),t._v(" "),i("div",{staticClass:"time",class:e.DOCUMENT_ID==t.fileNo?" curr":""},[i("div",{staticClass:"ll"},[t._v(t._s(e.CREATE_DATE_TIME))]),t._v(" "),i("div",{staticClass:"rr"},[t._v(t._s(e.creatorName))])])])})),t._v(" "),0==t.oriList.length?i("div",{staticClass:"empty"},[t._v("暂无数据")]):t._e()],2)]),t._v(" "),i("div",{staticClass:"emr-right"},[t.emrContInfo&&"HTML"===t.emrContInfo.fileClass.toUpperCase()?i("div",{staticClass:"emr-text",attrs:{id:"emrText"}},[i("div",{staticClass:"blws",domProps:{innerHTML:t._s(t.emrContInfo.content)}})]):t._e(),t._v(" "),t.emrContInfo&&"URL"===t.emrContInfo.fileClass.toUpperCase()?i("div",{staticClass:"emr-text",attrs:{id:"emrText"}},[i("i-frame",{attrs:{src:t.emrContInfo.content}})],1):t._e(),t._v(" "),t.emrContInfo&&"TEXT"===t.emrContInfo.fileClass.toUpperCase()?i("div",{staticClass:"emr-text",attrs:{id:"emrText"}},[t._v("\n      "+t._s(t.emrContInfo.content)+"\n    ")]):t._e(),t._v(" "),i("div",{staticClass:"emr-srceen-full-btn"},[i("screen-full",{attrs:{id:"emrText"}})],1),t._v(" "),t.emrContInfo?t._e():i("div",{staticClass:"empty-icon"},[i("svg-icon",{attrs:{"icon-class":"empty-data"}})],1)])])},ze=[];function $e(t){return Object(S["a"])({url:D["a"]["getNurseList"],method:"post",data:w.a.stringify(t),headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:localStorage.getItem("Authorization")}})}function He(t){return Object(S["a"])({url:D["a"]["getNurseDetail"],method:"post",data:w.a.stringify(t),headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:localStorage.getItem("Authorization")}})}var Ye={components:{iFrame:at["a"],screenFull:ut["a"],BarChart:Gt},props:["query"],data:function(){return{activeName:"date",oriList:[],dateContList:[],typeContList:[],fileNo:"",contType:"",emrContInfo:null,selectType:"",queryParam:{},showStat:!1}},watch:{query:{handler:function(t,e){this.query&&(this.queryParam.oid=this.query.oid,this.queryParam.patientId=this.query.patientId,this.queryParam.visitId=this.query.visitId,this.queryParam.visitTypeCode=this.query.visitTypeCode,this.getList())},deep:!0}},created:function(){this.query&&(this.queryParam.oid=this.query.oid,this.queryParam.patientId=this.query.patientId,this.queryParam.visitId=this.query.visitId,this.queryParam.visitTypeCode=this.query.visitTypeCode,this.getList())},methods:{getList:function(){var t=this,e=this.queryParam.visitTypeCode+"|"+this.queryParam.patientId+"|"+this.queryParam.oid+"|"+this.queryParam.visitId+"|000";$e({ids:e}).then((function(e){t.oriList=e,t.oriList.length>0&&t.setItem(t.oriList[0])}))},getEmrInfo:function(t){var e={oid:this.queryParam.oid,patientId:this.queryParam.patientId,documentId:t,visitId:this.queryParam.visitId,visitTypeCode:this.queryParam.visitTypeCode},i=this;He(e).then((function(t){i.emrContInfo=t}))},formattedText:function(t){return t.replace(/\r\n/g,"<br>")},setItem:function(t){this.fileNo=t.DOCUMENT_ID,this.getEmrInfo(this.fileNo)},showStatFun:function(){this.showStat=!this.showStat},emrChartClickEmit:function(t,e){if(!t||"undefined"==t)return!1;var i=t.name,s=this;if(e)return s.getList(),!1;s.dateContList=s.dateContList.filter((function(t){return t.MR_CLASS_NAME==i})),s.dateContList.length>0?(s.fileNo=s.dateContList[0].DOCUMENT_ID,s.getEmrInfo(s.fileNo)):s.emrContInfo=null}}},Xe=Ye,We=(i("0096"),Object(p["a"])(Xe,Ge,ze,!1,null,"1eded57c",null)),Qe=We.exports,Je=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ocl-common"},[t.pageObj&&t.pageObj.url?i("div",{staticClass:"url-content",attrs:{id:"emrText"}},[i("i-frame",{attrs:{src:t.pageObj.url}})],1):t._e()])},Ke=[],Ze={props:["query","moduleId"],components:{iFrame:at["a"]},data:function(){return{queryForm:{},pageObj:{}}},watch:{query:{handler:function(t,e){this.query&&(this.queryForm.oid=this.query.oid,this.queryForm.patientId=this.query.patientId,this.queryForm.visitId=this.query.visitId)},deep:!0},moduleId:{handler:function(t,e){this.queryForm.moduleId=this.moduleId,this.loadingPage()}}},created:function(){this.query&&(this.queryForm.oid=this.query.oid,this.queryForm.patientId=this.query.patientId,this.queryForm.visitId=this.query.visitId),this.queryForm.moduleId=this.moduleId,this.loadingPage()},methods:{loadingPage:function(){var t=this;z(this.queryForm).then((function(e){t.pageObj=e}))}}},ti=Ze,ei=(i("bad5"),Object(p["a"])(ti,Je,Ke,!1,null,"635b5120",null)),ii=ei.exports,si=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ocl-common"},[t.pageObj&&t.pageObj.url?i("div",{staticClass:"url-content",attrs:{id:"emrText"}},[i("i-frame",{attrs:{src:t.pageObj.url}})],1):t._e()])},ai=[],ri={props:["query","moduleId"],components:{iFrame:at["a"]},data:function(){return{queryForm:{},pageObj:{}}},watch:{query:{handler:function(t,e){this.query&&(this.queryForm.oid=this.query.oid,this.queryForm.patientId=this.query.patientId,this.queryForm.visitId=this.query.visitId)},deep:!0},moduleId:{handler:function(t,e){this.queryForm.moduleId=this.moduleId,this.loadingPage()}}},created:function(){this.query&&(this.queryForm.oid=this.query.oid,this.queryForm.patientId=this.query.patientId,this.queryForm.visitId=this.query.visitId),this.queryForm.moduleId=this.moduleId,this.loadingPage()},methods:{loadingPage:function(){var t=this;$(this.queryForm).then((function(e){t.pageObj=e}))}}},ni=ri,oi=(i("5a72"),Object(p["a"])(ni,si,ai,!1,null,"44189c29",null)),li=oi.exports,ci=i("64c6"),di=["groupName"],hi=configSetting||{},ui=hi.tableGroupName,vi={components:{visitIndex:U,order:Z,lisReport:yt,operate:Rt,emrCont:Qt,pacsReport:ve,diagIndex:c["a"],publicIframe:_e["a"],commonPlugsListTable:we,commonPlugTableGroup:Ve,commonPlugsTable:Me,nurseCont:Qe,oclPlugs:ii,oclOldPlugs:li,afterExe:ci["a"]},props:["query","idCardNo","areaList","visitList"],data:function(){return{navList:[],currNav:"",currPage:1,nowIds:"",publicModuleData:{},settingsBtn:!1,theme:"",tableGroupName:ui}},watch:{query:{handler:function(t,e){this.currNav="",this.currPage=1,this.getNavList()},deep:!0},visitList:{handler:function(t,e){0==t.length&&(this.navList=[])},deep:!0},themeNew:function(t){this.theme=t}},computed:{themeNew:function(){return this.$store.state.theme}},created:function(){this.theme=localStorage.getItem("air-conditioner-theme"),this.getNavList()},mounted:function(){var t=localStorage.getItem("userRole")||"";this.settingsBtn="admin"==t},methods:{getNavList:function(){var t=this,e=this,i={oid:this.query.oid,patientId:this.query.patientId,visitId:this.query.visitId,visitTypeCode:this.query.visitTypeCode,ids:this.query.ids};this.query.ids&&(this.nowIds=this.query.ids),Object(pe["o"])(i).then((function(s){var a=[],r=(t.tableGroupName,s.filter((function(t){return"TABLE_PLUGIN"===t.pluginCode&&t.groupName})));s.forEach((function(t){!t.enable||t.visitType!==i.visitTypeCode&&"ALL"!==t.visitType&&"civ"!=t.typeCode||"TABLE_PLUGIN"==t.pluginCode&&t.groupName||a.push(t)}));var n=Object.values(t.groupByGroupName(r));e.navList=[].concat(a,n),e.navList.length>0&&!t.currNav&&(e.currNav=e.navList[0].id,e.publicModuleData={})}))},groupByGroupName:function(t){return t.reduce((function(t,e){var i=e.groupName,s=Object(L["a"])(e,di);return t[i]||(t[i]={name:i,pluginCode:s.pluginCode,typeCode:"TABLEGROUP",children:[],id:s.id}),t[i].children.push(s),t}),{})},getPage:function(t,e){return Math.floor(t/e)+1},getClass:function(t){return 0==t.count&&"首页"!=t.name?" disable_class":""},goNext:function(){this.currPage<this.getPage(this.navList.length,10)&&this.currPage++},goLast:function(){this.currPage>1&&this.currPage--},setNav:function(t){0==t.count&&"index_module"!=t.id||(this.currNav=t.id,"civ"!=t.typeCode?this.publicModuleData={pluginId:t.pluginCode||"URL_PLUGIN",moduleId:t.id,typeCode:t.typeCode,associateParam:t.associateParam,children:t.children}:this.publicModuleData={moduleId:t.id,typeCode:t.typeCode})},addNav:function(){var t={title:"就诊视图模块配置",configCode:"CIV_VISIT_MODULES",oid:this.query.oid,configType:"tableNav"};this.$refs.diagIndex.open(t)},getIconName:function(t){switch(t){case"index_module":return"sy";case"order_module":return"order";case"lab_module":return"jybg";case"exam_module":return"jcbg";case"mr_module":return"blws";case"mr_module_exe":return"blws";case"oper_module":return"ssjl";case"blood_module":return"other";case"other_module":return"other";case"testConfig":return"other";default:return"other"}}}},pi=vi,_i=(i("9b06"),Object(p["a"])(pi,T,E,!1,null,"ea251d50",null)),fi=_i.exports,mi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"serach"},[i("div",{staticClass:"serach-list"},[t._l(t.serachList,(function(e,s){return[e.show?i("div",{key:s,staticClass:"lst",style:"dates"===e.type?"width:"+100/t.rowNum*1.5+"%":"width:"+100/t.rowNum+"%"},[i("div",{class:"label"+(e.label.length>2?"":" sort")},[t._v("\n          "+t._s(e.label)+"\n        ")]),t._v(" "),"select"===e.type?i("div",{staticClass:"prop"},[i("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"+e.label},on:{change:t.serach},model:{value:t.queryForm[e.propName],callback:function(i){t.$set(t.queryForm,e.propName,i)},expression:"queryForm[item.propName]"}},t._l(e.option,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1):t._e(),t._v(" "),"input"===e.type?i("div",{staticClass:"prop"},[i("el-input",{attrs:{placeholder:"请输入"+e.label,clearable:""},on:{change:t.serach},model:{value:t.queryForm[e.propName],callback:function(i){t.$set(t.queryForm,e.propName,i)},expression:"queryForm[item.propName]"}})],1):t._e(),t._v(" "),"date"===e.type?i("div",{staticClass:"prop"},[i("el-date-picker",{attrs:{clearable:"",type:"date","prefix-icon":"el-icon-time","value-format":"yyyy-MM-dd",placeholder:"请选择"+e.label},on:{change:t.serach},model:{value:t.queryForm[e.propName],callback:function(i){t.$set(t.queryForm,e.propName,i)},expression:"queryForm[item.propName]"}})],1):t._e(),t._v(" "),"dates"===e.type?i("div",{staticClass:"prop time-begin"},[i("div",{staticClass:"st"},[i("el-date-picker",{attrs:{clearable:"",type:"date","prefix-icon":"el-icon-time","value-format":"yyyy-MM-dd",placeholder:"请选择"+e.label},on:{change:function(i){return t.serachTime(e.propName)}},model:{value:t.queryForm[e.propName+"Start"],callback:function(i){t.$set(t.queryForm,e.propName+"Start",i)},expression:"queryForm[item.propName + 'Start']"}})],1),t._v(" "),i("div",{staticClass:"center"},[t._v("-")]),t._v(" "),i("div",{staticClass:"st"},[i("el-date-picker",{attrs:{clearable:"",type:"date","prefix-icon":"el-icon-time","value-format":"yyyy-MM-dd",placeholder:"请选择"+e.label},on:{change:function(i){return t.serachTime(e.propName)}},model:{value:t.queryForm[e.propName+"End"],callback:function(i){t.$set(t.queryForm,e.propName+"End",i)},expression:"queryForm[item.propName + 'End']"}})],1)]):t._e()]):t._e()]}))],2),t._v(" "),i("div",{staticClass:"lst-but"}),t._v(" "),t.settingsBtn?i("div",{staticClass:"seting"},[i("i",{staticClass:"el-icon-setting",on:{click:t.setSerachShow}})]):t._e(),t._v(" "),i("el-dialog",{staticClass:"confirm",attrs:{title:t.title,visible:t.open,width:"700px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(e){t.open=e}}},[i("el-checkbox-group",{on:{change:t.handleCheckedCitiesChange},model:{value:t.checkedColumn,callback:function(e){t.checkedColumn=e},expression:"checkedColumn"}},t._l(t.serachList,(function(e,s){return i("el-checkbox",{key:s+"s",attrs:{label:e.label}},[t._v(t._s(e.label))])})),1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确 定")]),t._v(" "),i("el-button",{on:{click:function(e){t.open=!1}}},[t._v("取 消")])],1)],1)],1)},yi=[],Ci=(i("c5f6"),{props:{serachList:{type:Array},queryForm:{type:Object},rowNum:{type:Number,default:5}},data:function(){return{title:"配置搜索项",open:!1,checkedColumn:[],settingsBtn:!1}},watch:{serachList:{handler:function(t,e){this.serachList.length>0&&this.serachList.forEach((function(t){t.show=!0}))}},queryForm:{handler:function(t,e){},deep:!0}},created:function(){this.serachList.length>0&&this.serachList.forEach((function(t){t.show=!0}))},mounted:function(){var t=localStorage.getItem("userRole")||"";this.settingsBtn="admin"==t},methods:{setSerachShow:function(){if(this.checkedColumn=[],this.serachList.length>0){var t=this;this.serachList.forEach((function(e){e.show&&t.checkedColumn.push(e.label)}))}this.open=!0},serach:function(){this.$emit("serach",this.queryForm,"setCondit")},serachTime:function(t){(this.queryForm[t+"Start"]&&this.queryForm[t+"End"]||!this.queryForm[t+"Start"]&&!this.queryForm[t+"End"])&&this.serach(),this.$forceUpdate()},openCommon:function(){this.$emit("showCommonSerach","")},handleCheckedCitiesChange:function(){this.$forceUpdate()},confirm:function(){if(0!==this.checkedColumn.length){var t=this;this.serachList.forEach((function(e){var i=t.checkedColumn.find((function(t){return t===e.label}));e.show=!!i})),this.open=!1}else this.$message.error("至少选择一项")}}}),gi=Ci,bi=(i("9457"),i("b55f"),Object(p["a"])(gi,mi,yi,!1,null,"1804a9b4",null)),Ii=bi.exports,Ti=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"stat-template",class:t.themeName},[i("div",{class:["stat-left",1==t.currChartPage?"disableIcon":""],on:{click:function(e){return t.changeChartPage("prev")}}},[i("svg-icon",{attrs:{"icon-class":"down"}})],1),t._v(" "),i("div",{staticClass:"stat-chart-list stat-chart-list-card"},[1==t.currChartPage?i("div",{staticClass:"chart-comp-left"},[i("div",{staticClass:"chart-container chart-container-first"},[i("visitPieChart",{attrs:{chartData:t.staticData,themeName:t.themeName,lastVisit:t.lastVisit},on:{onEmit:t.onEmit}})],1)]):t._e(),t._v(" "),i("div",{staticClass:"chart-comp-right"},[1==t.currChartPage?i("div",{staticClass:"chart-comp"},[t._m(0),t._v(" "),i("div",{staticClass:"chart-container"},[i("deptPrentComp",{attrs:{idsArr:t.newCrds,themeName:t.themeName,chartData:t.staticData},on:{deptOnEmit:t.deptOnEmit}})],1)]):t._e(),t._v(" "),1==t.currChartPage?i("div",{staticClass:"chart-comp"},[t._m(1),t._v(" "),i("div",{staticClass:"chart-container"},[i("barChartByCust",{attrs:{crds:t.newCrds,themeName:t.themeName}})],1)]):t._e(),t._v(" "),i("div",{staticClass:"chart-comp",style:{display:1==t.currChartPage?"block":"none"}},[t._m(2),t._v(" "),i("div",{staticClass:"chart-container"},[i("stagePie",{attrs:{crds:t.newCrds,themeName:t.themeName}})],1)]),t._v(" "),1==t.currChartPage?i("div",{staticClass:"chart-comp"},[t._m(3),t._v(" "),i("div",{staticClass:"chart-container"},[i("sunChart",{attrs:{crds:t.newCrds,themeName:t.themeName}})],1)]):t._e(),t._v(" "),2==t.currChartPage?i("div",{staticClass:"chart-comp"},[t._m(4),t._v(" "),i("div",{staticClass:"chart-container"},[i("typePie",{attrs:{crds:t.newCrds,themeName:t.themeName}})],1)]):t._e(),t._v(" "),2==t.currChartPage?i("div",{staticClass:"chart-comp chart-comp-new"},[t._m(5),t._v(" "),i("div",{staticClass:"chart-container"},[i("emrcontentBar",{attrs:{crds:t.newCrds,themeName:t.themeName}})],1)]):t._e()])]),t._v(" "),i("div",{class:["stat-right",t.currChartPage==t.maxChartPage?"disableIcon":""],on:{click:function(e){return t.changeChartPage("next")}}},[i("svg-icon",{attrs:{"icon-class":"down"}})],1)])},Ei=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title-chart"},[i("span",{staticClass:"icon"}),t._v("科室 TOP5\n          "),i("div",{staticClass:"bottom-line"},[i("div",{staticClass:"circle"}),t._v(" "),i("div",{staticClass:"line"})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title-chart"},[i("span",{staticClass:"icon"}),t._v("疾病诊断\n          "),i("div",{staticClass:"bottom-line"},[i("div",{staticClass:"circle"}),t._v(" "),i("div",{staticClass:"line"})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title-chart"},[i("span",{staticClass:"icon"}),t._v("医嘱\n          "),i("div",{staticClass:"bottom-line"},[i("div",{staticClass:"circle"}),t._v(" "),i("div",{staticClass:"line"})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title-chart"},[i("span",{staticClass:"icon"}),t._v("检验报告\n          "),i("div",{staticClass:"bottom-line"},[i("div",{staticClass:"circle"}),t._v(" "),i("div",{staticClass:"line"})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title-chart"},[i("span",{staticClass:"icon"}),t._v("检查报告\n          "),i("div",{staticClass:"bottom-line"},[i("div",{staticClass:"circle"}),t._v(" "),i("div",{staticClass:"line"})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title-chart"},[i("span",{staticClass:"icon"}),t._v("病历文书\n          "),i("div",{staticClass:"bottom-line"},[i("div",{staticClass:"circle"}),t._v(" "),i("div",{staticClass:"line"})])])}],Li=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"visit-time-card",class:t.themeName},[i("div",{staticClass:"top"},t._l(t.chartData,(function(e,s){return i("div",{key:s,staticClass:"card",class:t.getClass(e.name)},[i("div",{staticClass:"card-warpper",on:{click:function(i){return t.chartDown(e.name,!1)}}},[i("div",{staticClass:"num",class:t.getClass(e.name)},[t._v("\n          "+t._s(e.value)),i("span",[t._v("次")])]),t._v(" "),i("div",{staticClass:"tit",class:t.getClass(e.name)},[t._v(t._s(e.name))])])])})),0),t._v(" "),i("div",{staticClass:"down"},[i("div",{staticClass:"all-visit"},[t._v("\n      全部就诊"),i("span",{staticClass:"num",on:{click:function(e){return t.chartDown("全部",!0)}}},[t._v(t._s(t.allTotal)),i("span",{staticClass:"unit"},[t._v("次")])])]),t._v(" "),i("div",{staticClass:"info"},[i("div",{staticClass:"info-item"},[i("div",{staticClass:"val"},[t._v(t._s(t.lastVisit?t.lastVisit.START_TIME:"-"))]),t._v(" "),i("div",{staticClass:"tit"},[t._v("最后就诊时间")])]),t._v(" "),i("div",{staticClass:"info-item"},[i("div",{staticClass:"val",attrs:{title:t.lastVisit.START_DEPT_NAME}},[t._v("\n          "+t._s(t.lastVisit?t.lastVisit.START_DEPT_NAME:"-")+"\n        ")]),t._v(" "),i("div",{staticClass:"tit"},[t._v("最后就诊科室")])])])])])},Oi=[],Ni={props:["chartData","lastVisit","themeName"],data:function(){return{chart:null,chartNewData:[],chartDrill:!1,allTotal:0}},watch:{chartData:{handler:function(t,e){this.chartNewData=t,this.initChart()},deep:!0},lastVisit:{handler:function(t,e){}},themeName:{handler:function(t,e){}}},mounted:function(){var t=this;this.chartNewData=this.chartData,this.$nextTick((function(){t.initChart()}))},methods:{initChart:function(){this.allTotal=this.chartNewData.reduce((function(t,e){return t+e.value}),0)},getClass:function(t){return"门诊"===t?"outp":"急诊"===t?"emer":"inp"},chartDown:function(t,e){this.$emit("onEmit",t,e)},chartDrillFn:function(t){this.chartDrill?(this.chartNewData=this.chartData.filter((function(e){if(e.name==t)return e})),this.initChart()):(this.chartNewData=this.chartData,this.initChart())}}},Si=Ni,Ai=(i("233f"),Object(p["a"])(Si,Li,Oi,!1,null,"a83c441e",null)),wi=Ai.exports,Di=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dept-chart-comp",class:t.themeName},[i("div",{staticClass:"tl"},[i("div",{staticClass:"wrapp"},t._l(t.chartDrillData,(function(e,s){return i("div",{key:s,staticClass:"chart-legend-lst"},[i("div",{staticClass:"block"},[i("div",{staticClass:"ck",style:"background:"+t.colorList[s%6]})]),t._v(" "),i("div",{staticClass:"name",attrs:{title:e.name}},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"count",style:"color:"+t.colorList[s%6]},[t._v("\n          "+t._s(e.value)+" /"+t._s(e.percent)+"\n        ")])])})),0)]),t._v(" "),i("div",{staticClass:"chart"},[i("deptPolarChart",{attrs:{chartData:t.chartData,themeName:t.themeName,maxData:t.maxData,colorList:t.colorList},on:{deptOnEmit:t.deptOnEmit}})],1)])},qi=[],Ri=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chart",staticStyle:{height:"100%",width:"100%"},attrs:{id:"deptPolarChart"}})},Pi=[],xi={props:["chartData","maxData","colorList","themeName"],data:function(){return{chart:null,chartDrill:!1,chartNewData:[]}},watch:{chartData:{handler:function(t,e){this.chartData&&(this.chartNewData=this.chartData,this.initChart())}},themeName:{handler:function(t,e){this.chartData&&(this.chartNewData=this.chartData,this.initChart())}}},mounted:function(){var t=this;this.$nextTick((function(){t.chartData&&(t.chartNewData=t.chartData,t.initChart())}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){null==this.chart&&(this.chart=this.$echarts.init(document.getElementById("deptPolarChart")));var t=[];this.chartNewData.forEach((function(e){t.push(e.name)}));var e=0;e=this.chartNewData.length>=5?5:this.chartNewData.length>=3&&this.chartNewData.length<5?10:25,this.chart.off("click"),this.chart.setOption({tooltip:{trigger:"item",formatter:function(t,e,i){return t.name+"  ("+t.value+")"}},legend:{},angleAxis:{max:this.maxData,startAngle:90,clockwise:!1,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},splitLine:{show:!1}},radiusAxis:{type:"category",data:t,z:100,axisLabel:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisLine:{show:!1}},polar:{radius:[e+"%","80%"]},series:[{type:"bar",barWidth:9,name:"",data:this.chartNewData,coordinateSystem:"polar",showBackground:!0,colorBy:"data",roundCap:!0,color:this.colorList,backgroundStyle:{color:"light"===this.themeName?"#e1e8ef":"#ffffff20"}}]}),this.chart.on("click",i);function i(t){}},chartDrillFn:function(t){this.chartDrill?(this.chartNewData=this.chartData.filter((function(e){if(e.name==t)return e})),this.initChart()):(this.chartNewData=this.chartData,this.initChart())}}},Fi=xi,ki=Object(p["a"])(Fi,Ri,Pi,!1,null,null,null),Mi=ki.exports,Ui={props:["idsArr","queryChart","themeName"],components:{deptPolarChart:Mi},data:function(){return{chartData:[],chartDrillData:[],maxData:0,colorList:["#b46bf5","#ec7c56","#5ad8c1","#28b1f9","#2861f9","#3aabff"]}},watch:{idsArr:{handler:function(t,e){this.idsArr.length>0&&this.initData()},deep:!0},queryChart:{handler:function(t,e){this.initData()},deep:!0},themeName:{handler:function(t,e){}}},mounted:function(){var t=this;this.$nextTick((function(){t.idsArr.length>0&&t.initData()}))},methods:{initData:function(){for(var t="",e=0;e<this.idsArr.length;e++){var i=this.idsArr[e].visitTypeCode+"|"+this.idsArr[e].patientId+"|"+this.idsArr[e].oid+"|"+this.idsArr[e].visitId+"|"+this.idsArr[e].accessory.visitTime;t+=i,e!==this.idsArr.length-1&&(t+=",")}var s={ids:t},a=this;Object(pe["f"])(s).then((function(t){a.chartData=t,a.chartDrillData=t;var e=0;a.chartData.forEach((function(t){e+=t.value})),a.maxData=e}))},getPrecent:function(t){return 0==this.maxData?0:100*(t/this.maxData).toFixed(1)},deptOnEmit:function(t,e){this.$emit("deptOnEmit",t,e);var i=this;i.chartDrillData=e?i.chartData:i.chartDrillData.filter((function(e){if(e.name==t)return e}))}}},Bi=Ui,ji=(i("f319"),Object(p["a"])(Bi,Di,qi,!1,null,"122f79b8",null)),Vi=ji.exports,Gi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chart",staticStyle:{height:"100%",width:"100%"},attrs:{id:"diseaseBarChart"}})},zi=[],$i=(i("55dd"),{props:["crds"],data:function(){return{chart:null,xdata:[],ydata:[],precentList:[],total:0,dataM:{timeEnd:"",timeStart:"",visitDept:"",visitStatus:"",visitTypeCode:""}}},watch:{crds:{handler:function(t,e){this.crds.length>0&&this.getChartData()}}},mounted:function(){var t=this;this.$nextTick((function(){t.crds.length>0&&t.getChartData()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{getChartData:function(){var t=this,e=this;e.crds;Object(pe["c"])(e.crds).then((function(i){console.log(i,"crds-----------------");var s={},a=new Array,r=new Array;if(0===i.code){for(var n in s=i.content,s)a.push(s[n]);r=t.sortObjectList(a)}var o=Object(Zt["a"])(r),l=[],c=[],d=[];o.length>0?(o.forEach((function(t){l.push(t.name),c.push(t.value),d.push(t.percent)})),e.xdata=l,e.ydata=c,e.precentList=d,e.total=e.ydata.reduce((function(t,e){return t+e}),0),e.initChart()):(e.xdata=l,e.ydata=c,e.precentList=d,e.total="",e.initChart())}))},sortObjectList:function(t){if(void 0==t||0==t.length)return t;t.length;var e=t.sort((function(t,e){return e.value-t.value}));return e},initChart:function(){var t=["#52e7c6","#00b4bd","#8019e5","#189cff","#8343d9"],e={b:{fontSize:12,color:"#666666",align:"left",padding:2},c:{fontSize:12,align:"center",padding:2,color:"#585f6d"}};null==this.chart&&(this.chart=this.$echarts.init(document.getElementById("diseaseBarChart")));var i=this,s=i.xdata.length,a={title:{},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"4%",right:25,bottom:"3%",top:"5%",containLabel:!0},dataZoom:[{id:"dataZoomY",show:!0,type:"slider",yAxisIndex:[0],filterMode:"filter",zoomLock:!0,handlerSize:10,width:10,height:"100%",start:1,end:function(){return s<5?s:Math.floor(100/s*5)}(),emphasis:{iconStyle:{borderColor:"#000"}}}],xAxis:{type:"value",max:i.total,axisLine:{show:!1},axisLabel:{show:!1},splitLine:{show:!1}},yAxis:[{type:"category",inverse:!0,data:i.xdata,axisLabel:{color:"#333333",fontSize:11,formatter:function(t){var e="",i=t.length,s=5,a=Math.ceil(i/s);if(i>s)for(var r=0;r<a;r++){var n="",o=r*s,l=o+s;n=r===a-1?t.substring(o,i):t.substring(o,l)+"\n",e+=n}else e=t;return e}},axisTick:{show:!1},splitLine:{show:!1},axisLine:{show:!1}}],color:t,series:[{type:"bar",barWidth:13,barGap:"0%",barCategoryGap:"0%",itemStyle:{normal:{color:function(e){return t[e.dataIndex%5]},barBorderRadius:[5,5,5,5]}},showBackground:!0,backgroundStyle:{color:"#ddeefd"},data:i.ydata,label:{show:!0,position:"right",formatter:function(t){var e=i.precentList[t.dataIndex];return""!==t.name?"{b|"+t.data+"}|{c|"+e+"}":""},rich:e}}]};i.chart.setOption(a)}}}),Hi=$i,Yi=Object(p["a"])(Hi,Gi,zi,!1,null,null,null),Xi=Yi.exports,Wi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chart",staticStyle:{height:"100%",width:"100%"},attrs:{id:"typeLineChart"}})},Qi=[],Ji=i("ade3"),Ki={props:["ids","crds"],data:function(){return{chart:null,chartData:{}}},watch:{crds:{handler:function(t,e){this.crds&&this.getChartData()}},queryChart:{handler:function(t,e){this.getChartData(),console.log(t,"watch----typeLine---chartclick-dept--111--")},deep:!0}},mounted:function(){var t=this;this.crds&&this.$nextTick((function(){t.getChartData()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{getChartData:function(){var t=this;Object(pe["p"])(this.crds).then((function(e){if(0===e.code){t.pieData=e.content;var i=e.content,s=new Array;for(var a in i)s.push({name:i[a].name,value:i[a].count});t.pieData=[].concat(s)}else t.pieData=[];t.initPieChart()}))},initChart:function(){var t,e=[],i=["#38cf8f","#01ecf2","#375ae5","#d3b43b"],s=["51,192,132","0,75,133","25, 53, 206","211,180,59"],a=this.chartData.xData;if(a.length>0)for(var r=0;r<this.chartData.seriesData.length;r++)e.push({name:this.chartData.seriesData[r].label?this.chartData.seriesData[r].label:"",data:this.chartData.seriesData[r].data,type:"line",symbol:"circle",symbolSize:0,smooth:!0,showSymbol:!1,label:{show:!0},itemStyle:{normal:{color:i[r],lineStyle:{color:i[r],width:2}}},areaStyle:{normal:{color:new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba("+s[r]+", 0.5)"},{offset:.5,color:"rgba("+s[r]+", 0.3)"},{offset:1,color:"rgba("+s[r]+", 0.1)"}],!1)}}});this.chart=this.$echarts.init(document.getElementById("typeLineChart")),this.chart.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{top:"5",padding:3,left:"center",icon:"circle",textStyle:{color:"#333",fontSize:11}},xAxis:{type:"category",boundaryGap:!1,splitLine:{show:!1},axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!0,textStyle:{color:"#444444",fontSize:"12px"},formatter:function(t){var e="",i=t.length,s=5,a=Math.ceil(i/s);if(i>s)for(var r=0;r<a;r++){var n="",o=r*s,l=o+s;n=r===a-1?t.substring(o,i):t.substring(o,l)+"\n",e+=n}else e=t;return e}},data:a},yAxis:(t={type:"value",axisLabel:{show:!0,textStyle:{color:"#444444",fontSize:"13px"}},splitLine:{show:!1},axisLine:{lineStyle:{width:1,color:"#f1f1f1"}}},Object(Ji["a"])(t,"splitLine",{lineStyle:{color:"#dddddd80"}}),Object(Ji["a"])(t,"axisTick",{show:!1}),t),grid:{left:"2%",right:"3%",bottom:"15",top:"40",containLabel:!0},series:e})},initPieChart:function(){var t;this.chart=this.$echarts.init(document.getElementById("typeLineChart")),this.chart.off("click");this.chart.setOption({title:{text:"",left:"center",top:0,textStyle:{color:"#ccc"}},tooltip:{trigger:"item"},grid:{bottom:"3%",margin:"5%"},series:[(t={name:"",type:"pie",radius:["0%","60%"],center:["50%","50%"],data:this.pieData,itemStyle:{borderColor:"#fff",borderWidth:0},color:["#7CF7FF","#00bcd4","#3fbafe","#4B73FF","#8241f4"],labelLine:{length:2},label:{alignTo:"edge",formatter:"{name|{b}}\n{time|{c} }",minMargin:5,edgeDistance:10,lineHeight:15,rich:{time:{fontSize:10,color:"#999"}}}},Object(Ji["a"])(t,"labelLine",{length:10,length2:0,maxSurfaceAngle:80}),Object(Ji["a"])(t,"labelLayout",(function(t){var e=t.labelRect.x<100,i=t.labelLinePoints;return i[2][0]=e?t.labelRect.x:t.labelRect.x+t.labelRect.width,{labelLinePoints:i}})),t)]})}}},Zi=Ki,ts=Object(p["a"])(Zi,Wi,Qi,!1,null,null,null),es=ts.exports,is=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bar-chart",class:t.themeName},[i("div",{staticClass:"bar-wap"},[i("transition-group",{staticClass:"parent",attrs:{name:"list-bar",tag:"div"}},t._l(t.visibleItems,(function(e,s){return i("div",{key:s,staticClass:"list-bar"},[i("div",{staticClass:"tit"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"barnav"},[i("div",{class:"order order"+(e.index>3?3:e.index)+(e.index<4?" border":"")},[t._v("\n            "+t._s(e.index+1)+"\n          ")]),t._v(" "),i("div",{staticClass:"bar2"},[i("span",{style:"width: "+100*(e.process?e.process-0:0)+"%;background:"+(e.index>3?t.colorList[3]:t.colorList[e.index])+";"},[i("div",{staticClass:"precent"})])]),t._v(" "),i("div",{staticClass:"sp1"},[t._v(t._s(e.value)+"("+t._s(e.percent)+")")])])])})),0)],1)])},ss=[],as={props:["crds","themeName"],data:function(){return{colorList:["linear-gradient(270deg,#f39e78, #d95173 43%)","linear-gradient(270deg,#fad075, #ed875e 43%)","linear-gradient(270deg,#4ec1d2, #3061f7 43%)","linear-gradient(270deg,#24CFC5, #001C6399 70%)"],diaseList:[],startIndex:0,timer:null}},beforeDestroy:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},watch:{crds:{handler:function(t,e){this.timer&&(clearInterval(this.timer),this.timer=null),this.crds&&(this.startIndex=0,this.getChartData())},deep:!0},themeName:{handler:function(t,e){}}},computed:{visibleItems:function(){return this.diaseList.slice(this.startIndex,this.startIndex+7)}},mounted:function(){this.timer&&(clearInterval(this.timer),this.timer=null);var t=this;this.$nextTick((function(){t.getChartData()}))},methods:{sortObjectList:function(t){if(void 0==t||0==t.length)return t;t.length;var e=t.sort((function(t,e){return e.value-t.value}));return e},getChartData:function(){var t=this;t.crds;Object(pe["c"])(t.crds).then((function(e){var i=e.content,s=[];for(var a in i)s.push(i[a]);var r=Object(Zt["a"])(t.sortObjectList(s)),n=Math.max.apply(null,r.map((function(t){return t.value})));r.forEach((function(t,e){t.process=t.value/n,t.index=e})),t.diaseList=r,t.$nextTick((function(){t.timer&&(clearInterval(t.timer),t.timer=null),t.diaseList.length<=5||t.startAutoScroll()}))}))},startAutoScroll:function(){var t=this;this.timer=setInterval((function(){t.startIndex=(t.startIndex+1)%t.diaseList.length}),2e3)}}},rs=as,ns=(i("f0a3"),Object(p["a"])(rs,is,ss,!1,null,"21ae2240",null)),os=ns.exports,ls=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chart",staticStyle:{height:"100%",width:"100%"},attrs:{id:"emrcontentBar"}})},cs=[],ds={props:["crds","themeName"],data:function(){return{chart:null,data:[],xData:[],yData:[]}},watch:{crds:{handler:function(t,e){this.getData()},deep:!0},themeName:{handler:function(t,e){this.getData()}}},mounted:function(){var t=this;this.$nextTick((function(){t.getData()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{getData:function(){var t=this;Object(pe["b"])(this.crds).then((function(e){var i=[],s=[];if(0===e.code){var a=e.content;for(var r in a)i.push(a[r].name),s.push(a[r].count);t.xData=i,t.yData=s}t.initChart()}))},initChart:function(){this.chart=this.$echarts.init(document.getElementById("emrcontentBar"));var t=[new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#4B73FF"},{offset:1,color:"#7CF7FF"}]),new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:1,color:"#14c8d4"},{offset:0,color:"#43eec6"}]),new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:1,color:"rgba(67, 176, 248, 0.2)"},{offset:0,color:"rgba(67, 237, 248,1)"}]),new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:1,color:"#00E0EE"},{offset:0,color:"#AD00FE"}])];this.chart.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{top:"10%",left:"1%",right:"1%",bottom:"4%",containLabel:!0},xAxis:{type:"category",data:this.xData,axisLabel:{color:"light"===this.themeName?"#333":"#fff",fontSize:11},axisLine:{show:!1},axisTick:{show:!1}},yAxis:{type:"value",axisLabel:{show:!1,formatter:"{value}个",color:"light"===this.themeName?"#333":"#fff",fontWeight:"bold",fontSize:13,fontFamily:"Microsoft YaHei"},splitLine:{show:!1,lineStyle:{color:["rgba(145, 127, 254, 0.5)"],width:1,type:"dashed"}}},series:[{name:"份数",type:"bar",barWidth:12,data:this.yData,itemStyle:{normal:{color:function(e){var i=e.dataIndex;return e.dataIndex>=t.length&&(i=e.dataIndex%t.length),t[i%4]},barBorderRadius:[20,20,20,20]}},label:{show:!0,color:"light"===this.themeName?"#333":"#fff",position:"top",fontSize:13}}]})}}},hs=ds,us=Object(p["a"])(hs,ls,cs,!1,null,null,null),vs=us.exports,ps=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"lab-group-chart"},[i("div",{staticClass:"legend"},t._l(t.legendList,(function(e,s){return i("div",{key:s,staticClass:"legend-item"},[i("div",{staticClass:"block",style:"background:"+e.iconStyle}),t._v(" "),i("div",{staticClass:"tit",style:"color:"+("light"===t.themeName?"#333":"#fff")},[t._v(t._s(e.name))])])})),0),t._v(" "),i("div",{staticClass:"chart"},[i("labDetailBar",{attrs:{itemData:t.itemData,themeName:t.themeName}})],1)])},_s=[],fs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chart",staticStyle:{height:"100%",width:"100%"},attrs:{id:"emrcontentBar"}})},ms=[],ys={props:["itemData","themeName"],data:function(){return{chart:null}},watch:{itemData:{handler:function(t,e){this.getData()},deep:!0},themeName:{handler:function(t,e){this.getData()}}},mounted:function(){var t=this;this.$nextTick((function(){t.getData()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{getData:function(){this.initChart()},initChart:function(){for(var t=[],e=[],i=0;i<this.itemData.length;i++)t.push(this.itemData[i].name),e.push({value:this.itemData[i].value,itemStyle:{normal:{color:this.itemData[i].color},barBorderRadius:[20,20,20,20]}});this.chart=this.$echarts.init(document.getElementById("emrcontentBar"));this.chart.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{top:"10%",left:"1%",right:"1%",bottom:"4%",containLabel:!0},xAxis:{type:"category",data:t,axisLabel:{color:"light"===this.themeName?"#333":"#fff",fontSize:11},axisLine:{show:!1},axisTick:{show:!1}},yAxis:{type:"value",axisLabel:{show:!1,formatter:"{value}个",color:"light"===this.themeName?"#333":"#fff",fontWeight:"bold",fontSize:13,fontFamily:"Microsoft YaHei"},splitLine:{show:!1,lineStyle:{color:["rgba(145, 127, 254, 0.5)"],width:1,type:"dashed"}}},series:[{name:"份数",type:"bar",barWidth:10,data:e,itemStyle:{normal:{barBorderRadius:[20,20,20,20]}},label:{show:!0,color:"light"===this.themeName?"#333":"#fff",position:"top",fontSize:13}}]})}}},Cs=ys,gs=Object(p["a"])(Cs,fs,ms,!1,null,null,null),bs=gs.exports,Is=["#476df2","#5AD8C1","#3e436e","#368c6c"],Ts={props:["themeName","crds"],components:{labDetailBar:bs},data:function(){return{chart:null,itemData:[],legendList:[]}},mounted:function(){if(this.crds){var t=this;this.$nextTick((function(){t.crds&&t.crds.length>0&&t.getChartData()}))}},watch:{crds:{handler:function(t,e){this.crds&&this.crds.length>0&&this.getChartData()},deep:!0},themeName:{handler:function(t,e){this.crds&&this.crds.length>0&&this.getChartData()}}},methods:{getChartData:function(){var t=this,e=this;Object(pe["a"])(this.crds).then((function(i){if(0===i.code){var s=i.content,a=[],r=0;for(var n in t.legendList=[],s){t.legendList.push({name:n,icon:"circle",iconStyle:Is[r]});var o=[];o=s[n].map((function(t){return{name:t.name,value:t.count,color:Is[r]}})),r++,a=[].concat(Object(Zt["a"])(a),Object(Zt["a"])(o))}e.itemData=a}}))}}},Es=Ts,Ls=(i("7e12"),Object(p["a"])(Es,ps,_s,!1,null,"12605cc1",null)),Os=Ls.exports,Ns=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chart",staticStyle:{width:"100%",height:"100%"},attrs:{id:"pacsReportShow"}})},Ss=[],As={props:["crds","themeName"],data:function(){return{chart:null,chartData:[]}},watch:{crds:{handler:function(t,e){this.statDemandByprod()},deep:!0},themeName:{handler:function(t,e){this.statDemandByprod()},deep:!0}},mounted:function(){var t=this;this.$nextTick((function(){t.statDemandByprod()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{statDemandByprod:function(){var t=this;Object(pe["d"])(this.crds).then((function(e){var i=[],s=[];if(0===e.code){var a=e.content,r=new Array;for(var n in a)r.push({name:a[n].name,value:a[n].count}),s.push(a[n].name);i=r}t.chartData=i,t.initChart(s)}))},initChart:function(t){for(var e=[],s=[],a=["#1890ff","#925af6","#ffc159","#d15cf8"],r=this.chartData,n=[{value:10,name:" "}],o=0;o<r.length;o++)e.push({value:r[o].value,name:r[o].name,itemStyle:{borderRadius:"50%",borderWidth:6,shadowBlur:10,borderColor:a[o],shadowColor:a[o]}},{value:.5,name:"",itemStyle:{normal:{label:{show:!1},labelLine:{show:!1},color:"rgba(0, 0, 0, 0)",borderColor:"rgba(0, 0, 0, 0)",borderWidth:0}}});for(var l=0;l<n.length;l++)s.push({value:n[l].value,name:n[l].name,itemStyle:{borderRadius:"50%"}});this.chart=this.$echarts.init(document.getElementById("pacsReportShow"));var c=[{name:"",type:"pie",radius:["56%","61%"],avoidLabelOverlap:!1,center:["50%","50%"],label:{show:!0,color:"#fff"},itemStyle:{normal:{label:{show:!0,position:"outside",formatter:function(t){var e=0;return e=t.value,""!==t.name?"{b|"+t.name+"} \n {hr|} \n {w|数量:} {c|"+e+"} {a|份}":""},rich:{b:{fontSize:12,color:"light"===this.themeName?"#2f044e":"#fff",padding:1,align:"center"},hr:{borderColor:"#efefef",width:"100%",borderWidth:1,height:0},w:{fontSize:12,color:"light"===this.themeName?"#333":"#ccc",align:"left",padding:1},c:{fontSize:12,align:"center",padding:1,color:"#9002f7",fontWeight:"bold"},a:{fontSize:12,align:"center",padding:1,color:"#53C6F2",fontWeight:"bold"}}},labelLine:{length:10,length2:10,show:!0,color:"#00ffff"}}},emphasis:{label:{show:!1,fontSize:"10"}},color:a,data:e}];this.chart.setOption({title:{top:0,text:"",subtext:""},tooltip:{trigger:"item"},legend:{show:!1,icon:"circle",type:"scroll",right:"0px",orient:"vertical",pageButtonPosition:"end",pageIconColor:"#3ba1ff",pageTextStyle:{color:"#000"},top:5,data:t,textStyle:{color:"#000",fontSize:"12px"}},series:c,graphic:[{type:"image",left:"center",top:"middle",z:100,bounding:"raw",silent:!1,style:{image:i("2220"),width:120,height:120}}]})}}},ws=As,Ds=Object(p["a"])(ws,Ns,Ss,!1,null,null,null),qs=Ds.exports,Rs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chart",staticStyle:{height:"100%",width:"100%"},attrs:{id:"ordertype_pie_chart"}})},Ps=[],xs={props:["ids","crds","themeName"],data:function(){return{chart:null,chartData:[],xData:[],yData:[],maxData:[]}},mounted:function(){var t=this;this.$nextTick((function(){t.crds&&t.crds.length>0&&t.findCharts()}))},watch:{crds:{handler:function(t,e){this.crds&&this.crds.length>0&&this.findCharts()},deep:!0},themeName:{handler:function(t,e){this.crds&&this.crds.length>0&&this.findCharts()}}},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{findCharts:function(){var t=["#7CF7FF","#4B73FF","#0017E4","#FF5EEF"],e=this;Object(pe["p"])(this.crds).then((function(i){var s=[];if(0===i.code){var a=i.content,r=new Array;for(var n in a)a[n].count>0&&r.push({name:a[n].name,value:a[n].count});s=[].concat(r);for(var o=[],l=0;l<s.length;l++)o.push({name:s[l].name,value:s[l].value,itemStyle:{color:t[l%4]}});e.chartData=o}e.initChart()}))},initChart:function(){this.chart=this.$echarts.init(document.getElementById("ordertype_pie_chart"));for(var t=0,e=0;e<this.chartData.length;e++){var i=this.chartData[e].value?this.chartData[e].value-0:0;t+=i}this.chart.setOption({legend:{icon:"circle",right:"10px",type:"scroll",pageButtonPosition:"end",pageIconColor:"#3ba1ff",pageTextStyle:{color:"light"===this.themeName?"#333":"#fff"},top:5,textStyle:{color:"light"===this.themeName?"#333":"#fff",fontSize:10}},tooltip:{trigger:"item",formatter:function(e){var i=0,s=e.value?e.value-0:0;i=(s/t*100).toFixed(0);var a='<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;"></span>';return""!==e.name?e.name+"<br />"+a+"条："+e.value+"</br>"+a+"占比："+i+"%":""}},calculable:!0,series:[{type:"pie",radius:[10,60],avoidLabelOverlap:!1,startAngle:0,center:["50%","50%"],roseType:"area",selectedMode:"single",itemStyle:{borderRadius:4},label:{normal:{show:!0,formatter:"{b}",color:"light"===this.themeName?"#333":"#fff"},emphasis:{show:!0}},labelLine:{normal:{show:!0,smooth:!1,length:5,length2:10},emphasis:{show:!0}},data:this.chartData}]})}}},Fs=xs,ks=Object(p["a"])(Fs,Rs,Ps,!1,null,null,null),Ms=ks.exports,Us={components:{visitPieChart:wi,deptPrentComp:Vi,diseaseBarChart:Xi,typeLineChart:es,barChartByCust:os,emrcontentBar:vs,sunChart:Os,typePie:qs,stagePie:Ms},props:["visitList","visitId","oid","ids","queryForm","idCardNo","themeName"],data:function(){return{staticData:[],chartParmIds:"",chartParmIdsFromDept:"",queryChart:{timeEnd:"",timeStart:"",visitDept:"",visitStatus:"",visitTypeCode:""},chartDept:"",currChartPage:1,maxChartPage:2,crds:[],newCrds:[],lastVisit:{}}},watch:{visitList:{handler:function(t,e){this.visitList.length>0&&(this.lastVisit=this.visitList[0]),this.statiscType()},deep:!0},visitId:{handler:function(t,e){this.currVisitId=this.visitId}},oid:{handler:function(t,e){}},themeName:{handler:function(t,e){}},ids:{handler:function(t,e){this.chartParmIds=t,this.chartParmIdsFromDept=t},deep:!0},queryForm:{handler:function(t,e){this.queryChart=Object(r["a"])({},t),this.getPatientCoordsFn()},deep:!0}},computed:{groupedItems:function(){var t=this.visitList.reduce((function(t,e){e.name;var i=e.VISIT_TYPE_NAME;return t[i]=t[i]||{name:i,value:0},t[i].value+=1,t}),{});return t}},created:function(){this.visitList.length>0&&(this.lastVisit=this.visitList[0]),this.getPatientCoordsFn()},mounted:function(){this.chartParmIds=this.ids,this.chartParmIdsFromDept=this.ids,this.statiscType()},methods:{statiscType:function(){this.staticData=Object.values(this.groupedItems)},onEmit:function(t,e){if(t){if(e)return this.$emit("updateVisitType",t,e),this.chartParmIds=this.ids,this.chartParmIdsFromDept=this.ids,this.queryChart.visitTypeCode="",this.getNewIdsByVisitType(""),!1;this.$emit("updateVisitType",t);var i="";i="住院"==t?"02":"01",this.chartParmIds=this.getNewIdsByVisitTypeCode(i),this.chartParmIdsFromDept=this.chartParmIds,this.getNewIdsByVisitType(i)}},deptOnEmit:function(t,e){if(t){if(e)return this.$emit("updateVisitDept",t,e),this.chartDept="",this.getNewIdsByDept(""),!1;this.$emit("updateVisitDept",t),this.chartDept=t,this.getNewIdsByDept(this.chartDept)}},getPatientCoordsFn:function(){var t=this,e={idCardNo:this.idCardNo},i=this;Object(pe["k"])(e).then((function(e){0===e.code&&(t.crds=i.filterIds(e.content.coordinates),t.newCrds=i.filterIds(e.content.coordinates))}))},filterIds:function(t){var e=this,i=[];return this.queryForm.timeStart&&(t=t.filter((function(t){return t.accessory.visitTime.split(" ")[0]>=e.queryForm.timeStart}))),this.queryForm.timeEnd&&(t=t.filter((function(t){return t.accessory.visitTime.split(" ")[0]<=e.queryForm.timeEnd}))),i=t,i},getNewIdsByDept:function(t){var e=this,i={coordinates:this.crds,deptCode:t};Object(pe["j"])(i).then((function(t){0===t.code&&(e.newCrds=t.content)}))},getNewIdsByVisitType:function(t){var e=this,i={coordinates:this.crds,visitTypeCode:t};Object(pe["j"])(i).then((function(t){0===t.code&&(e.newCrds=t.content)}))},getNewIdsByVisitTypeCode:function(t){var e=this.ids.split(","),i=[];return e.forEach((function(e){var s=e.split("|")[0];t==s&&i.push(e)})),i.join(",")},changeChartPage:function(t){"prev"==t?this.currChartPage>1&&(this.currChartPage=1):"next"==t&&1==this.currChartPage&&(this.currChartPage=2)}}},Bs=Us,js=(i("3943"),Object(p["a"])(Bs,Ti,Ei,!1,null,"8c59d25a",null)),Vs=js.exports,Gs=i("f233"),zs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"serach-common"},[i("commonUseVue",{attrs:{query:t.queryForm,opionStatus:t.opionStatus,deptOption:t.deptOption,visitOption:t.visitOption},on:{serach:t.setCommonSerach,openCommon:t.openCommon}})],1)},$s=[],Hs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"group-index"},[i("div",{staticClass:"curr-condit show-serach"},[t._m(0),t._v(" "),i("div",{staticClass:"content"},[i("span",{staticClass:"condition",class:t.currConditionVal?"hasval":""},[t._v(t._s(t.currConditionVal?t.currConditionVal:"暂无选择")+"\n        "),i("div",{staticClass:"condition-detail"},t._l(t.queryForm,(function(e,s){return i("div",{key:s,staticClass:"query-list"},[t._v("\n            "+t._s(t.getPropName(e.code))+": "),i("span",[t._v(t._s(e.name))])])})),0)])])]),t._v(" "),i("dialogIndex",{ref:"dialogIndex",on:{update:t.updateCollectList}})],1)},Ys=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"left-card"},[i("div",{staticClass:"c-tit"},[t._v("\n       当前条件\n      ")])])}],Xs=i("429c"),Ws={components:{dialogIndex:Xs["a"]},props:{queryForm:{type:Array},scopeType:{type:String},serachVisitList:{type:Array},serachPatientList:{type:Array},commonUseSerach:{type:Array}},data:function(){return{showMore:!1,currConditionVal:"",currSelct:"",normalWidth:"calc(20% - 8px)",expandWidth:"calc(20% - 8px)",collectFlag:!1,conditionList:[],pageShowType:"list",simpleName:""}},watch:{queryForm:{handler:function(t,e){this.isArrayEqual(t,e)||(this.collectFlag=!1,this.dealCondition())},deep:!0}},mounted:function(){this.collectFlag=!1,this.dealCondition(),this.getCollectList();var t=this;t.$nextTick((function(){t.getWidth()}))},methods:{isArrayEqual:function(t,e){return!(!t||!e||0==t.length||0==e.length||t.length!==e.length)&&JSON.stringify(t)===JSON.stringify(e)},updateCollectList:function(){this.collectFlag=!0,this.getCollectList()},getCollectList:function(){var t=this;Object(Gs["c"])({scope:this.scopeType}).then((function(e){e&&(t.conditionList=e)}))},collect:function(){if(0!==this.queryForm.length){var t={queryForm:this.queryForm,scopeType:this.scopeType,title:"添加收藏",currConditionVal:this.currConditionVal};this.$refs.dialogIndex.open(t)}else this.$message.error("搜索条件不能为空")},uncollect:function(){var t=this,e=this.conditionList.find((function(e){return t.isArrayEqual(JSON.parse(e.request),t.queryForm)}));e&&this.deleteCollect(e.id)},deleteCollect:function(t){var e=this;Object(Gs["a"])({id:t}).then((function(t){0===t.code&&(e.$message({type:"success",message:t.msg}),e.collectFlag=!1,e.getCollectList())}))},dealCondition:function(){var t=[];if(this.queryForm.length>0?(this.queryForm.forEach((function(e){e.name&&t.push(e.name)})),this.currConditionVal=t.join("|")):this.currConditionVal="",this.conditionList&&this.conditionList.length>0){var e=this,i=this.conditionList.find((function(t){return e.isArrayEqual(JSON.parse(t.request),e.queryForm)}));i?this.collectFlag=!0:(this.currSelct="",this.collectFlag=!1)}},getPropName:function(t){var e=this.serachVisitList.find((function(e){return e.propName==t}));return e?e.label:t},getConditionStr:function(t){if(t){var e=[],i=JSON.parse(t);return i.forEach((function(t){e.push(t.name)})),e.join("|")}},removeEmptyProperties:function(t){return Object.keys(t).reduce((function(e,i){return null!==t[i]&&void 0!==t[i]&&""!==t[i]&&(e[i]=t[i]),e}),{})},setCondition:function(t,e,i){if(this.simpleName=i,this.currSelct!==t){this.collectFlag=!0,this.currSelct=t,this.$emit("updateQuery",e?JSON.parse(e):[]);var s=this;s.$nextTick((function(){s.getWidth()}))}},getWidth:function(){if(!document.getElementById("selected"))return this.normalWidth="calc(20% - 8px)",void(this.expandWidth="calc(20% - 8px)");this.expandWidth="auto";var t=this;t.$nextTick((function(){var e=document.getElementById("selected").offsetWidth,i=(document.getElementById("parentCont").offsetWidth-40)/5;e<i?(t.normalWidth="calc(20% - 8px)",t.expandWidth="calc(20% - 8px)"):t.normalWidth="calc(25% - ("+(e+40)/4+"px))"}))}}},Qs=Ws,Js=(i("0792"),Object(p["a"])(Qs,Hs,Ys,!1,null,"10a0a3eb",null)),Ks=Js.exports,Zs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"common-use"},[i("div",{staticClass:"condition-list"},[i("div",{staticClass:"lab-tit"},[t._v("常用搜索")]),t._v(" "),i("div",{staticClass:"list"},[i("div",{staticClass:"ltit"},[t._v("就诊日期")]),t._v(" "),i("div",{staticClass:"lcont time-between"},[i("div",{staticClass:"st"},[i("el-date-picker",{attrs:{clearable:"",type:"date","prefix-icon":"el-icon-time","value-format":"yyyy-MM-dd",placeholder:"请选择开始时间"},on:{change:function(e){return t.excSerach("timeStart")}},model:{value:t.queryForm.timeStart,callback:function(e){t.$set(t.queryForm,"timeStart",e)},expression:"queryForm.timeStart"}})],1),t._v(" "),i("div",{staticClass:"center"},[t._v("-")]),t._v(" "),i("div",{staticClass:"st"},[i("el-date-picker",{attrs:{clearable:"",type:"date","prefix-icon":"el-icon-time","value-format":"yyyy-MM-dd",placeholder:"请选择结束时间"},on:{change:function(e){return t.excSerach("timeEnd")}},model:{value:t.queryForm.timeEnd,callback:function(e){t.$set(t.queryForm,"timeEnd",e)},expression:"queryForm.timeEnd"}})],1)])]),t._v(" "),i("div",{staticClass:"list"},[i("div",{staticClass:"lcont time-card"},t._l(t.listTime,(function(e,s){return i("div",{key:s,class:"card"+(t.timeType===e.value?" curr":""),on:{click:function(i){return t.setType(e.value)}}},[t._v("\n          "+t._s(e.label)+"\n        ")])})),0)]),t._v(" "),i("div",{staticClass:"line"}),t._v(" "),i("div",{staticClass:"list"},[i("div",{staticClass:"ltit"},[t._v("就诊类型")]),t._v(" "),i("div",{staticClass:"lcont"},[i("el-radio-group",{model:{value:t.queryForm.visit_type,callback:function(e){t.$set(t.queryForm,"visit_type",e)},expression:"queryForm.visit_type"}},t._l(t.option,(function(e,s){return i("el-radio",{key:s,class:"type"+e.value,attrs:{label:e.value},on:{change:function(e){return t.excSerach("visit_type")}}},[t._v(t._s(e.label))])})),1)],1)]),t._v(" "),i("div",{staticClass:"line"}),t._v(" "),i("div",{staticClass:"list"},[i("div",{staticClass:"ltit"},[t._v("就诊科室")]),t._v(" "),i("div",{staticClass:"lcont"},[i("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择科室"},on:{change:function(e){return t.excSerach("visitDept")}},model:{value:t.queryForm.visitDept,callback:function(e){t.$set(t.queryForm,"visitDept",e)},expression:"queryForm.visitDept"}},t._l(t.deptList,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)])])])},ta=[],ea=(i("6b54"),{props:["query","opionStatus","visitOption","deptOption"],data:function(){return{listTime:[{label:"全部",value:"all"},{label:"近30天",value:"30"},{label:"近3月",value:"90"},{label:"近1年",value:"365"},{label:"近3年",value:"1095"}],option:[{label:"全部",value:""},{label:"门诊",value:"01"},{label:"住院",value:"02"},{label:"急诊",value:"00"}],queryForm:{},timeType:"365",deptList:[],oriDeptList:[]}},watch:{query:{handler:function(t,e){this.queryForm=this.query,this.queryForm.timeStart||this.queryForm.timeEnd||(this.timeType="all")},deep:!0},opionStatus:{handler:function(t,e){},deep:!0},visitOption:{handler:function(t,e){},deep:!0},deptOption:{handler:function(t,e){this.setDeptList()},deep:!0}},created:function(){this.queryForm=this.query,this.setType("365"),this.setDeptList()},methods:{setType:function(t){if(this.timeType=t,"all"!=t){var e=new Date,i=new Date(e);i.setDate(i.getDate()-t),this.$set(this.queryForm,"timeStart",this.formatDate(i)),this.$set(this.queryForm,"timeEnd",this.formatDate(e))}else this.$set(this.queryForm,"timeStart",""),this.$set(this.queryForm,"timeEnd","");this.excSerach("time")},formatDate:function(t){var e=t.getFullYear(),i=(t.getMonth()+1).toString().padStart(2,"0"),s=t.getDate().toString().padStart(2,"0");return"".concat(e,"-").concat(i,"-").concat(s)},excSerach:function(t){this.$emit("serach",this.queryForm,t)},openCommon:function(){this.$emit("openCommon")},setDeptList:function(){(0==this.oriDeptList.length||this.oriDeptList.length<this.deptOption.length)&&(this.oriDeptList=Object(Zt["a"])(this.deptOption)),this.deptList=this.oriDeptList}}}),ia=ea,sa=(i("c16c"),Object(p["a"])(ia,Zs,ta,!1,null,"7964062e",null)),aa=sa.exports,ra={props:["queryForm","opionStatus","visitOption","serachVisitList","conditionList","deptOption"],components:{groupCondit:Ks,commonUseVue:aa},data:function(){return{}},created:function(){},watch:{queryForm:{handler:function(t,e){},deep:!0},opionStatus:{handler:function(t,e){},deep:!0},visitOption:{handler:function(t,e){},deep:!0},deptOption:{handler:function(t,e){},deep:!0},serachVisitList:{handler:function(t,e){},deep:!0},conditionList:{handler:function(t,e){},deep:!0}},methods:{resizeEle:function(){},updateQuery:function(t){var e=this;if(t&&t.length>0){for(var i={pageNo:this.queryForm.pageNo,pageSize:this.queryForm.pageSize},s=function(){var s=t[a],r=e.serachVisitList.find((function(t){return t.propName==s.code}));if(r)if("dates"!==r.type)i[s.code]=s.value;else{var n=s.value.split("至");n.length>1?(i[s.code+"Start"]=n[0],i[s.code+"End"]=n[1]):0===s.value.indexOf("至")?i[s.code+"End"]=n[0]:i[s.code+"Start"]=n[0]}},a=0;a<t.length;a++)s();this.$emit("setSerach",i,"setCondit")}},getConfigList:function(){},setCommonSerach:function(t,e){t&&("VISIT_TIME"===e?(this.queryForm[e+"Start"]=t[e+"Start"],this.queryForm[e+"End"]=t[e+"End"]):this.queryForm[e]=t[e]),this.$emit("setSerach",this.queryForm,"setCondit")},openCommon:function(){this.$emit("openCommon","")}}},na=ra,oa=(i("e9a8"),Object(p["a"])(na,zs,$s,!1,null,"12ce1b02",null)),la=oa.exports,ca=i("27ae").Base64,da={name:"VisitView",components:{patientInfoComp:n["a"],visitDeptList:I,serach:Ii,visitInfo:fi,statChartList:Vs,serachCommon:la},data:function(){return{patientInfo:{},queryForm:{ids:"",timeStart:"",visitStatus:"",timeEnd:""},rowNum:5,serachList:[],visitList:[],visitType:"",patientId:"",initOid:"",oid:"",visitId:"",visitIdFromUrl:"",idCardNo:"",eid:"",areaList:[],query:{oid:"",patientId:"",visitId:"",visitTypeCode:""},showStat:!1,showLeftVisit:!0,opionStatus:[],serachVisitList:[],conditionList:[],visitOption:[],deptOption:[],showCommonSh:!1,themeName:""}},created:function(){this.visitType=this.decodeStr(this.$route.query.visitType),this.patientId=this.decodeStr(this.$route.query.patientId),this.initOid=this.decodeStr(this.$route.query.initOid),this.oid=this.decodeStr(this.$route.query.oid),this.visitId=this.decodeStr(this.$route.query.visitId),this.visitIdFromUrl=this.decodeStr(this.$route.query.visitId),this.eid=this.decodeStr(this.$route.query.eid),this.idCardNo=this.decodeStr(this.$route.query.idCardNo);var t=this.decodeStr(this.$route.query.convertParam);this.query={oid:this.initOid,patientId:this.patientId,visitId:this.visitId,visitTypeCode:this.visitType};var e=this.$route.query.currSys;"N"===e?"X17401871"===this.initOid&&"02"===this.visitType||"Y"===t?"replace"!==this.$route.query.from&&this.dealPatient(t):this.getPatientInfo("rpc"):(this.getPatientInfo(),this.getDiffPidsData())},mounted:function(){var t=this;console.log("visitIdFromUrl",this.visitIdFromUrl),setTimeout((function(){t.showStat=!0}),500),setTimeout((function(){t.showStat=!1}),3e3);var e=localStorage.getItem("hospitalList");e&&(this.areaList=JSON.parse(e))},computed:{updateOid:function(){return this.$store.state.updateOid}},watch:{$route:function(t,e){this.visitType=this.decodeStr(this.$route.query.visitType),this.patientId=this.decodeStr(this.$route.query.patientId),this.initOid=this.decodeStr(this.$route.query.initOid),this.oid=this.decodeStr(this.$route.query.oid),this.visitId=this.decodeStr(this.$route.query.visitId),this.eid=this.decodeStr(this.$route.query.eid),this.idCardNo=this.decodeStr(this.$route.query.idCardNo);var i=this.decodeStr(this.$route.query.convertParam);this.query={oid:this.initOid,patientId:this.patientId,visitId:this.visitId,visitTypeCode:this.visitType};var s=this.$route.query.currSys;"N"===s?"X17401871"===this.initOid&&"02"===this.visitType||"Y"===i?"replace"!==this.$route.query.from&&this.dealPatient(i):this.getPatientInfo("rpc"):(this.getPatientInfo(),this.getDiffPidsData())},updateOid:function(t){this.judgeOid(t)}},methods:{decodeStr:function(t){return t?ca.decode(t):""},formatDate:function(t,e){var i=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0");return"".concat(i,"-").concat(s,"-").concat(a)},changeTheme:function(t){this.themeName=t},judgeOid:function(t){if(console.log("过滤oid",t),"ALL"==t)this.getDiffPidsData();else{this.oid=t,this.query.oid=t;var e=this.queryForm.ids.split(","),i="";if(e.length>0){var s=e.filter((function(e){return e.indexOf(t)>-1}));i=s.join(",")}this.query.ids=i,this.queryForm.ids=i,this.getVisitList()}},dealPatient:function(t){var e={visitNo:this.decodeStr(this.$route.query.patientId),oid:this.decodeStr(this.$route.query.initOid),visitTypeCode:this.decodeStr(this.$route.query.visitType),visitId:this.decodeStr(this.$route.query.visitId)},i=this;Object(Gs["e"])(e).then((function(e){if(e){var s="";s=10!==e.length||t?e:e+"00",i.patientId=s,i.query.patientId=s,i.eid=s,i.$router.push({query:Object(r["a"])(Object(r["a"])({},i.$route.query),{},{from:"replace",patientId:ca.encode(s),convertParam:ca.encode("N")})}),i.getPatientInfo(),i.getDiffPidsData()}}))},showCommonSerach:function(){this.showCommonSh=!this.showCommonSh,this.showCommonSh&&(this.showStat=!1)},getList:function(t,e){t&&(this.$set(this.queryForm,"timeStart",t.timeStart),this.$set(this.queryForm,"visitStatus",t.visitStatus),this.$set(this.queryForm,"visitDept",t.visitDept),this.$set(this.queryForm,"timeEnd",t.timeEnd),this.$set(this.queryForm,"visitTypeCode",t.visit_type),this.$forceUpdate()),this.getVisitList(!0)},getCondictionList:function(t){var e=this.removeEmptyProperties(t);this.$delete(e,"pageNo"),this.$delete(e,"pageSize");var i=[],s=this;Object.getOwnPropertyNames(e).forEach((function(t){var a={},r=s.serachVisitList.filter((function(e){return e.propName==t||t.indexOf(e.propName)>-1}));if(0==r.length&&(r=s.serachList.filter((function(e){return e.propName==t||t.indexOf(e.propName)>-1}))),1==r.length){var n=r[0];if("select"===n.type){var o=n.option.find((function(i){return i.value==e[t]}))?n.option.find((function(i){return i.value==e[t]})).label:e[t];a.code=t,a.value=e[t],a.name=o}else if("dates"===n.type){var l=t.replaceAll("Start","");l=l.replaceAll("End",""),a.code=l;var c=e[n.propName+"Start"]+"至"+e[n.propName+"End"];a.value=c,a.name=c}else a.code=t,a.value=e[t],a.name=e[t]}i.filter((function(t){return t.code==a.code})).length>0||i.push(a)})),this.conditionList=i},removeEmptyProperties:function(t){return Object.keys(t).reduce((function(e,i){return null!==t[i]&&void 0!==t[i]&&""!==t[i]&&(e[i]=t[i]),e}),{})},updateVisitType:function(t,e){var i="";i="门诊"==t?"01":"住院"==t?"02":"急诊"==t?"00":"03",e&&(i=""),this.$set(this.queryForm,"visitTypeCode",i),this.$set(this.queryForm,"visit_type",i),this.getVisitList(!0)},updateVisitDept:function(t,e){e?this.$set(this.queryForm,"visitDept",""):this.$set(this.queryForm,"visitDept",t),this.getVisitList(!0)},setVisitId:function(t){if(t){var e=t.VISIT_TYPE_CODE+"|"+t.PATIENT_ID+"|"+t.OID+"|"+t.VISIT_ID+"|"+t.START_TIME;if(this.$store.dispatch("setIds",e),t&&(this.query.patientId!==t.PATIENT_ID||this.query.visitId!==t.VISIT_ID||this.query.visitTypeCode!==t.VISIT_TYPE_CODE||this.query.oid!==t.OID)){var i=this.visitList.find((function(e){return e.VISIT_ID==t.VISIT_ID&&e.OID==t.OID&&e.PATIENT_ID==t.PATIENT_ID&&e.VISIT_TYPE_CODE==t.VISIT_TYPE_CODE}));this.patientInfo=Object.assign({},this.patientInfo,i),i.DIAGNOSIS_NAME||(this.patientInfo.DIAGNOSIS_NAME=""),this.query.patientId=this.patientInfo.PATIENT_ID,this.query.visitId=this.patientInfo.VISIT_ID,this.query.visitTypeCode=this.patientInfo.VISIT_TYPE_CODE,this.query.oid=i.OID,this.visitId=this.patientInfo.VISIT_ID,this.$forceUpdate()}}},getDiffPidsData:function(){var t={patientId:this.patientId,idCardNo:this.idCardNo,eid:this.eid},e=this;Object(pe["h"])(t).then((function(t){e.query.ids=t.ids,e.queryForm.ids=t.ids,localStorage.setItem("ids",t.ids),e.updateOid&&"ALL"!=e.updateOid?e.judgeOid(e.updateOid):e.getVisitList()}))},setShow:function(){this.showLeftVisit=!this.showLeftVisit},setCommonSerach:function(t,e){},getVisitList:function(t){var e=this,i={ids:this.queryForm.ids,timeStart:this.queryForm.timeStart,timeEnd:this.queryForm.timeEnd,visitDept:this.queryForm.visitDept,visitStatus:this.queryForm.visitStatus,visitTypeCode:this.queryForm.visitTypeCode},s=this;Object(pe["n"])(i).then((function(t){if(s.visitList=t,s.patientInfo.VISIT_TIMES=e.visitList.length,s.visitIdFromUrl){var i=s.visitList.find((function(t){return t.VISIT_ID==s.visitIdFromUrl}));i?s.setVisitId(i):s.setVisitId(s.visitList[0]),s.patientInfo=Object.assign({},s.patientInfo,i),s.query.patientId=s.patientInfo.PATIENT_ID,s.query.visitId=s.patientInfo.VISIT_ID,s.query.visitTypeCode=s.patientInfo.VISIT_TYPE_CODE}else if(s.visitId){i=s.visitList.find((function(t){return t.VISIT_ID==s.visitId}));i||s.setVisitId(s.visitList[0]),s.patientInfo=Object.assign({},s.patientInfo,i),s.query.patientId=s.patientInfo.PATIENT_ID,s.query.visitId=s.patientInfo.VISIT_ID,s.query.visitTypeCode=s.patientInfo.VISIT_TYPE_CODE}else{s.setVisitId(s.visitList[0]);i=s.visitList[0];s.patientInfo=Object.assign({},s.patientInfo,i),s.query.patientId=s.patientInfo.PATIENT_ID,s.query.visitId=s.patientInfo.VISIT_ID,s.query.visitTypeCode=s.patientInfo.VISIT_TYPE_CODE}s.getSerachList()}))},getGroupList:function(t,e,i){var s=[];return t.forEach((function(t){var a={};a=i?{label:t[i],value:t[e]}:{label:t[e],value:t[e]};var r=s.find((function(i){return i.value==t[e]}));!r&&e&&s.push(a)})),s},enter:function(t,e){t.style.height="0",t.style.opacity="0",t.style.transition="height 0.5s ease, opacity 0.5s ease",setTimeout((function(){t.style.height=t.scrollHeight+"px",t.style.opacity="1"})),setTimeout(e,500)},leave:function(t,e){t.style.height=t.scrollHeight+"px",t.style.opacity="1",t.style.transition="height 0.5s ease, opacity 0.5s ease",requestAnimationFrame((function(){t.style.height="0",t.style.opacity="0"})),setTimeout(e,500)},enter1:function(t,e){t.style.height="0",t.style.opacity="0",t.style.transition="height 0.5s ease, opacity 0.5s ease",setTimeout((function(){t.style.height="225px",t.style.opacity="1"})),setTimeout(e,500)},leave1:function(t,e){t.style.height="225px",t.style.opacity="1",t.style.transition="height 0.5s ease, opacity 0.5s ease",requestAnimationFrame((function(){t.style.height="0",t.style.opacity="0"})),setTimeout(e,500)},getSerachList:function(){var t=this,e=[];Object(Y["d"])({configCode:"VISIT_STATUS",oid:"ALL"}).then((function(i){i&&(i.forEach((function(t){e.push({label:t.name,value:t.code})})),t.opionStatus=e)}));var i=this.getGroupList(this.visitList,"VISIT_TYPE_CODE","VISIT_TYPE_NAME");this.visitOption=i;var s=this.getGroupList(this.visitList,"START_DEPT_CODE","START_DEPT_NAME");this.deptOption=s,this.serachList=[{label:"就诊日期",propName:"time",type:"dates"},{label:"就诊状态",propName:"visitStatus",type:"select",option:e},{label:"就诊科室",propName:"visitDept",type:"select",option:s},{label:"就诊类型",propName:"visit_type",type:"select",option:i}],this.serachVisitList=[{label:"就诊类型",propName:"visit_type",type:"select",option:[{label:"住院",value:"02"},{label:"门诊",value:"01"},{label:"急诊",value:"00"},{label:"体检",value:"03"}]},{label:"就诊状态",propName:"visitStatus",type:"select",option:e},{label:"就诊时间",propName:"time",type:"dates"}]},getPatientInfo:function(t){var e={patientId:this.patientId,visitType:this.visitType,oid:this.initOid},i=this;Object(pe["m"])(e).then((function(e){i.patientInfo=e,i.patientInfo.visitType=i.visitType,"rpc"===t&&(i.idCardNo=e.ID_CARD_NO_ORIGIN,i.eid=e.EID,i.getDiffPidsData())}))},showStatFun:function(){this.showStat=!this.showStat,this.showStat&&(this.showCommonSh=!1)}}},ha=da,ua=(i("7791"),Object(p["a"])(ha,s,a,!1,null,"5a0386d2",null));e["default"]=ua.exports},"233f":function(t,e,i){"use strict";i("bae6")},"23b2":function(t,e,i){"use strict";i("e47c")},2785:function(t,e,i){},"2c04":function(t,e,i){"use strict";i("8218")},"2d7e":function(t,e,i){"use strict";i("1bf6")},"328f":function(t,e,i){"use strict";i("9967")},"33fa":function(t,e,i){},"34f1":function(t,e,i){"use strict";i("bfa6")},3943:function(t,e,i){"use strict";i("3d42")},"3c36":function(t,e,i){},"3c59":function(t,e,i){},"3d42":function(t,e,i){},"3dd6":function(t,e,i){},"429c":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{title:t.option.title,visible:t.openDialogFlag,"append-to-body":"",width:"550px","before-close":t.closeDia},on:{"update:visible":function(e){t.openDialogFlag=e}}},[t.openDialogFlag?i("div",{staticClass:"collect-form"},[i("div",{staticClass:"f-tit"},[t._v("当前条件")]),t._v(" "),i("div",{staticClass:"f-cont"},[t._v(t._s(t.option.currConditionVal))]),t._v(" "),i("div",{staticClass:"f-tit"},[t._v("名称")]),t._v(" "),i("div",{staticClass:"f-cont"},[i("el-input",{attrs:{placeholder:"请输入自定义收藏名称",clearable:""},model:{value:t.simpleName,callback:function(e){t.simpleName=e},expression:"simpleName"}})],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.collect}},[t._v("确 定")]),t._v(" "),i("el-button",{on:{click:function(e){t.openDialogFlag=!1}}},[t._v("取 消")])],1)]):t._e(),t._v(" "),i("template",{slot:"title"},[i("div",{staticClass:"avue-crud__dialog__header"},[i("span",{staticClass:"el-dialog__title"},[i("span",{staticStyle:{display:"inline-block",width:"3px",height:"20px","margin-right":"18px",float:"left","margin-top":"1px"}},[i("svg-icon",{attrs:{"icon-class":"collectGroup"}})],1),t._v("\n        "+t._s(t.option.title)+"\n      ")])])])],2)},a=[],r=i("f233"),n={data:function(){return{openDialogFlag:!1,show:!0,option:{},simpleName:""}},methods:{closeDia:function(){this.show=!1,this.openDialogFlag=!1,this.$emit("update",null)},open:function(t){this.option=t,this.simpleName="",this.openDialogFlag=!0},collect:function(){if(this.simpleName){var t={request:JSON.stringify(this.option.queryForm),scope:this.option.scopeType,simpleName:this.simpleName},e=this;Object(r["i"])(t).then((function(t){e.$message({type:"success",message:"收藏成功!"}),e.closeDia()}))}else this.$message.error("名称不能为空")}}},o=n,l=(i("23b2"),i("328f"),i("2877")),c=Object(l["a"])(o,s,a,!1,null,"4b0d9127",null);e["a"]=c.exports},"4cb0":function(t,e,i){},"504c":function(t,e,i){var s=i("9e1e"),a=i("0d58"),r=i("6821"),n=i("52a7").f;t.exports=function(t){return function(e){var i,o=r(e),l=a(o),c=l.length,d=0,h=[];while(c>d)i=l[d++],s&&!n.call(o,i)||h.push(t?[i,o[i]]:o[i]);return h}}},"516e":function(t,e,i){},"51d4":function(t,e,i){},"54d4":function(t,e,i){"use strict";i("3c59")},"5a72":function(t,e,i){"use strict";i("51d4")},"64c6":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"after-exe-show"},[i("div",{staticClass:"show-open-info"},[t._v("弹出客户端中...")]),t._v(" "),i("div",{staticClass:"mask"})])}],r=i("ade3"),n=i("f2b4"),o=Object(r["a"])({name:"AfterExeShow",props:["query","moduleData","idCardNo"],data:function(){return{}},watch:{query:{handler:function(t,e){this.openExe()},deep:!0},moduleData:{handler:function(t,e){this.openExe()},deep:!0}},methods:{openExe:function(){console.log("openExe");var t={pluginCode:this.moduleData.pluginId,moduleCode:this.moduleData.moduleId,oid:this.query.oid,paramMap:{patientId:this.query.patientId,visitId:this.query.visitId,visitTypeCode:this.query.visitTypeCode,idCardNo:this.idCardNo}};Object(n["b"])(t).then((function(t){if(t.content){for(var e="",i=t.content.paramList?t.content.paramList:[],s="",a=0;a<i.length;a++)s+=i[a],a<i.length-1&&("space"===t.content.contactType?s+=" ":s+=t.content.contactType);e=t.content.regeditName+"://"+s,window.location.href=e}}))}},mounted:function(){this.openExe()}},"watch",{}),l=o,c=(i("9605"),i("2877")),d=Object(c["a"])(l,s,a,!1,null,"6cd90632",null);e["a"]=d.exports},"669d":function(t,e,i){},"69df":function(t,e,i){},"6c28":function(t,e,i){"use strict";i("6dc5")},"6dc5":function(t,e,i){},7212:function(t,e,i){},"751c":function(t,e,i){},7791:function(t,e,i){"use strict";i("b345")},7926:function(t,e,i){"use strict";i("4cb0")},"7e12":function(t,e,i){"use strict";i("c905")},8145:function(t,e,i){},8218:function(t,e,i){},8497:function(t,e,i){},"84df":function(t,e,i){},8615:function(t,e,i){var s=i("5ca1"),a=i("504c")(!1);s(s.S,"Object",{values:function(t){return a(t)}})},"906b":function(t,e,i){"use strict";i("c494")},"929f":function(t,e,i){"use strict";i("8497")},9327:function(t,e,i){},9457:function(t,e,i){"use strict";i("2785")},9587:function(t,e,i){},"95f9":function(t,e,i){"use strict";i("021f")},9605:function(t,e,i){"use strict";i("84df")},9967:function(t,e,i){},"9b06":function(t,e,i){"use strict";i("d461")},"9ba1":function(t,e,i){"use strict";i("8145")},a1f2:function(t,e,i){},accd:function(t,e,i){"use strict";i("669d")},b345:function(t,e,i){},b41e:function(t,e,i){},b55f:function(t,e,i){"use strict";i("3dd6")},bad5:function(t,e,i){"use strict";i("751c")},bae6:function(t,e,i){},bfa6:function(t,e,i){},c16c:function(t,e,i){"use strict";i("fdec")},c494:function(t,e,i){},c905:function(t,e,i){},c930:function(t,e,i){"use strict";i("3c36")},d139:function(t,e,i){"use strict";i("9327")},d461:function(t,e,i){},d4e7:function(t,e,i){"use strict";i("516e")},d663:function(t,e,i){"use strict";i("fd64")},d956:function(t,e,i){},e075:function(t,e,i){},e2a6:function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"a",(function(){return l})),i.d(e,"c",(function(){return c}));var s=i("b775"),a=i("4328"),r=i.n(a),n=i("9247");function o(t){return Object(s["a"])({url:n["a"]["getVisitExamReports"],method:"post",data:r.a.stringify(t),headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:localStorage.getItem("Authorization")}})}function l(t){return Object(s["a"])({url:n["a"]["getExamReportDetails"],method:"post",data:r.a.stringify(t),headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:localStorage.getItem("Authorization")}})}function c(t){return Object(s["a"])({url:n["a"]["getVisitExamType"],method:"post",data:r.a.stringify(t),headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:localStorage.getItem("Authorization")}})}},e47c:function(t,e,i){},e9a8:function(t,e,i){"use strict";i("e075")},eb31:function(t,e,i){"use strict";i("69df")},f0a3:function(t,e,i){"use strict";i("b41e")},f319:function(t,e,i){"use strict";i("d956")},fa85:function(t,e,i){"use strict";i("7212")},fd64:function(t,e,i){},fdec:function(t,e,i){},fee0:function(t,e,i){}}]);