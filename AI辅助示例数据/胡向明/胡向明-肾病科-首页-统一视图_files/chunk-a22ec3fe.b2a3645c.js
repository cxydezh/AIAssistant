(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a22ec3fe"],{"042e":function(e,t,i){},"0490":function(e,t,i){},"061b":function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],style:"height:"+e.height},[i("iframe",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.src,frameborder:"no",scrolling:"auto"}})])},l=[],a={props:{src:{type:String,required:!0}},data:function(){return{height:document.documentElement.clientHeight-94.5+"px;",loading:!0,url:this.src}},mounted:function(){var e=this;setTimeout((function(){e.loading=!1}),300);var t=this;window.onresize=function(){t.height=document.documentElement.clientHeight-94.5+"px;"}}},s=a,n=i("2877"),r=Object(n["a"])(s,o,l,!1,null,null,null);t["a"]=r.exports},1387:function(e,t,i){"use strict";i("717a")},"167a":function(e,t,i){"use strict";i("daac")},"18c9":function(e,t,i){"use strict";i("7a5f")},"256d":function(e,t,i){},"2a14":function(e,t,i){"use strict";i("5c7d")},"33b6":function(e,t,i){"use strict";i("7fd3")},"46e5":function(e,t,i){"use strict";i("0490")},"57cb":function(e,t,i){"use strict";i("e246")},"5a3e":function(e,t,i){"use strict";i("256d")},"5c7d":function(e,t,i){},"6c00":function(e,t,i){"use strict";i("77e8")},"6f85":function(e,t,i){},"717a":function(e,t,i){},"72a4":function(e,t,i){"use strict";i("d396")},"77e8":function(e,t,i){},7957:function(e,t,i){"use strict";i("af3b")},"79c2":function(e,t,i){"use strict";i("6f85")},"7a5f":function(e,t,i){},"7fd3":function(e,t,i){},"8c1e":function(e,t,i){},"94a7":function(e,t,i){"use strict";i("b930")},af3b:function(e,t,i){},b930:function(e,t,i){},bbf9:function(e,t,i){"use strict";i("d884")},cc47:function(e,t,i){"use strict";i("8c1e")},d396:function(e,t,i){},d884:function(e,t,i){},daac:function(e,t,i){},dd8a:function(e,t,i){"use strict";i("042e")},e246:function(e,t,i){},f42e:function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.option.title,visible:e.openDialogFlag,"append-to-body":"",width:e.option.width?e.option.width:"65%","before-close":e.closeDia,"close-on-click-modal":!1},on:{"update:visible":function(t){e.openDialogFlag=t}}},[e.option&&"table"==e.option.configType?i("summaryConfigList",{attrs:{option:e.option}}):e._e(),e._v(" "),e.option&&"tableFee"==e.option.configType?i("summaryFeeConfigList",{attrs:{option:e.option}}):e._e(),e._v(" "),e.option&&"orderform"==e.option.configType?i("orderTypeConfig",{attrs:{option:e.option}}):e._e(),e._v(" "),e.option&&"visitform"==e.option.configType?i("visitTypeConfig",{attrs:{option:e.option}}):e._e(),e._v(" "),e.option&&"tableNav"==e.option.configType?i("indexNavConfig",{attrs:{option:e.option}}):e._e(),e._v(" "),e.option&&"columConfig"==e.option.configType?i("tableColumConfig",{attrs:{option:e.option}}):e._e(),e._v(" "),e.option&&"labModuleConfig"==e.option.configType?i("labModuleConfig",{attrs:{option:e.option}}):e._e(),e._v(" "),e.option&&"orderReportConfig"==e.option.configType?i("reportConfig",{attrs:{option:e.option}}):e._e(),e._v(" "),e.option&&"reportGroupConfig"==e.option.configType?i("reportGroupConfig",{attrs:{option:e.option}}):e._e(),e._v(" "),e.option&&"showIframe"==e.option.configType?i("plugsIframe",{attrs:{url:e.option.url}}):e._e(),e._v(" "),i("template",{slot:"title"},[i("div",{staticClass:"avue-crud__dialog__header"},[i("span",{staticClass:"el-dialog__title"},[i("span",{staticStyle:{display:"inline-block",width:"3px",height:"20px","margin-right":"15px",float:"left","margin-top":"-1px"}},[i("i",{staticClass:"el-icon-setting",staticStyle:{"font-size":"14px"}})]),e._v("\n        "+e._s(e.option.title)+"\n      ")])])])],2)},l=[],a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"summary-config-list"},[i("div",{staticClass:"add"},[i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:e.addConfig}},[e._v("新增配置")])],1),e._v(" "),i("el-table",{attrs:{data:e.tableData,stripe:"",height:"450px","row-key":"code"}},[i("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"50"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"属性名",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"code",label:"对应表字段",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"sp",on:{click:function(i){return e.handleClick(t.row)}}},[i("i",{staticClass:"el-icon-edit"}),e._v("编辑")]),e._v(" "),i("span",{staticClass:"sp",on:{click:function(i){return e.deleteConfig(t.row,t.$index)}}},[i("i",{staticClass:"el-icon-delete"}),e._v("删除")])]}}])},[i("template",{slot:"header"},[e._v(" 操作 ")])],2)],1),e._v(" "),i("el-dialog",{staticClass:"confirm",attrs:{title:e.title,visible:e.open,width:"550px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.open=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"95px"}},[i("el-form-item",{attrs:{label:"属性名称",prop:"name"}},[i("el-input",{attrs:{placeholder:"请输入属性名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"对应表字段",prop:"code"}},[i("el-input",{attrs:{placeholder:"请输入对应表字段"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.addForm}},[e._v("确 定")]),e._v(" "),i("el-button",{on:{click:function(t){e.open=!1}}},[e._v("取 消")])],1)],1)],1)},s=[],n=(i("7514"),i("7f7f"),i("f2b4")),r=i("53fe"),c=i.n(r),u={props:["option"],data:function(){return{tableData:[],query:{oid:"",configCode:""},form:{},open:!1,title:"",rules:{name:[{required:!0,message:"属性名称不能为空",trigger:"blur"}],code:[{required:!0,message:"对应表字段不能为空",trigger:"blur"}]}}},watch:{option:{handler:function(e,t){this.option&&(this.query.oid=this.option.oid,this.query.configCode=this.option.configCode,this.getConfig())},deep:!0}},mounted:function(){document.body.ondrop=function(e){e.preventDefault(),e.stopPropagation()},this.rowDrop()},created:function(){this.option&&(this.query.oid=this.option.oid,this.query.configCode=this.option.configCode,this.getConfig())},methods:{rowDrop:function(){var e=document.querySelector(".el-table__body-wrapper tbody"),t=this;c.a.create(e,{onEnd:function(e){var i=e.newIndex,o=e.oldIndex;if(i!=o){t.tableData.splice(i,0,t.tableData.splice(o,1)[0]);var l=t.tableData.slice(0);t.tableData=[],t.$nextTick((function(){var e=JSON.stringify(l),i={oid:t.query.oid,configCode:t.query.configCode,configValue:e};console.log("item",i),t.saveConfigs(i)}))}}})},getConfig:function(){var e=this;Object(n["d"])(this.query).then((function(t){if(t){var i=t;e.tableData=i}}))},addConfig:function(){this.title="新增配置",this.form={},this.open=!0},handleClick:function(e){this.title="编辑配置",this.form=Object.assign({},e),this.form.oldCode=e.code,this.open=!0},deleteConfig:function(e,t){var i=this,o=this;this.$confirm("确认要删除该属性配置吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){o.$message({type:"success",message:"删除成功!"}),o.tableData.splice(t,1);var e=JSON.stringify(i.tableData),l={oid:o.query.oid,configCode:o.query.configCode,configValue:e};o.saveConfigs(l)})).catch((function(){o.$message({type:"info",message:"已取消删除"})}))},addForm:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var i={name:e.form.name,code:e.form.code},o=e.tableData.slice();if(e.form.oldCode){var l=o.find((function(t){return t.code==e.form.oldCode}));l&&(l.code=i.code,l.name=i.name)}else o.push(i);var a=JSON.stringify(o),s={oid:e.query.oid,configCode:e.query.configCode,configValue:a};console.log("item",s),e.saveConfigs(s)}}))},saveConfigs:function(e){var t=this;Object(n["f"])(e).then((function(e){t.open=!1,t.getConfig()}))}}},f=u,p=(i("6c00"),i("33b6"),i("2877")),m=Object(p["a"])(f,a,s,!1,null,"62ac006c",null),d=m.exports,g=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"summary-config-list"},[i("div",{staticClass:"add"},[i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:e.addConfig}},[e._v("新增配置")])],1),e._v(" "),i("el-table",{attrs:{data:e.tableData,stripe:"",height:"450px","row-key":"code"}},[i("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"50"}}),e._v(" "),i("el-table-column",{attrs:{prop:"mainClass",label:"费用主分类",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"fieldCode",label:"费用明细编码",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"fieldName",label:"费用明细名称",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"sp",on:{click:function(i){return e.handleClick(t.row)}}},[i("i",{staticClass:"el-icon-edit"}),e._v("编辑")]),e._v(" "),i("span",{staticClass:"sp",on:{click:function(i){return e.deleteConfig(t.row)}}},[i("i",{staticClass:"el-icon-delete"}),e._v("删除")])]}}])},[i("template",{slot:"header"},[e._v(" 操作 ")])],2)],1),e._v(" "),i("el-dialog",{staticClass:"confirm",attrs:{title:e.title,visible:e.open,width:"550px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.open=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"105px"}},[i("el-form-item",{attrs:{label:"费用主分类",prop:"mainClass"}},[i("el-input",{attrs:{placeholder:"请输入费用主分类"},model:{value:e.form.mainClass,callback:function(t){e.$set(e.form,"mainClass",t)},expression:"form.mainClass"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"费用明细编码",prop:"fieldCode"}},[i("el-input",{attrs:{placeholder:"请输入费用明细编码"},model:{value:e.form.fieldCode,callback:function(t){e.$set(e.form,"fieldCode",t)},expression:"form.fieldCode"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"费用明细名称",prop:"fieldName"}},[i("el-input",{attrs:{placeholder:"请输入费用明细名称"},model:{value:e.form.fieldName,callback:function(t){e.$set(e.form,"fieldName",t)},expression:"form.fieldName"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.addForm}},[e._v("确 定")]),e._v(" "),i("el-button",{on:{click:function(t){e.open=!1}}},[e._v("取 消")])],1)],1)],1)},v=[],h={props:["option"],data:function(){return{tableData:[],query:{oid:"",configCode:""},form:{},open:!1,title:"",rules:{name:[{required:!0,message:"属性名称不能为空",trigger:"blur"}],code:[{required:!0,message:"对应表字段不能为空",trigger:"blur"}]}}},watch:{option:{handler:function(e,t){this.option&&(this.query.oid=this.option.oid,this.query.configCode=this.option.configCode,this.getConfig())},deep:!0}},mounted:function(){},created:function(){this.option&&(this.query.oid=this.option.oid,this.query.configCode=this.option.configCode,this.getConfig())},methods:{getConfig:function(){var e=this;Object(n["d"])(this.query).then((function(t){if(t){var i=t;e.tableData=i}}))},addConfig:function(){this.title="新增配置",this.form={},this.open=!0},handleClick:function(e){this.title="编辑配置",this.form=Object.assign({},e),this.form.oldCode=e.code,this.open=!0},deleteConfig:function(e){var t=this,i={oid:t.query.oid,configCode:t.query.configCode,code:e.code};this.$confirm("确认要删除该属性配置吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n["a"])(i).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.getConfig()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},addForm:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var i={mainClass:e.form.mainClass,fieldName:e.form.fieldName,fieldCode:e.form.fieldCode},o=e.tableData.slice();if(e.form.fieldCode){var l=o.find((function(t){return t.fieldCode==e.form.fieldCode}));l&&(l.mainClass=i.mainClass,l.fieldCode=i.fieldCode,l.fieldName=i.fieldName)}else o.push(i);var a=JSON.stringify(o),s={oid:e.query.oid,configCode:e.query.configCode,configValue:a};console.log("item",s),e.saveConfigs(s)}}))},saveConfigs:function(e){var t=this;Object(n["f"])(e).then((function(e){t.open=!1,t.getConfig()}))}}},C=h,b=(i("18c9"),i("bbf9"),Object(p["a"])(C,g,v,!1,null,"de8b13e2",null)),y=b.exports,_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"config-order"},[i("div",{staticClass:"sel-area"},[i("div",{staticClass:"left"},[i("el-radio-group",{model:{value:e.currHospitals,callback:function(t){e.currHospitals=t},expression:"currHospitals"}},e._l(e.hospitals,(function(t,o){return i("el-radio",{key:o,attrs:{label:t.code}},[e._v(e._s(t.name))])})),1)],1),e._v(" "),i("div",{staticClass:"right"},[i("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},on:{change:e.changeVisit},model:{value:e.visitType,callback:function(t){e.visitType=t},expression:"visitType"}},e._l(e.visitTypeList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),e._v(" "),i("el-form",{ref:"form",staticClass:"addform",attrs:{model:e.form,rules:e.rules,"label-width":"95px"}},[i("div",{staticClass:"add"},[i("div",{staticClass:"titles"},[i("i",{staticClass:"el-icon-setting sett"}),e._v("医嘱查询自定义过滤器配置\n      ")]),e._v(" "),i("div",{staticClass:"right"},[i("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-plus"},on:{click:e.addConfig}},[e._v("新增配置行")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.save}},[e._v("保存过滤器配置")])],1)]),e._v(" "),0==e.form.configList.length?i("div",{staticClass:"list-form"},[i("div",{staticClass:"empty"},[e._v("暂无配置")])]):e._e(),e._v(" "),e._l(e.form.configList,(function(t,o){return i("div",{key:o,staticClass:"list-form"},[i("div",{staticClass:"left"},[i("el-row",{staticClass:"mb8",attrs:{gutter:20}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"数据库字段",prop:"configList."+o+".propertyName",rules:e.rules.propertyName}},[i("el-input",{attrs:{placeholder:"请输入数据库字段"},model:{value:t.propertyName,callback:function(i){e.$set(t,"propertyName",i)},expression:"sitem.propertyName"}}),e._v(" "),i("span",[i("i",{staticClass:"el-icon-question",attrs:{title:e.option.namePlaceText}})])],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"运算符",prop:"configList."+o+".matchType",rules:e.rules.matchType}},[i("el-select",{attrs:{placeholder:"请选择运算符"},model:{value:t.matchType,callback:function(i){e.$set(t,"matchType",i)},expression:"sitem.matchType"}},e._l(e.opList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"运算值",prop:"configList."+o+".propertyValue",rules:e.rules.propertyValue}},[i("el-input",{attrs:{placeholder:"请输入运算值"},model:{value:t.propertyValue,callback:function(i){e.$set(t,"propertyValue",i)},expression:"sitem.propertyValue"}}),e._v(" "),i("span",[i("i",{staticClass:"el-icon-question",attrs:{title:e.option.valuePlaceText}})])],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"right"},[i("i",{staticClass:"el-icon-remove-outline",on:{click:function(i){return e.deleteItem(t,o)}}})])])}))],2),e._v(" "),i("el-form",{ref:"typeform",staticClass:"addform",attrs:{model:e.typeform,rules:e.rules,"label-width":"95px"}},[i("div",{staticClass:"add"},[i("div",{staticClass:"titles"},[i("i",{staticClass:"el-icon-setting sett"}),e._v("医嘱分类配置")]),e._v(" "),i("div",{staticClass:"right"},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.saveTypeConfig}},[e._v("保存分类配置")])],1)]),e._v(" "),i("el-row",{staticClass:"mb8",attrs:{gutter:20}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"医嘱分类",prop:"typeValue"}},[i("el-input",{attrs:{placeholder:"请输入医嘱分类配置"},model:{value:e.typeform.typeValue,callback:function(t){e.$set(e.typeform,"typeValue",t)},expression:"typeform.typeValue"}}),e._v(" "),i("span",[i("i",{staticClass:"el-icon-question",attrs:{title:"医嘱分类对应ORDER_CLASS_CODE字段，多个值用英文逗号分隔，如：1,2,3"}})])],1)],1)],1)],1)],1)},k=[],L={props:["option"],data:function(){return{tableData:[],visitType:"",query:{oid:"",configCode:""},visitTypeList:[{name:"门诊",value:"01"},{name:"住院",value:"02"}],hospitals:[],currHospitals:"",form:{configList:[{propertyName:""}]},typeform:{typeValue:""},rules:{propertyName:[{required:!0,message:"数据库字段不能为空",trigger:"blur"}],matchType:[{required:!0,message:"运算符不能为空",trigger:"blur"}],propertyValue:[{required:!0,message:"运算值不能为空",trigger:"blur"}]},opList:[{label:"=(等于)",value:"="},{label:"<>(不等于)",value:"<>"},{label:"in(在范围内)",value:"in"},{label:"nin(不在范围内)",value:"nin"},{label:">(大于)",value:">"},{label:">=(大于等于)",value:">="},{label:"<(小于)",value:"<"},{label:"<=(小于等于)",value:"<="},{label:"like(相似)",value:"like"},{label:"nlike(不相似)",value:"nlike"},{label:"sw(以此开始)",value:"sw"},{label:"ew(以此结尾)",value:"ew"}]}},watch:{option:{handler:function(e,t){this.option&&(this.query.oid=this.option.oid,this.query.configCode=this.option.configCode,this.visitType=this.option.visitTypeCode,this.hospitals=this.option.areaList,this.currHospitals=this.option.oid,this.changeVisit())},deep:!0}},created:function(){this.option&&(this.query.oid=this.option.oid,this.query.configCode=this.option.configCode,this.visitType=this.option.visitTypeCode,this.hospitals=this.option.areaList,this.currHospitals=this.option.oid,this.changeVisit())},methods:{getConfig:function(e){var t=this,i={oid:this.query.oid,configCode:e};Object(n["d"])(i).then((function(e){if(e){var i=e;i&&i.length>0?t.form.configList=i:t.form.configList=[{propertyName:""}]}}))},getTypeConfig:function(e){var t=this,i={oid:this.query.oid,configCode:e};Object(n["d"])(i).then((function(e){e?t.$set(t.typeform,"typeValue",0==e.length?"":e):t.$set(t.typeform,"typeValue","")}))},changeVisit:function(){var e=this.option.configCode;"02"!=this.visitType&&(e=e.replaceAll("ORDER_","ORDER_MZ_")),this.form.configCode=e;var t=this.option.configCodeType;"02"!=this.visitType&&(t=t.replaceAll("CLASS","CLASS_MZ")),this.typeform.configCode=t,this.getConfig(e),this.getTypeConfig(t)},addConfig:function(){this.form.configList.push({})},deleteItem:function(e,t){this.form.configList.splice(t,1)},save:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var i=JSON.stringify(e.form.configList),o={oid:e.currHospitals,configCode:e.form.configCode,configValue:i};console.log("item",o),e.saveConfigs(o)}}))},saveConfigs:function(e){var t=this;Object(n["f"])(e).then((function(e){t.changeVisit(),t.$message({type:"success",message:"保存成功!"})}))},saveTypeConfig:function(){var e=this;this.$refs["typeform"].validate((function(t){if(t){var i=e.typeform.typeValue,o={oid:e.currHospitals,configCode:e.typeform.configCode,configValue:i};console.log("item",o),e.saveConfigs(o)}}))}}},T=L,N=(i("79c2"),Object(p["a"])(T,_,k,!1,null,"5a72ac81",null)),w=N.exports,x=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"config-order"},[i("div",{staticClass:"sel-area"},[i("div",{staticClass:"left"},[i("el-radio-group",{model:{value:e.currHospitals,callback:function(t){e.currHospitals=t},expression:"currHospitals"}},e._l(e.hospitals,(function(t,o){return i("el-radio",{key:o,attrs:{label:t.code},on:{change:e.changeSetOid}},[e._v(e._s(t.name))])})),1)],1),e._v(" "),i("div",{staticClass:"right"},[i("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},on:{change:e.changeVisit},model:{value:e.visitType,callback:function(t){e.visitType=t},expression:"visitType"}},e._l(e.visitTypeList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),e._v(" "),i("el-form",{ref:"form",staticClass:"addform",attrs:{model:e.form,rules:e.rules,"label-width":"95px"}},[i("div",{staticClass:"add"},[i("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-plus"},on:{click:e.addConfig}},[e._v("新增配置行")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.save}},[e._v("保存过滤器配置")])],1),e._v(" "),0==e.form.configList.length?i("div",{staticClass:"list-form"},[i("div",{staticClass:"empty"},[e._v("暂无配置")])]):e._e(),e._v(" "),e._l(e.form.configList,(function(t,o){return i("div",{key:o,staticClass:"list-form"},[i("div",{staticClass:"left"},[i("el-row",{staticClass:"mb8",attrs:{gutter:20}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"数据库字段",prop:"configList."+o+".propertyName",rules:e.rules.propertyName}},[i("el-input",{attrs:{placeholder:"请输入数据库字段"},model:{value:t.propertyName,callback:function(i){e.$set(t,"propertyName",i)},expression:"sitem.propertyName"}}),e._v(" "),i("span",[i("i",{staticClass:"el-icon-question",attrs:{title:e.option.namePlaceText}})])],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"运算符",prop:"configList."+o+".matchType",rules:e.rules.matchType}},[i("el-select",{attrs:{placeholder:"请选择运算符"},model:{value:t.matchType,callback:function(i){e.$set(t,"matchType",i)},expression:"sitem.matchType"}},e._l(e.opList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"运算值",prop:"configList."+o+".propertyValue",rules:e.rules.propertyValue}},[i("el-input",{attrs:{placeholder:"请输入运算值"},model:{value:t.propertyValue,callback:function(i){e.$set(t,"propertyValue",i)},expression:"sitem.propertyValue"}}),e._v(" "),e.option.valuePlaceText?i("span",[i("i",{staticClass:"el-icon-question",attrs:{title:e.option.valuePlaceText}})]):e._e()],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"right"},[i("i",{staticClass:"el-icon-remove-outline",on:{click:function(t){return e.deleteItem(o)}}})])])}))],2)],1)},$=[],q={props:["option"],data:function(){return{tableData:[],visitType:"",visitTypeList:[{name:"门诊",value:"01"},{name:"住院",value:"02"}],query:{oid:"",configCode:""},hospitals:[],currHospitals:"",currOid:"",form:{configList:[{propertyName:""}]},rules:{propertyName:[{required:!0,message:"数据库字段不能为空",trigger:"blur"}],matchType:[{required:!0,message:"运算符不能为空",trigger:"blur"}],propertyValue:[{required:!0,message:"运算值不能为空",trigger:"blur"}]},opList:[{label:"=(等于)",value:"="},{label:"<>(不等于)",value:"<>"},{label:"in(在范围内)",value:"in"},{label:"nin(不在范围内)",value:"nin"},{label:">(大于)",value:">"},{label:">=(大于等于)",value:">="},{label:"<(小于)",value:"<"},{label:"<=(小于等于)",value:"<="},{label:"like(相似)",value:"like"},{label:"nlike(不相似)",value:"nlike"},{label:"sw(以此开始)",value:"sw"},{label:"ew(以此结尾)",value:"ew"}]}},watch:{option:{handler:function(e,t){this.option&&(this.query.oid=this.option.oid,this.query.configCode=this.option.configCode,this.visitType=this.option.visitTypeCode,this.hospitals=this.option.areaList,this.currHospitals=this.option.oid,this.changeVisit(),this.currOid=this.option.oid)},deep:!0}},created:function(){this.option&&(this.query.oid=this.option.oid,this.query.configCode=this.option.configCode,this.visitType=this.option.visitTypeCode,this.hospitals=this.option.areaList,this.currHospitals=this.option.oid,this.changeVisit(),this.currOid=this.option.oid)},methods:{getConfig:function(e){var t=this,i={oid:this.query.oid,configCode:e};Object(n["d"])(i).then((function(e){if(e){var i=e;i&&i.length>0?t.form.configList=i:t.form.configList=[{propertyName:""}]}}))},addConfig:function(){this.form.configList.push({})},deleteItem:function(e){this.form.configList.splice(e,1)},changeSetOid:function(e){console.log(e,"changeSetOid-----------------"),this.currOid=e},reset:function(){this.form={configCode:"",configList:[]},this.resetForm("form")},resetForm:function(e){this.$refs[e]&&this.$refs[e].resetFields()},save:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var i=JSON.stringify(e.form.configList),o={oid:e.currOid,configCode:e.form.configCode,configValue:i};console.log("item",o),e.saveConfigs(o)}}))},changeVisit:function(){var e=this.option.configCode;console.log("visitType",this.visitType),"02"!=this.visitType&&(e=this.option.configCodeMz),this.reset(),this.form.configCode=e,this.getConfig(e)},saveConfigs:function(e){var t=this;Object(n["f"])(e).then((function(e){t.getConfig(t.form.configCode),t.$message({type:"success",message:"保存成功!"})}))}}},O=q,I=(i("72a4"),Object(p["a"])(O,x,$,!1,null,"a7d67e1c",null)),D=I.exports,P=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"summary-config-list"},[i("div",{staticClass:"add"},[i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:e.addConfig}},[e._v("新增公共模块")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-view"},on:{click:e.viiewPublicConfig}},[e._v("查看公共插件")])],1),e._v(" "),i("el-table",{attrs:{data:e.tableData,stripe:"",height:"450px","row-key":"code"}},[i("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"50"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"菜单名称",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"typeName",label:"类型",align:"center"}}),e._v(" "),i("el-table-column",{key:"enable",attrs:{prop:"enable",label:"启用状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-switch",{on:{change:function(i){return e.handleStatusChange(t.row)}},model:{value:t.row.enable,callback:function(i){e.$set(t.row,"enable",i)},expression:"scope.row.enable"}})]}}])}),e._v("/>\n    "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"sp",on:{click:function(i){return e.handleClick(t.row)}}},[i("i",{staticClass:"el-icon-edit"}),e._v("编辑")]),e._v(" "),"civ"!=t.row.pluginCode?i("span",{staticClass:"sp",on:{click:function(i){return e.deleteConfig(t.row,t.$index)}}},[i("i",{staticClass:"el-icon-delete"}),e._v("删除")]):e._e()]}}])},[i("template",{slot:"header"},[e._v(" 操作 ")])],2)],1),e._v(" "),i("el-dialog",{staticClass:"confirm",attrs:{title:e.title,visible:e.open,width:"950px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.open=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"85px"}},["CIV_CATEGORY_MODULES"!=e.option.configCode?i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"就诊类别",prop:"visitType"}},[i("el-select",{attrs:{placeholder:"请选择就诊类别"},model:{value:e.form.visitType,callback:function(t){e.$set(e.form,"visitType",t)},expression:"form.visitType"}},e._l(e.visitTypeList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},["TABLE_PLUGIN"===e.form.pluginCode?i("el-form-item",{attrs:{label:"组合名称",prop:"groupName"}},[i("el-input",{attrs:{placeholder:"组合名称"},model:{value:e.form.groupName,callback:function(t){e.$set(e.form,"groupName",t)},expression:"form.groupName"}})],1):e._e()],1)],1):e._e(),e._v(" "),i("el-row",["CIV_CATEGORY_MODULES"!=e.option.configCode?i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务类型",prop:"pluginCode"}},[i("el-select",{ref:"pluginCodeRef",attrs:{disabled:!!e.form.oldCode,placeholder:"请选择业务类型"},on:{change:e.pluginCodeChange},model:{value:e.form.pluginCode,callback:function(t){e.$set(e.form,"pluginCode",t)},expression:"form.pluginCode"}},e._l(e.pluginList,(function(e){return i("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1):e._e(),e._v(" "),"CIV_CATEGORY_MODULES"===e.option.configCode?i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务类型",prop:"pluginCode"}},[i("el-select",{ref:"pluginCodeRef",attrs:{disabled:!(!e.form.oldCode&&"CIV_CATEGORY_MODULES"!==e.option.configCode),placeholder:"请选择业务类型"},on:{change:e.pluginCodeChange},model:{value:e.form.pluginCode,callback:function(t){e.$set(e.form,"pluginCode",t)},expression:"form.pluginCode"}},e._l(e.pluginList,(function(e){return i("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1):e._e(),e._v(" "),"EXE_PLUGIN"!=e.form.pluginCode?i("el-col",{attrs:{span:12}},[e.form.pluginCode?i("el-form-item",{attrs:{label:"渲染方式",prop:"typeCode"}},[i("el-input",{attrs:{disabled:"",placeholder:"渲染方式"},model:{value:e.form.typeCode,callback:function(t){e.$set(e.form,"typeCode",t)},expression:"form.typeCode"}})],1):e._e()],1):e._e()],1),e._v(" "),i("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[i("el-input",{attrs:{placeholder:"请输入模板名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),"URL_PLUGIN"==e.form.pluginCode?i("div",[i("el-form-item",{attrs:{label:"URL",prop:"url"}},[i("el-input",{attrs:{placeholder:"请输入URL路径地址"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"展示方式",prop:"linkType"}},[i("el-select",{attrs:{placeholder:"请选择展示方式"},model:{value:e.form.linkType,callback:function(t){e.$set(e.form,"linkType",t)},expression:"form.linkType"}},e._l(e.linkTypeList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),e._v(" "),e._l(e.form.param,(function(t,o){return i("el-form-item",{key:t.key,attrs:{label:"参数"+(o+1),prop:t.param}},[i("el-input",{staticClass:"short-input",attrs:{placeholder:"参数名"},model:{value:t.param,callback:function(i){e.$set(t,"param",i)},expression:"urlParam.param"}}),e._v(" "),i("el-input",{staticClass:"short-input",attrs:{placeholder:"对应数据库字段"},model:{value:t.column,callback:function(i){e.$set(t,"column",i)},expression:"urlParam.column"}}),e._v(" "),i("el-input",{staticClass:"short-input",attrs:{placeholder:"来源表"},model:{value:t.tableName,callback:function(i){e.$set(t,"tableName",i)},expression:"urlParam.tableName"}}),e._v(" "),i("el-button",{on:{click:function(i){return i.preventDefault(),e.removeNewUrlParam(t)}}},[e._v("删除")])],1)})),e._v(" "),i("div",{staticClass:"add-new-param"},[i("el-button",{on:{click:e.addNewUrlParam}},[e._v("新增参数")])],1)],2):e._e(),e._v(" "),"EXE_PLUGIN"==e.form.pluginCode?i("div",[i("el-form-item",{attrs:{label:"注册表名称",prop:"regeditName"}},[i("el-input",{attrs:{placeholder:"请输入注册表名称"},model:{value:e.form.regeditName,callback:function(t){e.$set(e.form,"regeditName",t)},expression:"form.regeditName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"拼接方式",prop:"contactType"}},[i("el-select",{attrs:{placeholder:"请选择参数拼接方式"},model:{value:e.form.contactType,callback:function(t){e.$set(e.form,"contactType",t)},expression:"form.contactType"}},e._l(e.contactTypeList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),e._v(" "),e._l(e.form.param,(function(t,o){return i("el-form-item",{key:t.key,attrs:{label:"参数"+(o+1),prop:t.param}},[i("el-input",{staticClass:"short-input1",attrs:{placeholder:"参数名"},model:{value:t.param,callback:function(i){e.$set(t,"param",i)},expression:"urlParam.param"}}),e._v(" "),i("el-select",{attrs:{placeholder:"请选择取值方式"},model:{value:t.valType,callback:function(i){e.$set(t,"valType",i)},expression:"urlParam.valType"}},e._l(e.valTypeList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1),e._v(" "),"static"===t.valType?i("el-input",{staticClass:"short-input1",attrs:{placeholder:"静态值"},model:{value:t.staticValue,callback:function(i){e.$set(t,"staticValue",i)},expression:"urlParam.staticValue"}}):e._e(),e._v(" "),"database"===t.valType?i("el-input",{staticClass:"short-input1",attrs:{placeholder:"对应数据库字段"},model:{value:t.column,callback:function(i){e.$set(t,"column",i)},expression:"urlParam.column"}}):e._e(),e._v(" "),"database"===t.valType?i("el-input",{staticClass:"short-input1",attrs:{placeholder:"来源表"},model:{value:t.tableName,callback:function(i){e.$set(t,"tableName",i)},expression:"urlParam.tableName"}}):e._e(),e._v(" "),i("el-button",{on:{click:function(i){return i.preventDefault(),e.removeNewUrlParam(t)}}},[e._v("删除")])],1)})),e._v(" "),i("div",{staticClass:"add-new-param"},[i("el-button",{on:{click:e.addNewUrlParam}},[e._v("新增参数")])],1)],2):e._e(),e._v(" "),"ID_CARD_NO_DES_ENCRYPT_PLUGIN"==e.form.pluginCode?i("div",[i("el-form-item",{attrs:{label:"URL",prop:"url"}},[i("el-input",{attrs:{placeholder:"请输入URL路径地址"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),e._v(" "),i("el-form-item",{key:"encryptPassword",attrs:{label:"密钥",prop:"encryptPassword"}},[i("el-input",{attrs:{placeholder:"密钥"},model:{value:e.form.encryptPassword,callback:function(t){e.$set(e.form,"encryptPassword",t)},expression:"form.encryptPassword"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"展示方式",prop:"linkType"}},[i("el-select",{attrs:{placeholder:"请选择展示方式"},model:{value:e.form.linkType,callback:function(t){e.$set(e.form,"linkType",t)},expression:"form.linkType"}},e._l(e.linkTypeList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1):e._e(),e._v(" "),"TABLE_PLUGIN"==e.form.pluginCode?i("div",[i("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[i("el-input",{attrs:{placeholder:"请输入表名"},model:{value:e.form.tableName,callback:function(t){e.$set(e.form,"tableName",t)},expression:"form.tableName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"过滤配置",prop:"filterList"}},[e.form.filterList&&0!=e.form.filterList.length?e._e():i("span",[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:function(t){return e.addItem()}}},[e._v("添加配置")])],1),e._v(" "),e._l(e.form.filterList,(function(t,o){return i("div",{key:o,staticClass:"list-form"},[i("div",{staticClass:"left"},[i("el-row",{staticClass:"mb8",attrs:{gutter:10}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"字段名",prop:"filterList."+o+".propertyName",rules:e.rules.propertyName}},[i("el-input",{attrs:{placeholder:"请输入数据库字段"},model:{value:t.propertyName,callback:function(i){e.$set(t,"propertyName",i)},expression:"sitem.propertyName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"运算符",prop:"filterList."+o+".matchType",rules:e.rules.matchType}},[i("el-select",{attrs:{placeholder:"请选择运算符"},model:{value:t.matchType,callback:function(i){e.$set(t,"matchType",i)},expression:"sitem.matchType"}},e._l(e.opList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"运算值",prop:"filterList."+o+".propertyValue",rules:e.rules.propertyValue}},[i("el-input",{attrs:{placeholder:"请输入运算值"},model:{value:t.propertyValue,callback:function(i){e.$set(t,"propertyValue",i)},expression:"sitem.propertyValue"}})],1)],1)],1)],1),e._v(" "),o===e.form.filterList.length-1?i("div",{staticClass:"right"},[i("i",{staticClass:"el-icon-circle-plus-outline",on:{click:function(t){return e.addItem()}}}),e._v(" "),i("i",{staticClass:"el-icon-remove-outline",on:{click:function(t){return e.deleteItem(o)}}})]):e._e()])}))],2),e._v(" "),i("el-form-item",{attrs:{label:"列表配置",prop:"columnConfigList"}},[0==e.form.columnConfigList.length?i("span",[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:function(t){return e.addColumnItem()}}},[e._v("添加配置")])],1):e._e(),e._v(" "),e._l(e.form.columnConfigList,(function(t,o){return i("div",{key:o+"column",staticClass:"list-form"},[i("div",{staticClass:"left"},[i("el-row",{staticClass:"mb8",attrs:{gutter:10}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"字段标题",prop:"columnConfigList."+o+".name",rules:e.rules.name}},[i("el-input",{attrs:{placeholder:"请输入字段标题"},model:{value:t.name,callback:function(i){e.$set(t,"name",i)},expression:"citem.name"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"字段名称",prop:"columnConfigList."+o+".field",rules:e.rules.field}},[i("el-input",{attrs:{placeholder:"请输入字段名称"},model:{value:t.field,callback:function(i){e.$set(t,"field",i)},expression:"citem.field"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"是否隐藏",prop:"columnConfigList."+o+".hidden",rules:e.rules.hidden}},[i("el-switch",{model:{value:t.hidden,callback:function(i){e.$set(t,"hidden",i)},expression:"citem.hidden"}})],1)],1)],1)],1),e._v(" "),o===e.form.columnConfigList.length-1?i("div",{staticClass:"right"},[i("i",{staticClass:"el-icon-circle-plus-outline",on:{click:function(t){return e.addColumnItem()}}}),e._v(" "),i("i",{staticClass:"el-icon-remove-outline",on:{click:function(t){return e.deleteColumnItem(o)}}})]):e._e()])}))],2),e._v(" "),i("el-form-item",{attrs:{label:"关联字段",prop:"associateField"}},[i("el-input",{attrs:{placeholder:"请输入关联字段"},model:{value:e.form.associateField,callback:function(t){e.$set(e.form,"associateField",t)},expression:"form.associateField"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"url配置",prop:"urlConfig"}},[i("el-row",{staticClass:"mb8",attrs:{gutter:10}},[i("el-col",{attrs:{span:7}},[i("el-form-item",{attrs:{label:"",prop:e.form.urlConfig.tableName,rules:e.rules.tableName}},[i("el-input",{attrs:{placeholder:"请输入表名"},model:{value:e.form.urlConfig.tableName,callback:function(t){e.$set(e.form.urlConfig,"tableName",t)},expression:"form.urlConfig.tableName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:7}},[i("el-form-item",{attrs:{label:"",prop:e.form.urlConfig.urlField,rules:e.rules.urlField}},[i("el-input",{attrs:{placeholder:"请输入URL字段"},model:{value:e.form.urlConfig.urlField,callback:function(t){e.$set(e.form.urlConfig,"urlField",t)},expression:"form.urlConfig.urlField"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:7}},[i("el-form-item",{attrs:{label:"",prop:e.form.urlConfig.linkType,rules:e.rules.linkType}},[i("el-select",{attrs:{placeholder:"请选择链接方式"},model:{value:e.form.urlConfig.linkType,callback:function(t){e.$set(e.form.urlConfig,"linkType",t)},expression:"form.urlConfig.linkType"}},e._l(e.linkTypeList,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1)],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"排序方式",prop:"sort"}},[i("el-select",{attrs:{placeholder:"请选择排序方式"},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}},e._l(e.sortOption,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"排序字段",prop:"sortField"}},[i("el-input",{attrs:{placeholder:"请输入排序字段"},model:{value:e.form.sortField,callback:function(t){e.$set(e.form,"sortField",t)},expression:"form.sortField"}})],1)],1)],1)],1):e._e(),e._v(" "),"LIST_URL_PLUGIN"===e.form.pluginCode||"LIST_TABLE_PLUGIN"===e.form.pluginCode?i("div",[i("el-form-item",{attrs:{label:"列表配置",prop:"listConfig"}},[i("el-row",{staticClass:"mb8 sub-form"},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"表名",prop:e.form.listConfig.tableName,rules:e.rules.tableName}},[i("el-input",{attrs:{placeholder:"请输入表名"},model:{value:e.form.listConfig.tableName,callback:function(t){e.$set(e.form.listConfig,"tableName",t)},expression:"form.listConfig.tableName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"关联字段",prop:e.form.listConfig.associateParam,rules:e.rules.associateParam}},[i("el-input",{attrs:{placeholder:"请输入关联字段"},model:{value:e.form.listConfig.associateParam,callback:function(t){e.$set(e.form.listConfig,"associateParam",t)},expression:"form.listConfig.associateParam"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"标题字段",prop:e.form.listConfig.title,rules:e.rules.title}},[i("el-input",{attrs:{placeholder:"请输入标题字段"},model:{value:e.form.listConfig.title,callback:function(t){e.$set(e.form.listConfig,"title",t)},expression:"form.listConfig.title"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"时间字段",prop:e.form.listConfig.time,rules:e.rules.time}},[i("el-input",{attrs:{placeholder:"请输入时间字段"},model:{value:e.form.listConfig.time,callback:function(t){e.$set(e.form.listConfig,"time",t)},expression:"form.listConfig.time"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"排序字段",prop:e.form.listConfig.sortColumn,rules:e.rules.sortColumn}},[i("el-input",{attrs:{placeholder:"请输入排序字段"},model:{value:e.form.listConfig.sortColumn,callback:function(t){e.$set(e.form.listConfig,"sortColumn",t)},expression:"form.listConfig.sortColumn"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"排序方式",prop:"sortType"}},[i("el-select",{attrs:{placeholder:"请选择排序方式"},model:{value:e.form.listConfig.sortType,callback:function(t){e.$set(e.form.listConfig,"sortType",t)},expression:"form.listConfig.sortType"}},e._l(e.sortOption,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"过滤配置",prop:"filterList"}},[0==e.form.listConfig.filterList.length?i("span",[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:function(t){return e.addListConfigItem()}}},[e._v("添加配置")])],1):e._e(),e._v(" "),e._l(e.form.listConfig.filterList,(function(t,o){return i("div",{key:o,staticClass:"list-form"},[i("div",{staticClass:"left"},[i("el-row",{staticClass:"mb8",attrs:{gutter:10}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"字段名",prop:"listConfig.filterList."+o+".propertyName",rules:e.rules.propertyName}},[i("el-input",{attrs:{placeholder:"请输入数据库字段"},model:{value:t.propertyName,callback:function(i){e.$set(t,"propertyName",i)},expression:"litem.propertyName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"运算符",prop:"listConfig.filterList."+o+".matchType",rules:e.rules.matchType}},[i("el-select",{attrs:{placeholder:"请选择运算符"},model:{value:t.matchType,callback:function(i){e.$set(t,"matchType",i)},expression:"litem.matchType"}},e._l(e.opList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"运算值",prop:"listConfig.filterList."+o+".propertyValue",rules:e.rules.propertyValue}},[i("el-input",{attrs:{placeholder:"请输入运算值"},model:{value:t.propertyValue,callback:function(i){e.$set(t,"propertyValue",i)},expression:"litem.propertyValue"}})],1)],1)],1)],1),e._v(" "),o===e.form.listConfig.filterList.length-1?i("div",{staticClass:"right"},[i("i",{staticClass:"el-icon-circle-plus-outline",on:{click:function(t){return e.addListConfigItem()}}}),e._v(" "),i("i",{staticClass:"el-icon-remove-outline",on:{click:function(t){return e.deleteListConfigItem(o)}}})]):e._e()])}))],2)],1)],1)],1)],1),e._v(" "),"LIST_TABLE_PLUGIN"===e.form.pluginCode?i("el-form-item",{attrs:{label:"表格配置",prop:"tableConfig"}},[i("el-row",{staticClass:"mb8 sub-form"},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"表名",prop:e.form.tableConfig.tableName,rules:e.rules.tableName}},[i("el-input",{attrs:{placeholder:"请输入表名"},model:{value:e.form.tableConfig.tableName,callback:function(t){e.$set(e.form.tableConfig,"tableName",t)},expression:"form.tableConfig.tableName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"关联字段",prop:e.form.tableConfig.associateField,rules:e.rules.associateField}},[i("el-input",{attrs:{placeholder:"请输入关联字段"},model:{value:e.form.tableConfig.associateField,callback:function(t){e.$set(e.form.tableConfig,"associateField",t)},expression:"form.tableConfig.associateField"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"排序字段",prop:e.form.tableConfig.sortField,rules:e.rules.sortField}},[i("el-input",{attrs:{placeholder:"请输入排序字段"},model:{value:e.form.tableConfig.sortField,callback:function(t){e.$set(e.form.tableConfig,"sortField",t)},expression:"form.tableConfig.sortField"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"排序方式",prop:e.form.tableConfig.sort}},[i("el-select",{attrs:{placeholder:"请选择排序方式"},model:{value:e.form.tableConfig.sort,callback:function(t){e.$set(e.form.tableConfig,"sort",t)},expression:"form.tableConfig.sort"}},e._l(e.sortOption,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"过滤配置",prop:"filterList"}},[0==e.form.tableConfig.filterList.length?i("span",[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:function(t){return e.addListTabConfigItem()}}},[e._v("添加配置")])],1):e._e(),e._v(" "),e._l(e.form.tableConfig.filterList,(function(t,o){return i("div",{key:o,staticClass:"list-form"},[i("div",{staticClass:"left"},[i("el-row",{staticClass:"mb8",attrs:{gutter:10}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"字段名",prop:"tableConfig.filterList."+o+".propertyName",rules:e.rules.propertyName}},[i("el-input",{attrs:{placeholder:"请输入数据库字段"},model:{value:t.propertyName,callback:function(i){e.$set(t,"propertyName",i)},expression:"litem.propertyName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"运算符",prop:"tableConfig.filterList."+o+".matchType",rules:e.rules.matchType}},[i("el-select",{attrs:{placeholder:"请选择运算符"},model:{value:t.matchType,callback:function(i){e.$set(t,"matchType",i)},expression:"litem.matchType"}},e._l(e.opList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"运算值",prop:"tableConfig.filterList."+o+".propertyValue",rules:e.rules.propertyValue}},[i("el-input",{attrs:{placeholder:"请输入运算值"},model:{value:t.propertyValue,callback:function(i){e.$set(t,"propertyValue",i)},expression:"litem.propertyValue"}})],1)],1)],1)],1),e._v(" "),o===e.form.tableConfig.filterList.length-1?i("div",{staticClass:"right"},[i("i",{staticClass:"el-icon-circle-plus-outline",on:{click:function(t){return e.addListTabConfigItem()}}}),e._v(" "),i("i",{staticClass:"el-icon-remove-outline",on:{click:function(t){return e.deleteListTabConfigItem(o)}}})]):e._e()])}))],2)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"列表配置",prop:"columnConfigList"}},[0==e.form.tableConfig.columnConfigList.length?i("span",[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:function(t){return e.addListTabColumnItem()}}},[e._v("添加配置")])],1):e._e(),e._v(" "),e._l(e.form.tableConfig.columnConfigList,(function(t,o){return i("div",{key:o+"column",staticClass:"list-form"},[i("div",{staticClass:"left"},[i("el-row",{staticClass:"mb8",attrs:{gutter:10}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"字段标题",prop:"tableConfig.columnConfigList."+o+".name",rules:e.rules.name}},[i("el-input",{attrs:{placeholder:"请输入字段标题"},model:{value:t.name,callback:function(i){e.$set(t,"name",i)},expression:"citem.name"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"字段名称",prop:"tableConfig.columnConfigList."+o+".field",rules:e.rules.field}},[i("el-input",{attrs:{placeholder:"请输入字段名称"},model:{value:t.field,callback:function(i){e.$set(t,"field",i)},expression:"citem.field"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"是否隐藏",prop:"tableConfig.columnConfigList."+o+".hidden",rules:e.rules.hidden}},[i("el-switch",{model:{value:t.hidden,callback:function(i){e.$set(t,"hidden",i)},expression:"citem.hidden"}})],1)],1)],1)],1),e._v(" "),o===e.form.tableConfig.columnConfigList.length-1?i("div",{staticClass:"right"},[i("i",{staticClass:"el-icon-circle-plus-outline",on:{click:function(t){return e.addListTabColumnItem()}}}),e._v(" "),i("i",{staticClass:"el-icon-remove-outline",on:{click:function(t){return e.delListTabColumnItem(o)}}})]):e._e()])}))],2)],1)],1)],1)],1):e._e(),e._v(" "),i("el-form-item",{attrs:{label:"url配置",prop:"urlConfig"}},[i("el-row",{staticClass:"mb8",attrs:{gutter:10}},[i("el-col",{attrs:{span:7}},[i("el-form-item",{attrs:{label:"",prop:e.form.urlConfig.tableName,rules:e.rules.tableName}},[i("el-input",{attrs:{placeholder:"请输入表名"},model:{value:e.form.urlConfig.tableName,callback:function(t){e.$set(e.form.urlConfig,"tableName",t)},expression:"form.urlConfig.tableName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:7}},[i("el-form-item",{attrs:{label:"",prop:e.form.urlConfig.urlField,rules:e.rules.urlField}},[i("el-input",{attrs:{placeholder:"请输入URL字段"},model:{value:e.form.urlConfig.urlField,callback:function(t){e.$set(e.form.urlConfig,"urlField",t)},expression:"form.urlConfig.urlField"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:7}},[i("el-form-item",{attrs:{label:"",prop:e.form.urlConfig.linkType}},[i("el-select",{attrs:{placeholder:"请选择链接方式"},model:{value:e.form.urlConfig.linkType,callback:function(t){e.$set(e.form.urlConfig,"linkType",t)},expression:"form.urlConfig.linkType"}},e._l(e.linkTypeList,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1)],1)],1)],1)],1):e._e()],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.addForm}},[e._v("确 定")]),e._v(" "),i("el-button",{on:{click:function(t){e.open=!1}}},[e._v("取 消")])],1)],1),e._v(" "),i("el-dialog",{staticClass:"confirm",attrs:{title:e.title,visible:e.view,"append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.view=t}}},[i("div",{staticClass:"confirm-show"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.pluginList,border:"",stripe:""}},[i("el-table-column",{attrs:{prop:"index",label:"序号",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.$index+1))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"code",label:"业务编码",width:"180"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"插件名称",width:"180"}}),e._v(" "),i("el-table-column",{attrs:{prop:"descr",label:"插件描述"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.view=!1}}},[e._v("确 定")])],1)])],1)},U=[],S=(i("55dd"),i("ac6a"),i("2909")),V=i("ade3"),E=(i("a481"),i("2423")),F=i("9247"),R={props:["option"],data:function(){return{tableData:[],query:{oid:"",configCode:""},form:{param:[{param:""}]},open:!1,view:!1,title:"",typeList:[{name:"固有模块",value:"civ"},{name:"嵌入第三方URL",value:"iframe"}],linkTypeList:[{name:"弹出URL",value:"open_page"},{name:"嵌入URL",value:"iframe"}],valTypeList:[{name:"静态值",value:"static"},{name:"数据库表",value:"database"}],contactTypeList:[{name:"|(竖线)",value:"|"},{name:",(逗号)",value:","},{name:"空格",value:"space"}],visitTypeList:[{name:"全部",value:"ALL"},{name:"门诊",value:"01"},{name:"住院",value:"02"},{name:"急诊",value:"00"},{name:"体检",value:"03"}],sortOption:[{name:"倒序",value:"desc"},{name:"正序",value:"asc"}],rules:{name:[{required:!0,message:"模块名称不能为空",trigger:"blur"}],pluginCode:[{required:!0,message:"业务模块不能为空",trigger:"blur"}],url:[{required:!0,message:"URL不能为空",trigger:"blur"}],param:[{required:!0,message:"URL不能为空",trigger:"blur"}],linkType:[{required:!0,message:"链接方式不能为空",trigger:"blur"}],encryptPassword:[{required:!0,message:"密钥不能为空",trigger:"blur"},{min:8,max:8,message:"密钥长度请设置为8位",trigger:"blur"}]},pluginList:[],moduleCode:"",opList:[{label:"=(等于)",value:"="},{label:"<>(不等于)",value:"<>"},{label:"in(在范围内)",value:"in"},{label:"nin(不在范围内)",value:"nin"},{label:">(大于)",value:">"},{label:">=(大于等于)",value:">="},{label:"<(小于)",value:"<"},{label:"<=(小于等于)",value:"<="},{label:"like(相似)",value:"like"},{label:"nlike(不相似)",value:"nlike"},{label:"sw(以此开始)",value:"sw"},{label:"ew(以此结尾)",value:"ew"}]}},watch:{option:{handler:function(e,t){this.option&&(this.query.oid=this.option.oid,this.query.configCode=this.option.configCode,this.getConfig())},deep:!0}},mounted:function(){document.body.ondrop=function(e){e.preventDefault(),e.stopPropagation()},this.rowDrop(),this.getPublicModuleList()},created:function(){this.option&&(this.query.oid=this.option.oid,this.query.configCode=this.option.configCode,this.getConfig())},methods:{rowDrop:function(){var e=document.querySelector(".el-table__body-wrapper tbody"),t=this;c.a.create(e,{onEnd:function(e){var i=e.newIndex,o=e.oldIndex;if(i!=o){t.tableData.splice(i,0,t.tableData.splice(o,1)[0]);var l=t.tableData.slice(0);t.tableData=[],t.$nextTick((function(){var e=JSON.stringify(l),i={oid:t.query.oid,configCode:t.query.configCode,configValue:e};t.saveConfigs(i)}))}}})},getConfig:function(){var e=this;Object(n["d"])(this.query).then((function(t){if(t){var i=t;i&&0!=i.length?e.tableData=i:e.tableData=e.option.configList}}))},addConfig:function(){this.title="新增配置",this.form={param:[],visitType:"ALL",type:"iframe"},"CIV_CATEGORY_MODULES"===this.option.configCode&&(this.form.pluginCode="URL_PLUGIN"),this.open=!0},viiewPublicConfig:function(){this.title="查看公共插件",this.form={},this.view=!0,0==this.pluginList.length&&this.getPublicModuleList()},handleClick:function(e){this.title="编辑配置",this.form=Object.assign({},e),this.form.oldCode=e.id,this.open=!0,this.form.pluginCode=e.pluginCode,this.form.visitType=e.visitType,"civ"!=this.form.pluginCode&&this.form.oldCode&&this.getPublicModuleSettings()},getPublicModuleSettings:function(){var e=this,t=this.form.pluginCode,i=this.form.id,o=this.getPublicModuleConfgigCode(i,t);this.query;var l={oid:this.query.oid,configCode:o};Object(n["d"])(l).then((function(t){Object.assign(e.form,t),e.form.url=t.url,e.form.linkType=t.linkType,t.encryptPassword&&(e.form.encryptPassword=t.encryptPassword),t.paramConfigList&&(e.form.param=t.paramConfigList),e.form=Object.assign({},e.form)}))},getPublicModuleConfgigCode:function(e,t){var i="";return i="URL_PLUGIN"==t?e+"_EMBED_"+t+"_CONFIG":"EXE_PLUGIN"==t||"ID_CARD_NO_DES_ENCRYPT_PLUGIN"==t?e+"_"+t+"_CONFIG":e+"_"+t.replace("_PLUGIN","_CONFIG"),i},deleteConfig:function(e,t){var i=this,o=this;this.$confirm("确认要删除"+e.name+"该属性配置吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){o.$message({type:"success",message:"删除成功!"});var e=o.tableData.splice(t,1)[0],l=JSON.stringify(o.tableData),a={oid:o.query.oid,configCode:o.query.configCode,configValue:l};o.saveConfigs(a);var s={oid:o.query.oid,configCode:""};if("CIV"==e.pluginCode)return!1;s.configCode=i.getPublicModuleConfgigCode(e.id,e.pluginCode),Object(n["a"])(s).then((function(e){e?o.$message({type:"success",message:"配置删除成功!"}):o.$message({type:"info",message:"配置删除失败!"})}))})).catch((function(){o.$message({type:"info",message:"已取消删除"})}))},handleStatusChange:function(e){var t=this,i=e.enable,o=i?"显示":"隐藏";this.$confirm("确认要"+o+"该属性配置吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$message({type:"success",message:o+"成功!"});var e=JSON.stringify(t.tableData),i={oid:t.query.oid,configCode:t.query.configCode,configValue:e};t.saveConfigs(i)})).catch((function(){e.enable=!e.enable,t.$message({type:"info",message:"已取消"})}))},addForm:function(){var e=this,t=this;this.$refs["form"].validate((function(i){if(i){var o,l=(new Date).getTime();e.moduleCode=e.form.oldCode?e.form.oldCode:l;var a=e.$refs.pluginCodeRef.selected.label,s=e.$refs.pluginCodeRef.selected.value,n=(o={name:t.form.name,pluginCode:t.form.pluginCode,typeName:a,typeCode:t.form.typeCode,id:e.form.oldCode?e.form.oldCode:l,visitType:t.form.visitType},Object(V["a"])(o,"visitType",t.form.visitType),Object(V["a"])(o,"groupName",t.form.groupName),o),r={};if("civ"!=n.pluginCode){n.count=1;var c=new Array;if("URL_PLUGIN"==n.pluginCode||"EXE_PLUGIN"==n.pluginCode){var u=Object(S["a"])(t.form.param);u.forEach((function(e){e.param.length>0&&c.push({valType:e.valType,param:e.param,column:e.column,tableName:e.tableName,staticValue:e.staticValue})})),r={moduleCode:t.moduleCode,linkType:t.form.linkType,regeditName:t.form.regeditName,contactType:t.form.contactType,url:t.form.url,paramConfigList:c,visitType:t.form.visitType}}else"ID_CARD_NO_DES_ENCRYPT_PLUGIN"==n.pluginCode?r={moduleCode:t.moduleCode,linkType:t.form.linkType,url:t.form.url,encryptPassword:t.form.encryptPassword,visitType:t.form.visitType}:"LIST_TABLE_PLUGIN"==n.pluginCode?r={listConfig:t.form.listConfig,tableConfig:t.form.tableConfig,urlConfig:t.form.urlConfig,visitType:t.form.visitType}:"TABLE_PLUGIN"==n.pluginCode?r={tableName:t.form.tableName,filterList:t.form.filterList,columnConfigList:t.form.columnConfigList,associateField:t.form.associateField,urlConfig:t.form.urlConfig,sort:t.form.sort,sortField:t.form.sortField,visitType:t.form.visitType,groupName:t.form.groupName}:"LIST_URL_PLUGIN"==n.pluginCode&&(r={listConfig:t.form.listConfig,urlConfig:t.form.urlConfig,visitType:t.form.visitType})}t.tableData=t.tableData||[];var f=t.tableData.slice();if(t.form.oldCode){var p=f.find((function(e){return e.id==t.form.id}));p&&(p.id=n.id,p.name=n.name,p.pluginCode=n.pluginCode,p.typeName=n.typeName,p.typeCode=n.typeCode,p.visitType=n.visitType,p.groupName=n.groupName)}else f.push(n);var m=JSON.stringify(f),d={oid:t.query.oid,configCode:t.query.configCode,configValue:m};t.saveConfigs(d,r,s)}}))},saveConfigs:function(e,t,i){var o=this;Object(n["f"])(e).then((function(e){void 0!=t&&o.saveModuleSettings(t,i),o.moduleCode="",o.getConfig()}))},saveModuleSettings:function(e,t){var i=this,o={oid:i.query.oid,configCode:i.moduleCode+"_EMBED_URL_PLUGIN_CONFIG",configValue:JSON.stringify(e)};o.configCode=this.getPublicModuleConfgigCode(i.moduleCode,t),Object(n["f"])(o).then((function(e){i.open=!1,i.getConfig()}))},getPublicModuleList:function(){var e=this,t={url:F["a"]["pluginQueryAll"],data:{},method:"GET"};Object(E["c"])(t).then((function(t){e.pluginList=t}))},addNewUrlParam:function(){this.form.param=this.form.param||[],this.form.param.push({param:"",key:Date.now(),column:"",tableName:""})},removeNewUrlParam:function(e){var t=this.form.param.indexOf(e);-1!==t&&this.form.param.splice(t,1)},pluginCodeChange:function(e){if(this.$set(this.form,{}),"URL_PLUGIN"==e)this.form.typeCode="URL",this.form.param=[];else if("EXE_PLUGIN"==e)this.form.typeCode="EXE",this.form.param=[];else if("ID_CARD_NO_DES_ENCRYPT_PLUGIN"==e)this.form.typeCode="URL",this.form.param=[{param:"",key:Date.now(),encryptPassword:"",name:"密钥"}];else if("TABLE_PLUGIN"==e)this.form.typeCode="TABLE",this.$set(this.form,"tableName",""),this.$set(this.form,"groupName",""),this.$set(this.form,"associateField",""),this.$set(this.form,"sort",""),this.$set(this.form,"sortField",""),this.$set(this.form,"filterList",[]),this.$set(this.form,"columnConfigList",[]),this.$set(this.form,"urlConfig",{tableName:"",urlField:"",linkType:""});else if("LIST_TABLE_PLUGIN"==e){this.form.typeCode="LIST_TABLE";var t={tableName:"",associateParam:"",title:"",time:"",filterList:[],sortColumn:"",sortType:""};this.$set(this.form,"listConfig",t),this.$set(this.form,"tableConfig",{tableName:"",filterList:[],columnConfigList:[],associateField:"",sort:"",sortField:""}),this.$set(this.form,"urlConfig",{tableName:"",urlField:"",linkType:""})}else if("LIST_URL_PLUGIN"==e){this.form.typeCode="LIST_URL";var i={tableName:"",associateParam:"",title:"",time:"",filterList:[],sortColumn:"",sortType:""};this.$set(this.form,"listConfig",i),this.$set(this.form,"urlConfig",{tableName:"",urlField:"",linkType:""})}else this.form.typeCode="URL";this.$forceUpdate()},addItem:function(){this.form.filterList.push({propertyName:"",propertyValue:"",matchType:""}),this.$forceUpdate()},addListConfigItem:function(){this.form.listConfig.filterList.push({propertyName:"",propertyValue:"",matchType:""}),this.$forceUpdate()},addListTabConfigItem:function(){this.form.tableConfig.filterList.push({propertyName:"",propertyValue:"",matchType:""}),this.$forceUpdate()},addColumnItem:function(){this.form.columnConfigList.push({name:"",field:"",hidden:!1}),this.$forceUpdate()},addListTabColumnItem:function(){this.form.tableConfig.columnConfigList.push({name:"",field:"",hidden:!1}),this.$forceUpdate()},deleteItem:function(e){this.form.filterList.splice(e,1),this.$forceUpdate()},deleteColumnItem:function(e){this.form.columnConfigList.splice(e,1),this.$forceUpdate()},deleteListConfigItem:function(e){this.form.listConfig.filterList.splice(e,1),this.$forceUpdate()},deleteListTabConfigItem:function(e){this.form.tableConfig.filterList.splice(e,1),this.$forceUpdate()},delListTabColumnItem:function(e){this.form.tableConfig.columnConfigList.splice(e,1),this.$forceUpdate()}}},j=R,G=(i("94a7"),i("167a"),Object(p["a"])(j,P,U,!1,null,"cd3e4c3c",null)),A=G.exports,M=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"table-colum-config"},[i("div",{staticClass:"add"},[i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:e.addConfig}},[e._v("新增配置")])],1),e._v(" "),i("el-table",{attrs:{data:e.tableData,stripe:"",height:"450px","row-key":"display"}},[i("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"50"}}),e._v(" "),i("el-table-column",{attrs:{prop:"display",label:"属性名",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"field",label:"对应表字段",align:"center"}}),e._v(" "),i("el-table-column",{key:"status",attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-switch",{attrs:{"active-value":"0","inactive-value":"1"},on:{change:function(i){return e.handleStatusChange(t.row)}},model:{value:t.row.status,callback:function(i){e.$set(t.row,"status",i)},expression:"scope.row.status"}})]}}])}),e._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"sp",on:{click:function(i){return e.handleClick(t.row)}}},[i("i",{staticClass:"el-icon-edit"}),e._v("编辑")]),e._v(" "),i("span",{staticClass:"sp",on:{click:function(i){return e.deleteConfig(t.row,t.$index)}}},[i("i",{staticClass:"el-icon-delete"}),e._v("删除")])]}}])},[i("template",{slot:"header"},[e._v(" 操作 ")])],2)],1),e._v(" "),i("el-dialog",{staticClass:"confirm",attrs:{title:e.title,visible:e.open,width:"550px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.open=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"95px"}},[i("el-form-item",{attrs:{label:"属性名称",prop:"display"}},[i("el-input",{attrs:{placeholder:"请输入属性名称"},model:{value:e.form.display,callback:function(t){e.$set(e.form,"display",t)},expression:"form.display"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"对应表字段",prop:"field"}},[i("el-input",{attrs:{placeholder:"请输入对应表字段"},model:{value:e.form.field,callback:function(t){e.$set(e.form,"field",t)},expression:"form.field"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.addForm}},[e._v("确 定")]),e._v(" "),i("el-button",{on:{click:function(t){e.open=!1}}},[e._v("取 消")])],1)],1)],1)},B=[],H={props:["option"],data:function(){return{tableData:[],oriListData:[],query:{oid:"",configCode:""},form:{},open:!1,title:"",rules:{display:[{required:!0,message:"属性名称不能为空",trigger:"blur"}],field:[{required:!0,message:"对应表字段不能为空",trigger:"blur"}]}}},watch:{option:{handler:function(e,t){this.option&&(this.query.oid=this.option.oid,this.query.configCode=this.option.configCode,this.getConfig())},deep:!0}},mounted:function(){document.body.ondrop=function(e){e.preventDefault(),e.stopPropagation()},this.rowDrop()},created:function(){this.option&&(this.query.oid=this.option.oid,this.query.configCode=this.option.configCode,this.getConfig())},methods:{rowDrop:function(){var e=document.querySelector(".table-colum-config .el-table__body-wrapper tbody"),t=this;c.a.create(e,{onEnd:function(e){var i=e.newIndex,o=e.oldIndex;if(i!=o){t.tableData.splice(i,0,t.tableData.splice(o,1)[0]);var l=t.tableData.slice(0);t.tableData=[],t.$nextTick((function(){var e=JSON.stringify(l),i={oid:t.query.oid,configCode:t.query.configCode,configValue:e};t.saveConfigs(i)}))}}})},getConfig:function(){var e=this.option.tableData;e.forEach((function(e){!e.hidden&&"true"!=e.hidden||"false"==e.hidden?e.status="0":e.status="1"})),this.tableData=e,this.oriListData=e},addConfig:function(){this.title="新增配置",this.form={},this.open=!0},handleClick:function(e){this.title="编辑配置",this.form=Object.assign({},e),this.form.oldCode=e.field,this.open=!0},handleStatusChange:function(e){var t=this,i="0"===e.status?"显示":"隐藏";e.hidden="0"!==e.status;var o=this;this.$confirm("确认要"+i+"该属性配置吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){o.$message({type:"success",message:i+"成功!"});var e=JSON.stringify(t.tableData),l={oid:o.query.oid,configCode:o.query.configCode,configValue:e};o.saveConfigs(l)})).catch((function(){"0"===e.status?(e.status="1",e.hidden=!0):(e.status="0",e.hidden=!1),o.$message({type:"info",message:"已取消"})}))},deleteConfig:function(e,t){var i=this,o=this;this.$confirm("确认要删除该属性配置吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){o.$message({type:"success",message:"删除成功!"}),o.tableData.splice(t,1);var e=JSON.stringify(i.tableData),l={oid:o.query.oid,configCode:o.query.configCode,configValue:e};o.saveConfigs(l)})).catch((function(){o.$message({type:"info",message:"已取消删除"})}))},addForm:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var i={display:e.form.display,field:e.form.field,hidden:!1},o=e.tableData.slice();if(e.form.oldCode){var l=o.find((function(t){return t.field==e.form.oldCode}));l&&(l.field=i.field,l.display=i.display)}else o.push(i);var a=JSON.stringify(o),s={oid:e.query.oid,configCode:e.query.configCode,configValue:a};console.log("item",s),e.saveConfigs(s)}}))},saveConfigs:function(e){var t=this;Object(n["f"])(e).then((function(e){t.open=!1,t.getConfig()}))}}},z=H,J=(i("57cb"),i("2a14"),Object(p["a"])(z,M,B,!1,null,"1e15ebb0",null)),Y=J.exports,X=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"lab-moudle-config"},[i("div",{staticClass:"add"},[i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:e.addConfig}},[e._v("新增模块")])],1),e._v(" "),i("el-table",{attrs:{data:e.tableData,stripe:"",height:"450px","row-key":"code"}},[i("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"50"}}),e._v(" "),i("el-table-column",{attrs:{prop:"moduleId",label:"模块id",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"pluginCode",label:"插件编码",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"sp",on:{click:function(i){return e.view(t.row)}}},[i("i",{staticClass:"el-icon-edit"}),e._v("查看")]),e._v(" "),"civ"!=t.row.typeCode?i("span",{staticClass:"sp",on:{click:function(i){return e.deleteConfigs(t.row,t.$index)}}},[i("i",{staticClass:"el-icon-delete"}),e._v("删除")]):e._e()]}}])},[i("template",{slot:"header"},[e._v(" 操作 ")])],2)],1),e._v(" "),i("el-dialog",{staticClass:"confirm",attrs:{title:e.title,visible:e.open,width:"650px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.open=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"85px"}},[i("el-form-item",{attrs:{label:"插件类型",prop:"pluginCode"}},[i("el-select",{attrs:{placeholder:"请选择插件类型"},model:{value:e.form.pluginCode,callback:function(t){e.$set(e.form,"pluginCode",t)},expression:"form.pluginCode"}},e._l(e.pluginList,(function(e){return i("el-option",{key:e.code,attrs:{label:e.name,value:e.code,title:e.descr}})})),1)],1),e._v(" "),"TEMPLATE_MOUNT_PLUGIN"===e.form.pluginCode?i("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[i("el-input",{attrs:{placeholder:"请输入模板名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1):e._e(),e._v(" "),"QUERY_HBASE_MOUNT_PLUGIN"===e.form.pluginCode?i("el-form-item",{attrs:{label:"模板名称",prop:"moduleName"}},[i("el-input",{attrs:{placeholder:"请输入模板名称"},model:{value:e.form.moduleName,callback:function(t){e.$set(e.form,"moduleName",t)},expression:"form.moduleName"}})],1):e._e(),e._v(" "),"TEMPLATE_MOUNT_PLUGIN"===e.form.pluginCode?i("el-form-item",{attrs:{label:"URL模板",prop:"urlTemplate"}},[i("el-input",{attrs:{placeholder:"请输入URL模板"},model:{value:e.form.urlTemplate,callback:function(t){e.$set(e.form,"urlTemplate",t)},expression:"form.urlTemplate"}})],1):e._e(),e._v(" "),"QUERY_HBASE_MOUNT_PLUGIN"===e.form.pluginCode?i("el-form-item",{attrs:{label:"URL字段",prop:"urlField"}},[i("el-input",{attrs:{placeholder:"请输入URL字段"},model:{value:e.form.urlField,callback:function(t){e.$set(e.form,"urlField",t)},expression:"form.urlField"}})],1):e._e(),e._v(" "),i("el-form-item",{attrs:{label:"展示方式",prop:"linkType"}},[i("el-select",{attrs:{placeholder:"请选择展示方式"},model:{value:e.form.linkType,callback:function(t){e.$set(e.form,"linkType",t)},expression:"form.linkType"}},e._l(e.linkTypeList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),e._v(" "),"TEMPLATE_MOUNT_PLUGIN"===e.form.pluginCode?i("el-form-item",{attrs:{label:"参数配置",prop:"form.paramConfigList"}},[0==e.form.paramConfigList.length?i("span",[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:function(t){return e.addListTabConfigItem()}}},[e._v("添加配置")])],1):e._e(),e._v(" "),e._l(e.form.paramConfigList,(function(t,o){return i("div",{key:o,staticClass:"list-form"},[i("div",{staticClass:"left"},[i("el-row",{staticClass:"mb8",attrs:{gutter:10}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"列名",prop:"form.paramConfigList."+o+".column",rules:e.rules.column}},[i("el-input",{attrs:{placeholder:"请输入列名"},model:{value:t.column,callback:function(i){e.$set(t,"column",i)},expression:"litem.column"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"占位符",prop:"form.paramConfigList."+o+".placeholder",rules:e.rules.placeholder}},[i("el-input",{attrs:{placeholder:"请输入占位符"},model:{value:t.placeholder,callback:function(i){e.$set(t,"placeholder",i)},expression:"litem.placeholder"}})],1)],1)],1)],1),e._v(" "),o===e.form.paramConfigList.length-1?i("div",{staticClass:"right"},[i("i",{staticClass:"el-icon-circle-plus-outline",on:{click:function(t){return e.addListTabConfigItem()}}}),e._v(" "),i("i",{staticClass:"el-icon-remove-outline",on:{click:function(t){return e.deleteListTabConfigItem(o)}}})]):e._e()])}))],2):e._e()],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.addForm}},[e._v("确 定")]),e._v(" "),i("el-button",{on:{click:function(t){e.open=!1}}},[e._v("取 消")])],1)],1),e._v(" "),i("el-dialog",{staticClass:"confirm",attrs:{title:e.title,visible:e.viewPlug,"append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.viewPlug=t}}},[i("div",{staticClass:"confirm-show"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.pluginList,height:"250",border:"",stripe:""}},[i("el-table-column",{attrs:{prop:"index",label:"序号",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.$index+1))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"code",label:"业务编码",width:"180"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"插件名称",width:"180"}}),e._v(" "),i("el-table-column",{attrs:{prop:"descr",label:"插件描述"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.viewPlug=!1}}},[e._v("确 定")])],1)])],1)},Q=[],Z={props:["option"],data:function(){return{query:{configCode:"",oid:""},title:"",open:!1,viewPlug:!1,tableData:[],form:{paramConfigList:[{column:""}]},rules:{name:[{required:!0,message:"模块名称不能为空",trigger:"blur"}],pluginCode:[{required:!0,message:"业务模块不能为空",trigger:"blur"}],url:[{required:!0,message:"URL不能为空",trigger:"blur"}],linkType:[{required:!0,message:"链接方式不能为空",trigger:"blur"}],column:[{required:!0,message:"列名不能为空",trigger:"blur"}],placeholder:[{required:!0,message:"占位符不能为空",trigger:"blur"}]},pluginList:[],linkTypeList:[{name:"弹出URL",value:"open_page"},{name:"嵌入URL",value:"iframe"}],moduleId:""}},watch:{option:{handler:function(e,t){this.option&&(this.query.oid=this.option.oid,this.query.configCode=this.option.configCode,this.getConfig())},deep:!0}},mounted:function(){},created:function(){this.option&&(this.query.oid=this.option.oid,this.query.configCode=this.option.configCode,this.getConfig(),this.getPlugType())},methods:{getPlugType:function(){var e=this;Object(n["e"])({configCode:this.option.configCode}).then((function(t){e.pluginList=t}))},getConfig:function(){var e=this;Object(n["d"])(this.query).then((function(t){if(t){var i=t;e.tableData=i}}))},addConfig:function(){this.title="新增模块",this.moduleId="",this.form={paramConfigList:[]},this.open=!0},view:function(e){this.moduleId=e.moduleId;var t=e.moduleId+"_"+e.pluginCode+"_CONFIG",i=this;Object(n["d"])({configCode:t,oid:this.option.oid}).then((function(e){i.form=e,i.title="查看模块",i.open=!0}))},addForm:function(){"QUERY_HBASE_MOUNT_PLUGIN"===this.form.pluginCode&&this.$delete(this.form,"paramConfigList");var e="";if(this.moduleId)e=this.moduleId+"_"+this.form.pluginCode+"_CONFIG";else{var t=(new Date).getTime();e=t+"_"+this.form.pluginCode+"_CONFIG";var i=this.tableData.slice();i.push({moduleId:t,pluginCode:this.form.pluginCode});var o={oid:this.option.oid,configCode:this.option.configCode,configValue:JSON.stringify(i)};Object(n["f"])(o).then((function(e){}))}var l={oid:this.option.oid,configCode:e,configValue:JSON.stringify(this.form)},a=this;Object(n["f"])(l).then((function(e){a.open=!1,a.getConfig()}))},addListTabConfigItem:function(){this.form.paramConfigList.push({column:"",placeholder:""}),this.$forceUpdate()},deleteConfigs:function(e,t){var i=this;this.$confirm("确认要删除"+e.moduleId+"该属性配置吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i.$message({type:"success",message:"删除成功!"});var e=i.tableData.splice(t,1)[0],o=JSON.stringify(i.tableData),l={oid:i.option.oid,configCode:i.option.configCode,configValue:o};i.saveConfigs(l);var a={oid:i.option.oid,configCode:e.moduleId+"_"+e.pluginCode+"_CONFIG"};Object(n["a"])(a).then((function(e){e?i.$message({type:"success",message:"配置删除成功!"}):i.$message({type:"info",message:"配置删除失败!"})}))})).catch((function(){i.$message({type:"info",message:"已取消删除"})}))},saveConfigs:function(e){var t=this;Object(n["f"])(e).then((function(e){t.getConfig()}))},deleteListTabConfigItem:function(e){this.form.paramConfigList.splice(e,1),this.$forceUpdate()}}},K=Z,W=(i("dd8a"),i("7957"),Object(p["a"])(K,X,Q,!1,null,"33ba46a8",null)),ee=W.exports,te=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"config-order"},[i("div",{staticClass:"sel-area"},[i("div",{staticClass:"left"},[i("el-radio-group",{model:{value:e.currHospitals,callback:function(t){e.currHospitals=t},expression:"currHospitals"}},e._l(e.hospitals,(function(t,o){return i("el-radio",{key:o,attrs:{label:t.code},on:{change:e.changeSetOid}},[e._v(e._s(t.name))])})),1)],1),e._v(" "),i("div",{staticClass:"right"})]),e._v(" "),i("el-form",{ref:"form",staticClass:"addform",attrs:{model:e.form,rules:e.rules,"label-width":"95px"}},[i("div",{staticClass:"add"},[i("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-plus"},on:{click:e.addConfig}},[e._v("新增配置行")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.save}},[e._v("保存过滤器配置")])],1),e._v(" "),0==e.form.configList.length?i("div",{staticClass:"list-form"},[i("div",{staticClass:"empty"},[e._v("暂无配置")])]):e._e(),e._v(" "),e._l(e.form.configList,(function(t,o){return i("div",{key:o,staticClass:"list-form"},[i("div",{staticClass:"left"},[i("el-row",{staticClass:"mb8",attrs:{gutter:20}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"数据库字段",prop:"configList."+o+".propertyName",rules:e.rules.propertyName}},[i("el-input",{attrs:{placeholder:"请输入数据库字段"},model:{value:t.propertyName,callback:function(i){e.$set(t,"propertyName",i)},expression:"sitem.propertyName"}}),e._v(" "),i("span",[i("i",{staticClass:"el-icon-question",attrs:{title:e.option.namePlaceText}})])],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"运算符",prop:"configList."+o+".matchType",rules:e.rules.matchType}},[i("el-select",{attrs:{placeholder:"请选择运算符"},model:{value:t.matchType,callback:function(i){e.$set(t,"matchType",i)},expression:"sitem.matchType"}},e._l(e.opList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"运算值",prop:"configList."+o+".propertyValue",rules:e.rules.propertyValue}},[i("el-input",{attrs:{placeholder:"请输入运算值"},model:{value:t.propertyValue,callback:function(i){e.$set(t,"propertyValue",i)},expression:"sitem.propertyValue"}}),e._v(" "),e.option.valuePlaceText?i("span",[i("i",{staticClass:"el-icon-question",attrs:{title:e.option.valuePlaceText}})]):e._e()],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"right"},[i("i",{staticClass:"el-icon-remove-outline",on:{click:function(t){return e.deleteItem(o)}}})])])}))],2)],1)},ie=[],oe={props:["option"],data:function(){return{tableData:[],visitType:"",visitTypeList:[],query:{oid:"",configCode:""},hospitals:[],currHospitals:"",currOid:"",form:{configList:[{propertyName:""}]},rules:{propertyName:[{required:!0,message:"数据库字段不能为空",trigger:"blur"}],matchType:[{required:!0,message:"运算符不能为空",trigger:"blur"}],propertyValue:[{required:!0,message:"运算值不能为空",trigger:"blur"}]},opList:[{label:"=(等于)",value:"="},{label:"<>(不等于)",value:"<>"},{label:"in(在范围内)",value:"in"},{label:"nin(不在范围内)",value:"nin"},{label:">(大于)",value:">"},{label:">=(大于等于)",value:">="},{label:"<(小于)",value:"<"},{label:"<=(小于等于)",value:"<="},{label:"like(相似)",value:"like"},{label:"nlike(不相似)",value:"nlike"},{label:"sw(以此开始)",value:"sw"},{label:"ew(以此结尾)",value:"ew"}]}},watch:{option:{handler:function(e,t){this.option&&(this.query.oid=this.option.oid,this.query.configCode=this.option.configCode,this.visitType=this.option.visitTypeCode,this.hospitals=this.option.areaList,this.currHospitals=this.option.oid,this.changeVisit(),this.currOid=this.option.oid)},deep:!0}},created:function(){this.option&&(this.query.oid=this.option.oid,this.query.configCode=this.option.configCode,this.visitType=this.option.visitTypeCode,this.hospitals=this.option.areaList,this.currHospitals=this.option.oid,this.changeVisit(),this.currOid=this.option.oid)},methods:{getConfig:function(e){var t=this,i={oid:this.query.oid,configCode:e};Object(n["d"])(i).then((function(e){if(e){var i=e;i&&i.length>0?t.form.configList=i:t.form.configList=[{propertyName:""}]}}))},addConfig:function(){this.form.configList.push({})},deleteItem:function(e){this.form.configList.splice(e,1)},changeSetOid:function(e){console.log(e,"changeSetOid-----------------"),this.currOid=e},reset:function(){this.form={configCode:"",configList:[]},this.resetForm("form")},resetForm:function(e){this.$refs[e]&&this.$refs[e].resetFields()},save:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var i=JSON.stringify(e.form.configList),o={oid:e.currOid,configCode:e.form.configCode,configValue:i};console.log("item",o),e.saveConfigs(o)}}))},changeVisit:function(){var e=this.option.configCode;this.reset(),this.form.configCode=e,this.getConfig(e)},saveConfigs:function(e){var t=this;Object(n["f"])(e).then((function(e){t.getConfig(t.form.configCode),t.$message({type:"success",message:"保存成功!"})}))}}},le=oe,ae=(i("1387"),Object(p["a"])(le,te,ie,!1,null,"6d81ef82",null)),se=ae.exports,ne=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"report-group"},[i("div",{staticClass:"warpper"},[i("div",{staticClass:"add"},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleAddClick()}}},[e._v("添加")])],1),e._v(" "),e._m(0),e._v(" "),e._l(e.tableData,(function(t,o){return i("div",{key:o+"bz",staticClass:"rows row-body"},[i("div",{staticClass:"cell cell-body ch1"},[e._v(e._s(t.groupName))]),e._v(" "),i("div",{staticClass:"cell cell-body ch1"},[e._v("\n        "+e._s(t.classCodeList.join("|"))+"\n      ")]),e._v(" "),i("div",{staticClass:"cell cell-body ch2"},[i("span",{on:{click:function(i){return e.handleClick(t,o)}}},[e._v("编辑")])])])}))],2),e._v(" "),i("el-dialog",{attrs:{title:e.title,visible:e.open,"append-to-body":"",width:"550px","close-on-click-modal":!1},on:{"update:visible":function(t){e.open=t}}},[e.open?i("div",{staticClass:"collect-form"},[i("div",{staticClass:"f-tit"},[i("el-input",{attrs:{placeholder:"请输入分组",clearable:""},model:{value:e.form.groupName,callback:function(t){e.$set(e.form,"groupName",t)},expression:"form.groupName"}})],1),e._v(" "),i("div",{staticClass:"f-cont"},[i("el-input",{attrs:{placeholder:"请输入配置",clearable:""},model:{value:e.form.configCodeStr,callback:function(t){e.$set(e.form,"configCodeStr",t)},expression:"form.configCodeStr"}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveConfigs}},[e._v("确 定")]),e._v(" "),i("el-button",{on:{click:function(t){e.open=!1}}},[e._v("取 消")])],1)]):e._e()])],1)},re=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"rows row-head"},[i("div",{staticClass:"cell cell-head ch1"},[e._v("组别")]),e._v(" "),i("div",{staticClass:"cell cell-head ch1"},[e._v("配置")]),e._v(" "),i("div",{staticClass:"cell cell-head ch2"},[e._v("操作")])])}],ce=(i("28a5"),{props:["option"],data:function(){return{tableData:[],query:{oid:"",configCode:""},form:{configCodeStr:""},open:!1,title:"",selectIndex:0}},watch:{option:{handler:function(e,t){this.option&&(this.query.oid=this.option.oid,this.query.configCode=this.option.configCode,this.getConfig())},deep:!0}},created:function(){this.option&&(this.query.oid=this.option.oid,this.query.configCode=this.option.configCode,this.getConfig())},methods:{handleClick:function(e,t){this.title="编辑配置",this.selectIndex=t,this.form=Object.assign({},e),this.$set(this.form,"configCodeStr",this.form.classCodeList.join("|")),this.open=!0},handleAddClick:function(){this.title="添加配置",this.selectIndex=null,this.form={groupName:"",configCodeStr:""},this.open=!0},getConfig:function(){var e=this;Object(n["d"])(this.query).then((function(t){if(t){var i=t;e.tableData=i}}))},saveConfigs:function(){if(this.selectIndex||0==this.selectIndex){var e=this.tableData[this.selectIndex];e.groupName=this.form.groupName,this.form.configCodeStr?e.classCodeList=this.form.configCodeStr.split("|"):e.classCodeList=[]}else{var t={groupName:this.form.groupName};this.form.configCodeStr?t.classCodeList=this.form.configCodeStr.split("|"):t.classCodeList=[],this.tableData.push(t)}var i=JSON.stringify(this.tableData),o={oid:this.query.oid,configCode:this.query.configCode,configValue:i},l=this;Object(n["f"])(o).then((function(e){l.open=!1,l.getConfig()}))}}}),ue=ce,fe=(i("cc47"),Object(p["a"])(ue,ne,re,!1,null,"439e97a2",null)),pe=fe.exports,me=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"plugs-iframe"},[i("iframeComp",{attrs:{src:e.url}})],1)},de=[],ge=i("061b"),ve={components:{iframeComp:ge["a"]},props:["url"],data:function(){return{}},watch:{url:{handler:function(e,t){}}}},he=ve,Ce=(i("46e5"),Object(p["a"])(he,me,de,!1,null,"058de625",null)),be=Ce.exports,ye={components:{summaryConfigList:d,orderTypeConfig:w,visitTypeConfig:D,summaryFeeConfigList:y,indexNavConfig:A,tableColumConfig:Y,labModuleConfig:ee,reportConfig:se,reportGroupConfig:pe,plugsIframe:be},data:function(){return{openDialogFlag:!1,option:{}}},methods:{closeDia:function(){this.openDialogFlag=!1,this.$emit("update",null)},open:function(e){this.option=e,this.openDialogFlag=!0}}},_e=ye,ke=(i("5a3e"),Object(p["a"])(_e,o,l,!1,null,"4197db9d",null));t["a"]=ke.exports}}]);